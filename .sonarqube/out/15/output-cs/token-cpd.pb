…
~C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Constants\ClientConsts.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
	Constants4 =
{ 
public 

static 
class 
ClientConsts $
{ 
public 
static 
List 
< 
string !
>! "
GetSecretTypes# 1
(1 2
)2 3
{		 	
var

 
secretTypes

 
=

 
new

 !
List

" &
<

& '
string

' -
>

- .
{ 
$str 
, 
$str  
,  !
$str 
, 
$str '
} 
; 
return 
secretTypes 
; 
} 	
public 
static 
List 
< 
string !
>! "
GetStandardClaims# 4
(4 5
)5 6
{ 	
var 
standardClaims 
=  
new! $
List% )
<) *
string* 0
>0 1
{ 
$str 
, 
$str 
, 
$str 
, 
$str 
, 
$str 
, 
$str 
, 
$str   $
,  $ %
$str!! 
,!! 
$str"" 
,"" 
$str## 
,## 
$str$$ 
,$$ 
$str%%  
,%%  !
$str&& 
,&& 
$str'' 
,'' 
$str(( 
,(( 
$str)) 
,)) 
$str** 
,** 
$str++ '
,++' (
$str,, 
,,, 
$str-- 
}.. 
;.. 
return00 
standardClaims00 !
;00! "
}11 	
public33 
static33 
List33 
<33 
string33 !
>33! "
GetGrantTypes33# 0
(330 1
)331 2
{44 	
var55 
allowedGrantypes55  
=55! "
new55# &
List55' +
<55+ ,
string55, 2
>552 3
{66 
$str77 
,77 
$str88 (
,88( )
$str99 (
,99( )
$str:: 
,:: 
$str;; 
}<< 
;<< 
return>> 
allowedGrantypes>> #
;>># $
}?? 	
publicAA 
staticAA 
ListAA 
<AA 

SelectItemAA %
>AA% &
GetProtocolTypesAA' 7
(AA7 8
)AA8 9
{BB 	
varCC 
protocolTypesCC 
=CC 
newCC  #
ListCC$ (
<CC( )

SelectItemCC) 3
>CC3 4
{CC5 6
newCC7 :

SelectItemCC; E
(CCE F
$strCCF L
,CCL M
$strCCN ^
)CC^ _
}CC` a
;CCa b
returnEE 
protocolTypesEE  
;EE  !
}FF 	
}GG 
}HH ©
|C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Dtos\Common\HashType.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Dtos4 8
.8 9
Common9 ?
{ 
public 

enum 
HashType 
{ 
Sha256 
, 
Sha512 
} 
} Â

}C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Dtos\Common\PagedList.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Dtos4 8
.8 9
Common9 ?
{ 
public 

class 
	PagedList 
< 
T 
> 
where #
T$ %
:& '
class( -
{ 
public 
	PagedList 
( 
) 
{ 	
Data		 
=		 
new		 
List		 
<		 
T		 
>		 
(		 
)		  
;		  !
}

 	
public 
List 
< 
T 
> 
Data 
{ 
get !
;! "
}# $
public 
int 

TotalCount 
{ 
get  #
;# $
set% (
;( )
}* +
public 
int 
PageSize 
{ 
get !
;! "
set# &
;& '
}( )
} 
} ¤

yC:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Dtos\Common\Pager.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Dtos4 8
.8 9
Common9 ?
{ 
public 

class 
Pager 
{ 
public 
int 

TotalCount 
{ 
get  #
;# $
set% (
;( )
}* +
public 
int 
PageSize 
{ 
get !
;! "
set# &
;& '
}( )
public		 
string		 
Action		 
{		 
get		 "
;		" #
set		$ '
;		' (
}		) *
public 
string 
Search 
{ 
get "
;" #
set$ '
;' (
}) *
public 
bool 
EnableSearch  
{! "
get# &
;& '
set( +
;+ ,
}- .
=/ 0
false1 6
;6 7
} 
} §
zC:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Dtos\Common\Search.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Dtos4 8
.8 9
Common9 ?
{ 
public 

class 
Search 
{ 
public 
string 
Action 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 

Controller  
{! "
get# &
;& '
set( +
;+ ,
}- .
} 
}		 æ
~C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Dtos\Common\SelectItem.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Dtos4 8
.8 9
Common9 ?
{ 
public 

class 

SelectItem 
{ 
public 

SelectItem 
( 
string  
id! #
,# $
string% +
text, 0
)0 1
{ 	
Id 
= 
id 
; 
Text 
= 
text 
; 
}		 	
public 
string 
Id 
{ 
get 
; 
set  #
;# $
}% &
public 
string 
Text 
{ 
get  
;  !
set" %
;% &
}' (
} 
} ú
‰C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Dtos\Configuration\ApiResourceDto.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Dtos4 8
.8 9
Configuration9 F
{ 
public 

class 
ApiResourceDto 
{ 
public 
ApiResourceDto 
( 
) 
{		 	

UserClaims

 
=

 
new

 
List

 !
<

! "
string

" (
>

( )
(

) *
)

* +
;

+ ,
} 	
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
[ 	
Required	 
] 
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
DisplayName !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
Description !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
bool 
Enabled 
{ 
get !
;! "
set# &
;& '
}( )
=* +
true, 0
;0 1
public 
List 
< 
string 
> 

UserClaims &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
string 
UserClaimsItems %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
} 
} ¼

ŠC:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Dtos\Configuration\ApiResourcesDto.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Dtos4 8
.8 9
Configuration9 F
{ 
public 

class 
ApiResourcesDto  
{ 
public 
ApiResourcesDto 
( 
)  
{ 	
ApiResources		 
=		 
new		 
List		 #
<		# $
ApiResourceDto		$ 2
>		2 3
(		3 4
)		4 5
;		5 6
}

 	
public 
int 
PageSize 
{ 
get !
;! "
set# &
;& '
}( )
public 
int 

TotalCount 
{ 
get  #
;# $
set% (
;( )
}* +
public 
List 
< 
ApiResourceDto "
>" #
ApiResources$ 0
{1 2
get3 6
;6 7
set8 ;
;; <
}= >
} 
} “
†C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Dtos\Configuration\ApiScopeDto.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Dtos4 8
.8 9
Configuration9 F
{ 
public 

class 
ApiScopeDto 
{ 
public 
ApiScopeDto 
( 
) 
{		 	

UserClaims

 
=

 
new

 
List

 !
<

! "
string

" (
>

( )
(

) *
)

* +
;

+ ,
} 	
public 
bool #
ShowInDiscoveryDocument +
{, -
get. 1
;1 2
set3 6
;6 7
}8 9
=: ;
true< @
;@ A
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
[ 	
Required	 
] 
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
DisplayName !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
Description !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
bool 
Required 
{ 
get "
;" #
set$ '
;' (
}) *
public 
bool 
	Emphasize 
{ 
get  #
;# $
set% (
;( )
}* +
public 
List 
< 
string 
> 

UserClaims &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
} 
} ¬
‡C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Dtos\Configuration\ApiScopesDto.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Dtos4 8
.8 9
Configuration9 F
{ 
public 

class 
ApiScopesDto 
{ 
public 
ApiScopesDto 
( 
) 
{		 	
Scopes

 
=

 
new

 
List

 
<

 
ApiScopeDto

 )
>

) *
(

* +
)

+ ,
;

, -

UserClaims 
= 
new 
List !
<! "
string" (
>( )
() *
)* +
;+ ,
} 	
public 
int 
ApiResourceId  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string 
ResourceName "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
bool #
ShowInDiscoveryDocument +
{, -
get. 1
;1 2
set3 6
;6 7
}8 9
=: ;
true< @
;@ A
public 
int 

ApiScopeId 
{ 
get  #
;# $
set% (
;( )
}* +
[ 	
Required	 
] 
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
DisplayName !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
Description !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
bool 
Required 
{ 
get "
;" #
set$ '
;' (
}) *
public 
bool 
	Emphasize 
{ 
get  #
;# $
set% (
;( )
}* +
public!! 
int!! 
PageSize!! 
{!! 
get!! !
;!!! "
set!!# &
;!!& '
}!!( )
public## 
int## 

TotalCount## 
{## 
get##  #
;### $
set##% (
;##( )
}##* +
public%% 
List%% 
<%% 
ApiScopeDto%% 
>%%  
Scopes%%! '
{%%( )
get%%* -
;%%- .
set%%/ 2
;%%2 3
}%%4 5
public'' 
List'' 
<'' 
string'' 
>'' 

UserClaims'' &
{''' (
get'') ,
;'', -
set''. 1
;''1 2
}''3 4
public)) 
string)) 
UserClaimsItems)) %
{))& '
get))( +
;))+ ,
set))- 0
;))0 1
}))2 3
}** 
}++ ´
‡C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Dtos\Configuration\ApiSecretDto.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Dtos4 8
.8 9
Configuration9 F
{ 
public 

class 
ApiSecretDto 
{ 
[ 	
Required	 
] 
public		 
string		 
Type		 
{		 
get		  
;		  !
set		" %
;		% &
}		' (
=		) *
$str		+ 9
;		9 :
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Description !
{" #
get$ '
;' (
set) ,
;, -
}. /
[ 	
Required	 
] 
public 
string 
Value 
{ 
get !
;! "
set# &
;& '
}( )
public 
DateTime 
? 

Expiration #
{$ %
get& )
;) *
set+ .
;. /
}0 1
} 
} ß
ˆC:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Dtos\Configuration\ApiSecretsDto.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Dtos4 8
.8 9
Configuration9 F
{ 
public 

class 
ApiSecretsDto 
{		 
public

 
ApiSecretsDto

 
(

 
)

 
{ 	

ApiSecrets 
= 
new 
List !
<! "
ApiSecretDto" .
>. /
(/ 0
)0 1
;1 2
} 	
public 
int 
ApiResourceId  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
int 
ApiSecretId 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
ApiResourceName %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
[ 	
Required	 
] 
public 
string 
Type 
{ 
get  
;  !
set" %
;% &
}' (
=) *
$str+ 9
;9 :
public 
List 
< 

SelectItem 
> 
TypeList  (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
string 
Description !
{" #
get$ '
;' (
set) ,
;, -
}. /
[ 	
Required	 
] 
public 
string 
Value 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
HashType 
{  
get! $
;$ %
set& )
;) *
}+ ,
public!! 
List!! 
<!! 

SelectItem!! 
>!! 
	HashTypes!!  )
{!!* +
get!!, /
;!!/ 0
set!!1 4
;!!4 5
}!!6 7
public## 
DateTime## 
?## 

Expiration## #
{##$ %
get##& )
;##) *
set##+ .
;##. /
}##0 1
public%% 
int%% 

TotalCount%% 
{%% 
get%%  #
;%%# $
set%%% (
;%%( )
}%%* +
public'' 
int'' 
PageSize'' 
{'' 
get'' !
;''! "
set''# &
;''& '
}''( )
public)) 
List)) 
<)) 
ApiSecretDto))  
>))  !

ApiSecrets))" ,
{))- .
get))/ 2
;))2 3
set))4 7
;))7 8
}))9 :
}** 
}++ º
‰C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Dtos\Configuration\ClientClaimDto.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Dtos4 8
.8 9
Configuration9 F
{ 
public 

class 
ClientClaimDto 
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
[		 	
Required			 
]		 
public

 
string

 
Type

 
{

 
get

  
;

  !
set

" %
;

% &
}

' (
[ 	
Required	 
] 
public 
string 
Value 
{ 
get !
;! "
set# &
;& '
}( )
} 
} ª
ŠC:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Dtos\Configuration\ClientClaimsDto.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Dtos4 8
.8 9
Configuration9 F
{ 
public 

class 
ClientClaimsDto  
{ 
public 
ClientClaimsDto 
( 
)  
{		 	
ClientClaims

 
=

 
new

 
List

 #
<

# $
ClientClaimDto

$ 2
>

2 3
(

3 4
)

4 5
;

5 6
} 	
public 
int 
ClientClaimId  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
int 
ClientId 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 

ClientName  
{! "
get# &
;& '
set( +
;+ ,
}- .
[ 	
Required	 
] 
public 
string 
Type 
{ 
get  
;  !
set" %
;% &
}' (
[ 	
Required	 
] 
public 
string 
Value 
{ 
get !
;! "
set# &
;& '
}( )
public 
List 
< 
ClientClaimDto "
>" #
ClientClaims$ 0
{1 2
get3 6
;6 7
set8 ;
;; <
}= >
public 
int 

TotalCount 
{ 
get  #
;# $
set% (
;( )
}* +
public 
int 
PageSize 
{ 
get !
;! "
set# &
;& '
}( )
} 
} Â
‰C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Dtos\Configuration\ClientCloneDto.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Dtos4 8
.8 9
Configuration9 F
{ 
public 

class 
ClientCloneDto 
:  !
	ClientDto" +
{ 
public 
string 
ClientIdOriginal &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
string 
ClientNameOriginal (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public		 
bool		 "
CloneClientCorsOrigins		 *
{		+ ,
get		- 0
;		0 1
set		2 5
;		5 6
}		7 8
public 
bool #
CloneClientRedirectUris +
{, -
get. 1
;1 2
set3 6
;6 7
}8 9
public 
bool &
CloneClientIdPRestrictions .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
public 
bool -
!CloneClientPostLogoutRedirectUris 5
{6 7
get8 ;
;; <
set= @
;@ A
}B C
public 
bool !
CloneClientGrantTypes )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
public 
bool 
CloneClientScopes %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
bool 
CloneClientClaims %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
bool !
CloneClientProperties )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
} 
} ¶d
„C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Dtos\Configuration\ClientDto.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Dtos4 8
.8 9
Configuration9 F
{ 
public 

class 
	ClientDto 
{		 
public

 
	ClientDto

 
(

 
)

 
{ 	
AllowedScopes 
= 
new 
List  $
<$ %
string% +
>+ ,
(, -
)- .
;. /"
PostLogoutRedirectUris "
=# $
new% (
List) -
<- .
string. 4
>4 5
(5 6
)6 7
;7 8
RedirectUris 
= 
new 
List #
<# $
string$ *
>* +
(+ ,
), -
;- .(
IdentityProviderRestrictions (
=) *
new+ .
List/ 3
<3 4
string4 :
>: ;
(; <
)< =
;= >
AllowedCorsOrigins 
=  
new! $
List% )
<) *
string* 0
>0 1
(1 2
)2 3
;3 4
AllowedGrantTypes 
= 
new  #
List$ (
<( )
string) /
>/ 0
(0 1
)1 2
;2 3
Claims 
= 
new 
List 
< 
ClientClaimDto ,
>, -
(- .
). /
;/ 0
ClientSecrets 
= 
new 
List  $
<$ %
ClientSecretDto% 4
>4 5
(5 6
)6 7
;7 8

Properties 
= 
new 
List !
<! "
ClientPropertyDto" 3
>3 4
(4 5
)5 6
;6 7
} 	
public 

ClientType 

ClientType $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
int (
AbsoluteRefreshTokenLifetime /
{0 1
get2 5
;5 6
set7 :
;: ;
}< =
=> ?
$num@ G
;G H
public 
int 
AccessTokenLifetime &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
=5 6
$num7 ;
;; <
public 
int 
? 
ConsentLifetime #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
int 
AccessTokenType "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
List 
< 

SelectItem 
> 
AccessTokenTypes  0
{1 2
get3 6
;6 7
set8 ;
;; <
}= >
public!! 
bool!! '
AllowAccessTokensViaBrowser!! /
{!!0 1
get!!2 5
;!!5 6
set!!7 :
;!!: ;
}!!< =
public"" 
bool"" 
AllowOfflineAccess"" &
{""' (
get"") ,
;"", -
set"". 1
;""1 2
}""3 4
public## 
bool## 
AllowPlainTextPkce## &
{##' (
get##) ,
;##, -
set##. 1
;##1 2
}##3 4
public$$ 
bool$$  
AllowRememberConsent$$ (
{$$) *
get$$+ .
;$$. /
set$$0 3
;$$3 4
}$$5 6
=$$7 8
true$$9 =
;$$= >
public%% 
bool%% ,
 AlwaysIncludeUserClaimsInIdToken%% 4
{%%5 6
get%%7 :
;%%: ;
set%%< ?
;%%? @
}%%A B
public&& 
bool&& "
AlwaysSendClientClaims&& *
{&&+ ,
get&&- 0
;&&0 1
set&&2 5
;&&5 6
}&&7 8
public'' 
int'' %
AuthorizationCodeLifetime'' ,
{''- .
get''/ 2
;''2 3
set''4 7
;''7 8
}''9 :
=''; <
$num''= @
;''@ A
public)) 
string)) !
FrontChannelLogoutUri)) +
{)), -
get)). 1
;))1 2
set))3 6
;))6 7
}))8 9
public** 
bool** -
!FrontChannelLogoutSessionRequired** 5
{**6 7
get**8 ;
;**; <
set**= @
;**@ A
}**B C
=**D E
true**F J
;**J K
public++ 
string++  
BackChannelLogoutUri++ *
{+++ ,
get++- 0
;++0 1
set++2 5
;++5 6
}++7 8
public,, 
bool,, ,
 BackChannelLogoutSessionRequired,, 4
{,,5 6
get,,7 :
;,,: ;
set,,< ?
;,,? @
},,A B
=,,C D
true,,E I
;,,I J
[.. 	
Required..	 
].. 
public// 
string// 
ClientId// 
{//  
get//! $
;//$ %
set//& )
;//) *
}//+ ,
[11 	
Required11	 
]11 
public22 
string22 

ClientName22  
{22! "
get22# &
;22& '
set22( +
;22+ ,
}22- .
public44 
string44 
	ClientUri44 
{44  !
get44" %
;44% &
set44' *
;44* +
}44, -
public66 
string66 
Description66 !
{66" #
get66$ '
;66' (
set66) ,
;66, -
}66. /
public88 
bool88 
Enabled88 
{88 
get88 !
;88! "
set88# &
;88& '
}88( )
=88* +
true88, 0
;880 1
public99 
bool99 
EnableLocalLogin99 $
{99% &
get99' *
;99* +
set99, /
;99/ 0
}991 2
=993 4
true995 9
;999 :
public:: 
int:: 
Id:: 
{:: 
get:: 
;:: 
set::  
;::  !
}::" #
public;; 
int;; !
IdentityTokenLifetime;; (
{;;) *
get;;+ .
;;;. /
set;;0 3
;;;3 4
};;5 6
=;;7 8
$num;;9 <
;;;< =
public<< 
bool<< 
IncludeJwtId<<  
{<<! "
get<<# &
;<<& '
set<<( +
;<<+ ,
}<<- .
public== 
string== 
LogoUri== 
{== 
get==  #
;==# $
set==% (
;==( )
}==* +
public?? 
string?? 
ClientClaimsPrefix?? (
{??) *
get??+ .
;??. /
set??0 3
;??3 4
}??5 6
=??7 8
$str??9 B
;??B C
publicAA 
stringAA 
PairWiseSubjectSaltAA )
{AA* +
getAA, /
;AA/ 0
setAA1 4
;AA4 5
}AA6 7
publicCC 
stringCC 
ProtocolTypeCC "
{CC# $
getCC% (
;CC( )
setCC* -
;CC- .
}CC/ 0
=CC1 2
$strCC3 9
;CC9 :
publicEE 
ListEE 
<EE 

SelectItemEE 
>EE 
ProtocolTypesEE  -
{EE. /
getEE0 3
;EE3 4
setEE5 8
;EE8 9
}EE: ;
publicGG 
intGG "
RefreshTokenExpirationGG )
{GG* +
getGG, /
;GG/ 0
setGG1 4
;GG4 5
}GG6 7
=GG8 9
$numGG: ;
;GG; <
publicHH 
ListHH 
<HH 

SelectItemHH 
>HH #
RefreshTokenExpirationsHH  7
{HH8 9
getHH: =
;HH= >
setHH? B
;HHB C
}HHD E
publicJJ 
intJJ 
RefreshTokenUsageJJ $
{JJ% &
getJJ' *
;JJ* +
setJJ, /
;JJ/ 0
}JJ1 2
=JJ3 4
$numJJ5 6
;JJ6 7
publicKK 
ListKK 
<KK 

SelectItemKK 
>KK 
RefreshTokenUsagesKK  2
{KK3 4
getKK5 8
;KK8 9
setKK: =
;KK= >
}KK? @
publicMM 
intMM '
SlidingRefreshTokenLifetimeMM .
{MM/ 0
getMM1 4
;MM4 5
setMM6 9
;MM9 :
}MM; <
=MM= >
$numMM? F
;MMF G
publicOO 
boolOO 
RequireClientSecretOO '
{OO( )
getOO* -
;OO- .
setOO/ 2
;OO2 3
}OO4 5
=OO6 7
trueOO8 <
;OO< =
publicPP 
boolPP 
RequireConsentPP "
{PP# $
getPP% (
;PP( )
setPP* -
;PP- .
}PP/ 0
=PP1 2
truePP3 7
;PP7 8
publicQQ 
boolQQ 
RequirePkceQQ 
{QQ  !
getQQ" %
;QQ% &
setQQ' *
;QQ* +
}QQ, -
publicRR 
boolRR ,
 UpdateAccessTokenClaimsOnRefreshRR 4
{RR5 6
getRR7 :
;RR: ;
setRR< ?
;RR? @
}RRA B
publicTT 
ListTT 
<TT 
stringTT 
>TT "
PostLogoutRedirectUrisTT 2
{TT3 4
getTT5 8
;TT8 9
setTT: =
;TT= >
}TT? @
publicUU 
stringUU '
PostLogoutRedirectUrisItemsUU 1
{UU2 3
getUU4 7
;UU7 8
setUU9 <
;UU< =
}UU> ?
publicWW 
ListWW 
<WW 
stringWW 
>WW (
IdentityProviderRestrictionsWW 8
{WW9 :
getWW; >
;WW> ?
setWW@ C
;WWC D
}WWE F
publicXX 
stringXX -
!IdentityProviderRestrictionsItemsXX 7
{XX8 9
getXX: =
;XX= >
setXX? B
;XXB C
}XXD E
publicZZ 
ListZZ 
<ZZ 
stringZZ 
>ZZ 
RedirectUrisZZ (
{ZZ) *
getZZ+ .
;ZZ. /
setZZ0 3
;ZZ3 4
}ZZ5 6
public[[ 
string[[ 
RedirectUrisItems[[ '
{[[( )
get[[* -
;[[- .
set[[/ 2
;[[2 3
}[[4 5
public]] 
List]] 
<]] 
string]] 
>]] 
AllowedCorsOrigins]] .
{]]/ 0
get]]1 4
;]]4 5
set]]6 9
;]]9 :
}]]; <
public^^ 
string^^ #
AllowedCorsOriginsItems^^ -
{^^. /
get^^0 3
;^^3 4
set^^5 8
;^^8 9
}^^: ;
public`` 
List`` 
<`` 
string`` 
>`` 
AllowedGrantTypes`` -
{``. /
get``0 3
;``3 4
set``5 8
;``8 9
}``: ;
publicaa 
stringaa "
AllowedGrantTypesItemsaa ,
{aa- .
getaa/ 2
;aa2 3
setaa4 7
;aa7 8
}aa9 :
publiccc 
Listcc 
<cc 
stringcc 
>cc 
AllowedScopescc )
{cc* +
getcc, /
;cc/ 0
setcc1 4
;cc4 5
}cc6 7
publicdd 
stringdd 
AllowedScopesItemsdd (
{dd) *
getdd+ .
;dd. /
setdd0 3
;dd3 4
}dd5 6
publicff 
Listff 
<ff 
ClientClaimDtoff "
>ff" #
Claimsff$ *
{ff+ ,
getff- 0
;ff0 1
setff2 5
;ff5 6
}ff7 8
publicgg 
Listgg 
<gg 
ClientSecretDtogg #
>gg# $
ClientSecretsgg% 2
{gg3 4
getgg5 8
;gg8 9
setgg: =
;gg= >
}gg? @
publichh 
Listhh 
<hh 
ClientPropertyDtohh %
>hh% &

Propertieshh' 1
{hh2 3
gethh4 7
;hh7 8
sethh9 <
;hh< =
}hh> ?
}ii 
}jj Æ
ŽC:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Dtos\Configuration\ClientPropertiesDto.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Dtos4 8
.8 9
Configuration9 F
{ 
public 

class 
ClientPropertiesDto $
{ 
public 
ClientPropertiesDto "
(" #
)# $
{		 	
ClientProperties

 
=

 
new

 "
List

# '
<

' (
ClientPropertyDto

( 9
>

9 :
(

: ;
)

; <
;

< =
} 	
public 
int 
ClientPropertyId #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
int 
ClientId 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 

ClientName  
{! "
get# &
;& '
set( +
;+ ,
}- .
[ 	
Required	 
] 
public 
string 
Key 
{ 
get 
;  
set! $
;$ %
}& '
[ 	
Required	 
] 
public 
string 
Value 
{ 
get !
;! "
set# &
;& '
}( )
public 
List 
< 
ClientPropertyDto %
>% &
ClientProperties' 7
{8 9
get: =
;= >
set? B
;B C
}D E
public 
int 

TotalCount 
{ 
get  #
;# $
set% (
;( )
}* +
public 
int 
PageSize 
{ 
get !
;! "
set# &
;& '
}( )
} 
} ×
ŒC:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Dtos\Configuration\ClientPropertyDto.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Dtos4 8
.8 9
Configuration9 F
{ 
public 

class 
ClientPropertyDto "
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Key 
{ 
get 
;  
set! $
;$ %
}& '
public 
string 
Value 
{ 
get !
;! "
set# &
;& '
}( )
} 
}		 ™

…C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Dtos\Configuration\ClientsDto.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Dtos4 8
.8 9
Configuration9 F
{ 
public 

class 

ClientsDto 
{ 
public 

ClientsDto 
( 
) 
{ 	
Clients		 
=		 
new		 
List		 
<		 
	ClientDto		 (
>		( )
(		) *
)		* +
;		+ ,
}

 	
public 
List 
< 
	ClientDto 
> 
Clients &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
int 

TotalCount 
{ 
get  #
;# $
set% (
;( )
}* +
public 
int 
PageSize 
{ 
get !
;! "
set# &
;& '
}( )
} 
} º
ŠC:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Dtos\Configuration\ClientSecretDto.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Dtos4 8
.8 9
Configuration9 F
{ 
public 

class 
ClientSecretDto  
{ 
[ 	
Required	 
] 
public		 
string		 
Type		 
{		 
get		  
;		  !
set		" %
;		% &
}		' (
=		) *
$str		+ 9
;		9 :
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Description !
{" #
get$ '
;' (
set) ,
;, -
}. /
[ 	
Required	 
] 
public 
string 
Value 
{ 
get !
;! "
set# &
;& '
}( )
public 
DateTime 
? 

Expiration #
{$ %
get& )
;) *
set+ .
;. /
}0 1
} 
} í
‹C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Dtos\Configuration\ClientSecretsDto.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Dtos4 8
.8 9
Configuration9 F
{ 
public 

class 
ClientSecretsDto !
{		 
public

 
ClientSecretsDto

 
(

  
)

  !
{ 	
ClientSecrets 
= 
new 
List  $
<$ %
ClientSecretDto% 4
>4 5
(5 6
)6 7
;7 8
} 	
public 
int 
ClientId 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 

ClientName  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
int 
ClientSecretId !
{" #
get$ '
;' (
set) ,
;, -
}. /
[ 	
Required	 
] 
public 
string 
Type 
{ 
get  
;  !
set" %
;% &
}' (
=) *
$str+ 9
;9 :
public 
List 
< 

SelectItem 
> 
TypeList  (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
string 
Description !
{" #
get$ '
;' (
set) ,
;, -
}. /
[ 	
Required	 
] 
public 
string 
Value 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
HashType 
{  
get! $
;$ %
set& )
;) *
}+ ,
public!! 
List!! 
<!! 

SelectItem!! 
>!! 
	HashTypes!!  )
{!!* +
get!!, /
;!!/ 0
set!!1 4
;!!4 5
}!!6 7
public## 
DateTime## 
?## 

Expiration## #
{##$ %
get##& )
;##) *
set##+ .
;##. /
}##0 1
public%% 
int%% 

TotalCount%% 
{%% 
get%%  #
;%%# $
set%%% (
;%%( )
}%%* +
public'' 
int'' 
PageSize'' 
{'' 
get'' !
;''! "
set''# &
;''& '
}''( )
public)) 
List)) 
<)) 
ClientSecretDto)) #
>))# $
ClientSecrets))% 2
{))3 4
get))5 8
;))8 9
set)): =
;))= >
}))? @
}** 
}++ —
ŽC:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Dtos\Configuration\IdentityResourceDto.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Dtos4 8
.8 9
Configuration9 F
{ 
public 

class 
IdentityResourceDto $
{ 
public 
IdentityResourceDto "
(" #
)# $
{		 	

UserClaims

 
=

 
new

 
List

 !
<

! "
string

" (
>

( )
(

) *
)

* +
;

+ ,
} 	
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
[ 	
Required	 
] 
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
DisplayName !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
Description !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
bool 
Enabled 
{ 
get !
;! "
set# &
;& '
}( )
=* +
true, 0
;0 1
public 
bool #
ShowInDiscoveryDocument +
{, -
get. 1
;1 2
set3 6
;6 7
}8 9
=: ;
true< @
;@ A
public 
bool 
Required 
{ 
get "
;" #
set$ '
;' (
}) *
public 
bool 
	Emphasize 
{ 
get  #
;# $
set% (
;( )
}* +
public 
List 
< 
string 
> 

UserClaims &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public   
string   
UserClaimsItems   %
{  & '
get  ( +
;  + ,
set  - 0
;  0 1
}  2 3
}!! 
}"" ß

C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Dtos\Configuration\IdentityResourcesDto.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Dtos4 8
.8 9
Configuration9 F
{ 
public 

class  
IdentityResourcesDto %
{ 
public  
IdentityResourcesDto #
(# $
)$ %
{ 	
IdentityResources		 
=		 
new		  #
List		$ (
<		( )
IdentityResourceDto		) <
>		< =
(		= >
)		> ?
;		? @
}

 	
public 
int 
PageSize 
{ 
get !
;! "
set# &
;& '
}( )
public 
int 

TotalCount 
{ 
get  #
;# $
set% (
;( )
}* +
public 
List 
< 
IdentityResourceDto '
>' (
IdentityResources) :
{; <
get= @
;@ A
setB E
;E F
}G H
} 
} ‚
}C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Dtos\Enums\ClientType.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Dtos4 8
.8 9
Enums9 >
{ 
public 

enum 

ClientType 
{ 
Empty 
= 
$num 
, 
WebImplicit 
= 
$num 
, 
	WebHybrid 
= 
$num 
, 
Spa 
= 
$num 
, 
Native		 
=		 
$num		 
,		 
Machine

 
=

 
$num

 
} 
} º
~C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Dtos\Enums\SavedStatus.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Dtos4 8
.8 9
Enums9 >
{ 
public 

enum 
SavedStatus 
{ !
WillBeSavedExplicitly 
= 
$num  !
} 
} ô
„C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Dtos\Grant\PersistedGrantDto.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Dtos4 8
.8 9
Grant9 >
{ 
public 

class 
PersistedGrantDto "
{ 
public 
string 
Key 
{ 
get 
;  
set! $
;$ %
}& '
public 
string 
Type 
{ 
get  
;  !
set" %
;% &
}' (
public		 
string		 
	SubjectId		 
{		  !
get		" %
;		% &
set		' *
;		* +
}		, -
public

 
string

 
SubjectName

 !
{

" #
get

$ '
;

' (
set

) ,
;

, -
}

. /
public 
string 
ClientId 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
DateTime 
CreationTime $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
DateTime 
? 

Expiration #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
string 
Data 
{ 
get  
;  !
set" %
;% &
}' (
} 
} Û
…C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Dtos\Grant\PersistedGrantsDto.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Dtos4 8
.8 9
Grant9 >
{ 
public 

class 
PersistedGrantsDto #
{ 
public 
PersistedGrantsDto !
(! "
)" #
{ 	
PersistedGrants		 
=		 
new		 !
List		" &
<		& '
PersistedGrantDto		' 8
>		8 9
(		9 :
)		: ;
;		; <
}

 	
public 
int 
	SubjectId 
{ 
get "
;" #
set$ '
;' (
}) *
public 
int 

TotalCount 
{ 
get  #
;# $
set% (
;( )
}* +
public 
int 
PageSize 
{ 
get !
;! "
set# &
;& '
}( )
public 
List 
< 
PersistedGrantDto %
>% &
PersistedGrants' 6
{7 8
get9 <
;< =
set> A
;A B
}C D
} 
} ¾
‹C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Dtos\Identity\Base\BaseRoleClaimDto.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Dtos4 8
.8 9
Identity9 A
.A B
BaseB F
{ 
public 

class 
BaseRoleClaimDto !
<! "
TRoleId" )
,) *
TClaimId+ 3
>3 4
{ 
public 
TClaimId 
ClaimId 
{  !
get" %
;% &
set' *
;* +
}, -
public 
TRoleId 
RoleId 
{ 
get  #
;# $
set% (
;( )
}* +
} 
}		 î
†C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Dtos\Identity\Base\BaseRoleDto.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Dtos4 8
.8 9
Identity9 A
.A B
BaseB F
{ 
public 

class 
BaseRoleDto 
< 
TRoleId $
>$ %
{ 
public 
TRoleId 
Id 
{ 
get 
;  
set! $
;$ %
}& '
} 
} Ž
”C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Dtos\Identity\Base\BaseUserChangePasswordDto.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Dtos4 8
.8 9
Identity9 A
.A B
BaseB F
{ 
public 

class %
BaseUserChangePasswordDto *
<* +
TUserId+ 2
>2 3
{ 
public 
TUserId 
UserId 
{ 
get  #
;# $
set% (
;( )
}* +
} 
} ¾
‹C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Dtos\Identity\Base\BaseUserClaimDto.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Dtos4 8
.8 9
Identity9 A
.A B
BaseB F
{ 
public 

class 
BaseUserClaimDto !
<! "
TUserId" )
,) *
TClaimId+ 3
>3 4
{ 
public 
TClaimId 
ClaimId 
{  !
get" %
;% &
set' *
;* +
}, -
public 
TUserId 
UserId 
{ 
get  #
;# $
set% (
;( )
}* +
} 
}		 î
†C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Dtos\Identity\Base\BaseUserDto.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Dtos4 8
.8 9
Identity9 A
.A B
BaseB F
{ 
public 

class 
BaseUserDto 
< 
TUserId $
>$ %
{ 
public 
TUserId 
Id 
{ 
get 
;  
set! $
;$ %
}& '
} 
} ‚
ŽC:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Dtos\Identity\Base\BaseUserProviderDto.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Dtos4 8
.8 9
Identity9 A
.A B
BaseB F
{ 
public 

class 
BaseUserProviderDto $
<$ %
TUserId% ,
>, -
{ 
public 
TUserId 
UserId 
{ 
get  #
;# $
set% (
;( )
}* +
} 
} »
‹C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Dtos\Identity\Base\BaseUserRolesDto.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Dtos4 8
.8 9
Identity9 A
.A B
BaseB F
{ 
public 

class 
BaseUserRolesDto !
<! "
TUserId" )
,) *
TRoleId+ 2
>2 3
{ 
public 
TUserId 
UserId 
{ 
get  #
;# $
set% (
;( )
}* +
public 
TRoleId 
RoleId 
{ 
get  #
;# $
set% (
;( )
}* +
} 
}		 Ÿ
‚C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Dtos\Identity\RoleClaimDto.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Dtos4 8
.8 9
Identity9 A
{ 
public 

class 
RoleClaimDto 
: 
BaseRoleClaimDto  0
<0 1
int1 4
,4 5
int6 9
>9 :
{ 
[ 	
Required	 
] 
public		 
string		 
	ClaimType		 
{		  !
get		" %
;		% &
set		' *
;		* +
}		, -
[ 	
Required	 
] 
public 
string 

ClaimValue  
{! "
get# &
;& '
set( +
;+ ,
}- .
} 
} Å

ƒC:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Dtos\Identity\RoleClaimsDto.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Dtos4 8
.8 9
Identity9 A
{ 
public 

class 
RoleClaimsDto 
:  
RoleClaimDto! -
{ 
public 
RoleClaimsDto 
( 
) 
{ 	
Claims		 
=		 
new		 
List		 
<		 
RoleClaimDto		 *
>		* +
(		+ ,
)		, -
;		- .
}

 	
public 
List 
< 
RoleClaimDto  
>  !
Claims" (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
int 

TotalCount 
{ 
get  #
;# $
set% (
;( )
}* +
public 
int 
PageSize 
{ 
get !
;! "
set# &
;& '
}( )
} 
} ˜
}C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Dtos\Identity\RoleDto.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Dtos4 8
.8 9
Identity9 A
{ 
public 

class 
RoleDto 
: 
BaseRoleDto &
<& '
int' *
>* +
{ 
[ 	
Required	 
] 
public		 
string		 
Name		 
{		 
get		  
;		  !
set		" %
;		% &
}		' (
}

 
} €

~C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Dtos\Identity\RolesDto.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Dtos4 8
.8 9
Identity9 A
{ 
public 

class 
RolesDto 
{ 
public 
RolesDto 
( 
) 
{ 	
Roles		 
=		 
new		 
List		 
<		 
RoleDto		 $
>		$ %
(		% &
)		& '
;		' (
}

 	
public 
int 
PageSize 
{ 
get !
;! "
set# &
;& '
}( )
public 
int 

TotalCount 
{ 
get  #
;# $
set% (
;( )
}* +
public 
List 
< 
RoleDto 
> 
Roles "
{# $
get% (
;( )
set* -
;- .
}/ 0
} 
} Ó

‹C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Dtos\Identity\UserChangePasswordDto.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Dtos4 8
.8 9
Identity9 A
{ 
public 

class !
UserChangePasswordDto &
:' (%
BaseUserChangePasswordDto) B
<B C
intC F
>F G
{ 
public 
string 
UserName 
{  
get! $
;$ %
set& )
;) *
}+ ,
[

 	
Required

	 
]

 
public 
string 
Password 
{  
get! $
;$ %
set& )
;) *
}+ ,
[ 	
Required	 
] 
[ 	
Compare	 
( 
nameof 
( 
Password  
)  !
)! "
]" #
public 
string 
ConfirmPassword %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
} 
} Ÿ
‚C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Dtos\Identity\UserClaimDto.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Dtos4 8
.8 9
Identity9 A
{ 
public 

class 
UserClaimDto 
: 
BaseUserClaimDto  0
<0 1
int1 4
,4 5
int6 9
>9 :
{ 
[ 	
Required	 
] 
public		 
string		 
	ClaimType		 
{		  !
get		" %
;		% &
set		' *
;		* +
}		, -
[ 	
Required	 
] 
public 
string 

ClaimValue  
{! "
get# &
;& '
set( +
;+ ,
}- .
} 
} Å

ƒC:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Dtos\Identity\UserClaimsDto.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Dtos4 8
.8 9
Identity9 A
{ 
public 

class 
UserClaimsDto 
:  
UserClaimDto! -
{ 
public 
UserClaimsDto 
( 
) 
{ 	
Claims		 
=		 
new		 
List		 
<		 
UserClaimDto		 *
>		* +
(		+ ,
)		, -
;		- .
}

 	
public 
List 
< 
UserClaimDto  
>  !
Claims" (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
int 

TotalCount 
{ 
get  #
;# $
set% (
;( )
}* +
public 
int 
PageSize 
{ 
get !
;! "
set# &
;& '
}( )
} 
} ¢
}C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Dtos\Identity\UserDto.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Dtos4 8
.8 9
Identity9 A
{ 
public 

class 
UserDto 
: 
BaseUserDto &
<& '
int' *
>* +
{ 
[		 	
Required			 
]		 
public

 
string

 
UserName

 
{

  
get

! $
;

$ %
set

& )
;

) *
}

+ ,
[ 	
Required	 
] 
[ 	
EmailAddress	 
] 
public 
string 
Email 
{ 
get !
;! "
set# &
;& '
}( )
public 
bool 
EmailConfirmed "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string 
PhoneNumber !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
bool  
PhoneNumberConfirmed (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
bool 
LockoutEnabled "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
bool 
TwoFactorEnabled $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
string 
AccessFailedCount '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
DateTimeOffset 
? 

LockoutEnd )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
} 
} Ì
…C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Dtos\Identity\UserProviderDto.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Dtos4 8
.8 9
Identity9 A
{ 
public 

class 
UserProviderDto  
:! "
BaseUserProviderDto# 6
<6 7
int7 :
>: ;
{ 
public 
string 
ProviderKey !
{" #
get$ '
;' (
set) ,
;, -
}. /
public		 
string		 
LoginProvider		 #
{		$ %
get		& )
;		) *
set		+ .
;		. /
}		0 1
public 
string 
ProviderDisplayName )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
} 
} ©
†C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Dtos\Identity\UserProvidersDto.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Dtos4 8
.8 9
Identity9 A
{ 
public 

class 
UserProvidersDto !
:" #
UserProviderDto$ 3
{ 
public 
UserProvidersDto 
(  
)  !
{ 	
	Providers		 
=		 
new		 
List		  
<		  !
UserProviderDto		! 0
>		0 1
(		1 2
)		2 3
;		3 4
}

 	
public 
List 
< 
UserProviderDto #
># $
	Providers% .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
} 
} Ú
‚C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Dtos\Identity\UserRolesDto.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Dtos4 8
.8 9
Identity9 A
{ 
public 

class 
UserRolesDto 
: 
BaseUserRolesDto  0
<0 1
int1 4
,4 5
int6 9
>9 :
{ 
public		 
UserRolesDto		 
(		 
)		 
{

 	
Roles 
= 
new 
List 
< 
RoleDto $
>$ %
(% &
)& '
;' (
} 	
public 
List 
< 

SelectItem 
> 
	RolesList  )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
public 
List 
< 
RoleDto 
> 
Roles "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
int 
PageSize 
{ 
get !
;! "
set# &
;& '
}( )
public 
int 

TotalCount 
{ 
get  #
;# $
set% (
;( )
}* +
} 
} €

~C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Dtos\Identity\UsersDto.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Dtos4 8
.8 9
Identity9 A
{ 
public 

class 
UsersDto 
{ 
public 
UsersDto 
( 
) 
{ 	
Users		 
=		 
new		 
List		 
<		 
UserDto		 $
>		$ %
(		% &
)		& '
;		' (
}

 	
public 
int 
PageSize 
{ 
get !
;! "
set# &
;& '
}( )
public 
int 

TotalCount 
{ 
get  #
;# $
set% (
;( )
}* +
public 
List 
< 
UserDto 
> 
Users "
{# $
get% (
;( )
set* -
;- .
}/ 0
} 
} ¢
wC:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Dtos\Log\LogDto.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Dtos4 8
.8 9
Log9 <
{ 
public 

class 
LogDto 
{ 
public 
long 
Id 
{ 
get 
; 
set !
;! "
}# $
public

 
string

 
Message

 
{

 
get

  #
;

# $
set

% (
;

( )
}

* +
public 
string 
MessageTemplate %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
string 
Level 
{ 
get !
;! "
set# &
;& '
}( )
public 
DateTimeOffset 
	TimeStamp '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
string 
	Exception 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
LogEvent 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 

Properties  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
XElement 
PropertiesXml %
=>& (
XElement) 1
.1 2
Parse2 7
(7 8

Properties8 B
)B C
;C D
} 
} ï	
xC:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Dtos\Log\LogsDto.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Dtos4 8
.8 9
Log9 <
{ 
public 

class 
LogsDto 
{ 
public 
LogsDto 
( 
) 
{ 	
Logs		 
=		 
new		 
List		 
<		 
LogDto		 "
>		" #
(		# $
)		$ %
;		% &
}

 	
public 
List 
< 
LogDto 
> 
Logs  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
int 

TotalCount 
{ 
get  #
;# $
set% (
;( )
}* +
public 
int 
PageSize 
{ 
get !
;! "
set# &
;& '
}( )
} 
} ­
˜C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\ExceptionHandling\UserFriendlyErrorPageException.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
ExceptionHandling4 E
{ 
public 

class *
UserFriendlyErrorPageException /
:0 1
	Exception2 ;
{ 
public 
string 
ErrorKey 
{  
get! $
;$ %
set& )
;) *
}+ ,
public		 *
UserFriendlyErrorPageException		 -
(		- .
string		. 4
message		5 <
)		< =
:		> ?
base		@ D
(		D E
message		E L
)		L M
{

 	
} 	
public *
UserFriendlyErrorPageException -
(- .
string. 4
message5 <
,< =
string> D
errorKeyE M
)M N
:O P
baseQ U
(U V
messageV ]
)] ^
{ 	
ErrorKey 
= 
errorKey 
;  
} 	
public *
UserFriendlyErrorPageException -
(- .
string. 4
message5 <
,< =
	Exception> G
innerExceptionH V
)V W
:X Y
baseZ ^
(^ _
message_ f
,f g
innerExceptionh v
)v w
{ 	
} 	
} 
} ×
“C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\ExceptionHandling\UserFriendlyViewException.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
ExceptionHandling4 E
{ 
public 

class %
UserFriendlyViewException *
:+ ,
	Exception- 6
{ 
public 
string 
ErrorKey 
{  
get! $
;$ %
set& )
;) *
}+ ,
public

 
object

 
Model

 
{

 
get

 !
;

! "
set

# &
;

& '
}

( )
public 
List 
< 
ViewErrorMessage $
>$ %
ErrorMessages& 3
{4 5
get6 9
;9 :
set; >
;> ?
}@ A
public %
UserFriendlyViewException (
(( )
string) /
message0 7
,7 8
string9 ?
errorKey@ H
,H I
objectJ P
modelQ V
)V W
:X Y
baseZ ^
(^ _
message_ f
)f g
{ 	
ErrorKey 
= 
errorKey 
;  
Model 
= 
model 
; 
} 	
public %
UserFriendlyViewException (
(( )
string) /
message0 7
,7 8
string9 ?
errorKey@ H
,H I
ListJ N
<N O
ViewErrorMessageO _
>_ `
errorMessagesa n
,n o
objectp v
modelw |
)| }
:~ 
base
€ „
(
„ …
message
… Œ
)
Œ 
{ 	
ErrorKey 
= 
errorKey 
;  
Model 
= 
model 
; 
ErrorMessages 
= 
errorMessages )
;) *
} 	
public %
UserFriendlyViewException (
(( )
string) /
message0 7
,7 8
string9 ?
errorKey@ H
,H I
objectJ P
modelQ V
,V W
	ExceptionX a
innerExceptionb p
)p q
:r s
baset x
(x y
message	y €
,
€ 
innerException
‚ 
)
 ‘
{ 	
ErrorKey 
= 
errorKey 
;  
Model 
= 
model 
; 
} 	
}   
}!! °
ŠC:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\ExceptionHandling\ViewErrorMessage.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
ExceptionHandling4 E
{ 
public 

class 
ViewErrorMessage !
{ 
public 
string 
ErrorKey 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
ErrorMessage "
{# $
get% (
;( )
set* -
;- .
}/ 0
} 
}		 â
C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Helpers\ComboBoxHelpers.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Helpers4 ;
{ 
public 

static 
class 
ComboBoxHelpers '
{ 
public 
static 
void  
PopulateValuesToList /
(/ 0
string0 6

jsonValues7 A
,A B
ListC G
<G H
stringH N
>N O
listP T
)T U
{		 	
if

 
(

 
string

 
.

 
IsNullOrEmpty

 $
(

$ %

jsonValues

% /
)

/ 0
)

0 1
return

2 8
;

8 9
var 

listValues 
= 
JsonConvert (
.( )
DeserializeObject) :
<: ;
List; ?
<? @
string@ F
>F G
>G H
(H I

jsonValuesI S
)S T
;T U
if 
( 

listValues 
== 
null "
)" #
return$ *
;* +
list 
. 
AddRange 
( 

listValues $
)$ %
;% &
} 	
public 
static 
void 
PopulateValue (
(( )
string) /
	jsonValue0 9
)9 :
{ 	
if 
( 
string 
. 
IsNullOrEmpty $
($ %
	jsonValue% .
). /
)/ 0
return1 7
;7 8
var 
selectedValue 
= 
JsonConvert  +
.+ ,
DeserializeObject, =
<= >
string> D
>D E
(E F
	jsonValueF O
)O P
;P Q
if 
( 
selectedValue 
==  
null! %
)% &
return' -
;- .
	jsonValue 
= 
selectedValue %
;% &
} 	
} 
} Ö
„C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Helpers\EnumerableExtensions.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Helpers4 ;
{ 
public 

static 
class  
EnumerableExtensions ,
{ 
public		 
static		 
IEnumerable		 !
<		! "
T		" #
>		# $
WhereIf		% ,
<		, -
T		- .
>		. /
(		/ 0
this		0 4
IEnumerable		5 @
<		@ A
T		A B
>		B C
query		D I
,		I J
bool		K O
	condition		P Y
,		Y Z
Func		[ _
<		_ `
T		` a
,		a b
bool		c g
>		g h
	predicate		i r
)		r s
{

 	
return 
	condition 
? 
query 
. 
Where 
( 
	predicate '
)' (
: 
query 
; 
} 	
public 
static 
IEnumerable !
<! "
T" #
># $
TakeIf% +
<+ ,
T, -
,- .
TKey/ 3
>3 4
(4 5
this5 9
IEnumerable: E
<E F
TF G
>G H
queryI N
,N O
FuncP T
<T U
TU V
,V W
TKeyX \
>\ ]
orderBy^ e
,e f
boolg k
	conditionl u
,u v
intw z
limit	{ €
,
€ 
bool
‚ †
orderByDescending
‡ ˜
=
™ š
true
› Ÿ
)
Ÿ  
{ 	
query 
= 
orderByDescending %
?& '
query( -
.- .
OrderByDescending. ?
(? @
orderBy@ G
)G H
:I J
queryK P
.P Q
OrderByQ X
(X Y
orderByY `
)` a
;a b
return 
	condition 
? 
query 
. 
Take 
( 
limit "
)" #
: 
query 
; 
} 	
} 
} ®
{C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Helpers\EnumHelpers.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Helpers4 ;
{ 
public 

class 
EnumHelpers 
{		 
public

 
static

 
List

 
<

 

SelectItem

 %
>

% &
ToSelectList

' 3
<

3 4
T

4 5
>

5 6
(

6 7
)

7 8
where

9 >
T

? @
:

A B
struct

C I
,

I J
IComparable

K V
{ 	
var 
selectItems 
= 
Enum "
." #
	GetValues# ,
(, -
typeof- 3
(3 4
T4 5
)5 6
)6 7
. 
Cast 
< 
T 
> 
( 
) 
. 
Select 
( 
x 
=> 
new  

SelectItem! +
(+ ,
Convert, 3
.3 4
ToInt164 ;
(; <
x< =
)= >
.> ?
ToString? G
(G H
)H I
,I J
xK L
.L M
ToStringM U
(U V
)V W
)W X
)X Y
.Y Z
ToListZ `
(` a
)a b
;b c
return 
selectItems 
; 
} 	
} 
} ‹"
ƒC:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Helpers\QueryableExtensions.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Helpers4 ;
{ 
public 

static 
class 
QueryableExtensions +
{ 
public		 
static		 

IQueryable		  
<		  !
T		! "
>		" #
WhereIf		$ +
<		+ ,
T		, -
>		- .
(		. /
this		/ 3

IQueryable		4 >
<		> ?
T		? @
>		@ A
query		B G
,		G H
bool		I M
	condition		N W
,		W X

Expression		Y c
<		c d
Func		d h
<		h i
T		i j
,		j k
bool		l p
>		p q
>		q r
	predicate		s |
)		| }
{

 	
return 
	condition 
? 
query 
. 
Where 
( 
	predicate '
)' (
: 
query 
; 
} 	
public 
static 

IQueryable  
<  !
T! "
>" #
TakeIf$ *
<* +
T+ ,
,, -
TKey. 2
>2 3
(3 4
this4 8

IQueryable9 C
<C D
TD E
>E F
queryG L
,L M

ExpressionN X
<X Y
FuncY ]
<] ^
T^ _
,_ `
TKeya e
>e f
>f g
orderByh o
,o p
boolq u
	conditionv 
,	 €
int
 „
limit
… Š
,
Š ‹
bool
Œ 
orderByDescending
‘ ¢
=
£ ¤
true
¥ ©
)
© ª
{ 	
query 
= 
orderByDescending %
?& '
query( -
.- .
OrderByDescending. ?
(? @
orderBy@ G
)G H
:I J
queryK P
.P Q
OrderByQ X
(X Y
orderByY `
)` a
;a b
return 
	condition 
? 
query 
. 
Take 
( 
limit "
)" #
: 
query 
; 
} 	
public 
static 

IQueryable  
<  !
T! "
>" #
PageBy$ *
<* +
T+ ,
,, -
TKey. 2
>2 3
(3 4
this4 8

IQueryable9 C
<C D
TD E
>E F
queryG L
,L M

ExpressionN X
<X Y
FuncY ]
<] ^
T^ _
,_ `
TKeya e
>e f
>f g
orderByh o
,o p
intq t
pageu y
,y z
int{ ~
pageSize	 ‡
,
‡ ˆ
bool
‰ 
orderByDescending
Ž Ÿ
=
  ¡
true
¢ ¦
)
¦ §
{ 	
if 
( 
query 
== 
null 
) 
{ 
throw 
new !
ArgumentNullException /
(/ 0
nameof0 6
(6 7
query7 <
)< =
)= >
;> ?
} 
query"" 
="" 
orderByDescending"" %
?""& '
query""( -
.""- .
OrderByDescending"". ?
(""? @
orderBy""@ G
)""G H
:""I J
query""K P
.""P Q
OrderBy""Q X
(""X Y
orderBy""Y `
)""` a
;""a b
return$$ 
query$$ 
.$$ 
Skip$$ 
($$ 
($$ 
page$$ #
-$$$ %
$num$$& '
)$$' (
*$$) *
pageSize$$+ 3
)$$3 4
.$$4 5
Take$$5 9
($$9 :
pageSize$$: B
)$$B C
;$$C D
}%% 	
}&& 
}'' ”
C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Helpers\ResourceMessage.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Helpers4 ;
{ 
public 

class 
ResourceMessage  
{ 
public 
string 
Code 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
Description !
{" #
get$ '
;' (
set) ,
;, -
}. /
} 
}		 ¬
{C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Helpers\ViewHelpers.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Helpers4 ;
{ 
public 

static 
class 
ViewHelpers #
{ 
public 
static 
string 
GetClientName *
(* +
string+ 1
clientId2 :
,: ;
string< B

clientNameC M
)M N
{ 	
return 
$" 
{ 
clientId 
} 
 ( !
{! "

clientName" ,
}, -
)- .
". /
;/ 0
} 	
}		 
}

 ïY
ˆC:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Mappers\ApiResourceMapperProfile.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Mappers4 ;
{ 
public 

class $
ApiResourceMapperProfile )
:* +
Profile, 3
{ 
public $
ApiResourceMapperProfile '
(' (
)( )
{ 	
	CreateMap 
< 
ApiResource !
,! "
ApiResourceDto# 1
>1 2
(2 3

MemberList3 =
.= >
Destination> I
)I J
. 
	ForMember 
( 
x 
=> 
x  !
.! "

UserClaims" ,
,, -
opts. 2
=>3 5
opts6 :
.: ;
MapFrom; B
(B C
srcC F
=>G I
srcJ M
.M N

UserClaimsN X
.X Y
SelectY _
(_ `
x` a
=>b d
xe f
.f g
Typeg k
)k l
)l m
)m n
;n o
	CreateMap 
< 
ApiScope 
, 
ApiScopesDto  ,
>, -
(- .

MemberList. 8
.8 9
Destination9 D
)D E
. 
	ForMember 
( 
x 
=> 
x  !
.! "

UserClaims" ,
,, -
opt. 1
=>2 4
opt5 8
.8 9
MapFrom9 @
(@ A
srcA D
=>E G
srcH K
.K L

UserClaimsL V
.V W
SelectW ]
(] ^
x^ _
=>` b
xc d
.d e
Typee i
)i j
)j k
)k l
. 
	ForMember 
( 
x 
=> 
x  !
.! "
ApiResourceId" /
,/ 0
opt1 4
=>5 7
opt8 ;
.; <
MapFrom< C
(C D
srcD G
=>H J
srcK N
.N O
ApiResourceO Z
.Z [
Id[ ]
)] ^
)^ _
. 
	ForMember 
( 
x 
=> 
x  !
.! "

ApiScopeId" ,
,, -
opt. 1
=>2 4
opt5 8
.8 9
MapFrom9 @
(@ A
srcA D
=>E G
srcH K
.K L
IdL N
)N O
)O P
;P Q
	CreateMap 
< 
ApiScope 
, 
ApiScopeDto  +
>+ ,
(, -

MemberList- 7
.7 8
Destination8 C
)C D
. 
	ForMember 
( 
x 
=> 
x  !
.! "

UserClaims" ,
,, -
opt. 1
=>2 4
opt5 8
.8 9
MapFrom9 @
(@ A
srcA D
=>E G
srcH K
.K L

UserClaimsL V
.V W
SelectW ]
(] ^
x^ _
=>` b
xc d
.d e
Typee i
)i j
)j k
)k l
;l m
	CreateMap 
< 
	ApiSecret 
,  
ApiSecretsDto! .
>. /
(/ 0

MemberList0 :
.: ;
Destination; F
)F G
. 
	ForMember 
( 
dest 
=>  "
dest# '
.' (
Type( ,
,, -
opt. 1
=>2 4
opt5 8
.8 9
	Condition9 B
(B C
srsC F
=>G I
srsJ M
!=N P
nullQ U
)U V
)V W
.   
	ForMember   
(   
x   
=>   
x    !
.  ! "
ApiSecretId  " -
,  - .
opt  / 2
=>  3 5
opt  6 9
.  9 :
MapFrom  : A
(  A B
x  B C
=>  D F
x  G H
.  H I
Id  I K
)  K L
)  L M
.!! 
	ForMember!! 
(!! 
x!! 
=>!! 
x!!  !
.!!! "
ApiResourceId!!" /
,!!/ 0
opt!!1 4
=>!!5 7
opt!!8 ;
.!!; <
MapFrom!!< C
(!!C D
x!!D E
=>!!F H
x!!I J
.!!J K
ApiResource!!K V
.!!V W
Id!!W Y
)!!Y Z
)!!Z [
;!![ \
	CreateMap## 
<## 
	ApiSecret## 
,##  
ApiSecretDto##! -
>##- .
(##. /

MemberList##/ 9
.##9 :
Destination##: E
)##E F
.$$ 
	ForMember$$ 
($$ 
dest$$ 
=>$$  "
dest$$# '
.$$' (
Type$$( ,
,$$, -
opt$$. 1
=>$$2 4
opt$$5 8
.$$8 9
	Condition$$9 B
($$B C
srs$$C F
=>$$G I
srs$$J M
!=$$N P
null$$Q U
)$$U V
)$$V W
;$$W X
	CreateMap'' 
<'' 
	PagedList'' 
<''  
ApiResource''  +
>''+ ,
,'', -
ApiResourcesDto''. =
>''= >
(''> ?

MemberList''? I
.''I J
Destination''J U
)''U V
.(( 
	ForMember(( 
((( 
x(( 
=>(( 
x((  !
.((! "
ApiResources((" .
,((. /
opt((0 3
=>((4 6
opt((7 :
.((: ;
MapFrom((; B
(((B C
src((C F
=>((G I
src((J M
.((M N
Data((N R
)((R S
)((S T
;((T U
	CreateMap** 
<** 
	PagedList** 
<**  
ApiScope**  (
>**( )
,**) *
ApiScopesDto**+ 7
>**7 8
(**8 9

MemberList**9 C
.**C D
Destination**D O
)**O P
.++ 
	ForMember++ 
(++ 
x++ 
=>++ 
x++  !
.++! "
Scopes++" (
,++( )
opt++* -
=>++. 0
opt++1 4
.++4 5
MapFrom++5 <
(++< =
src++= @
=>++A C
src++D G
.++G H
Data++H L
)++L M
)++M N
;++N O
	CreateMap-- 
<-- 
	PagedList-- 
<--  
	ApiSecret--  )
>--) *
,--* +
ApiSecretsDto--, 9
>--9 :
(--: ;

MemberList--; E
.--E F
Destination--F Q
)--Q R
... 
	ForMember.. 
(.. 
x.. 
=>.. 
x..  !
...! "

ApiSecrets.." ,
,.., -
opt... 1
=>..2 4
opt..5 8
...8 9
MapFrom..9 @
(..@ A
src..A D
=>..E G
src..H K
...K L
Data..L P
)..P Q
)..Q R
;..R S
	CreateMap11 
<11 
ApiResourceDto11 $
,11$ %
ApiResource11& 1
>111 2
(112 3

MemberList113 =
.11= >
Source11> D
)11D E
.22 
	ForMember22 
(22 
x22 
=>22 
x22  !
.22! "

UserClaims22" ,
,22, -
opts22. 2
=>223 5
opts226 :
.22: ;
MapFrom22; B
(22B C
src22C F
=>22G I
src22J M
.22M N

UserClaims22N X
.22X Y
Select22Y _
(22_ `
x22` a
=>22b d
new22e h
ApiResourceClaim22i y
{22z {
Type	22| €
=
22 ‚
x
22ƒ „
}
22… †
)
22† ‡
)
22‡ ˆ
)
22ˆ ‰
;
22‰ Š
	CreateMap44 
<44 
ApiSecretsDto44 #
,44# $
	ApiSecret44% .
>44. /
(44/ 0

MemberList440 :
.44: ;
Source44; A
)44A B
.55 
	ForMember55 
(55 
x55 
=>55 
x55  !
.55! "
ApiResource55" -
,55- .
opts55/ 3
=>554 6
opts557 ;
.55; <
MapFrom55< C
(55C D
src55D G
=>55H J
new55K N
ApiResource55O Z
(55Z [
)55[ \
{55] ^
Id55_ a
=55b c
src55d g
.55g h
ApiResourceId55h u
}55v w
)55w x
)55x y
.66 
	ForMember66 
(66 
x66 
=>66 
x66  !
.66! "
Id66" $
,66$ %
opt66& )
=>66* ,
opt66- 0
.660 1
MapFrom661 8
(668 9
src669 <
=>66= ?
src66@ C
.66C D
ApiSecretId66D O
)66O P
)66P Q
;66Q R
	CreateMap88 
<88 
ApiScopesDto88 "
,88" #
ApiScope88$ ,
>88, -
(88- .

MemberList88. 8
.888 9
Source889 ?
)88? @
.99 
	ForMember99 
(99 
x99 
=>99 
x99  !
.99! "

UserClaims99" ,
,99, -
opts99. 2
=>993 5
opts996 :
.99: ;
MapFrom99; B
(99B C
src99C F
=>99G I
src99J M
.99M N

UserClaims99N X
.99X Y
Select99Y _
(99_ `
x99` a
=>99b d
new99e h
ApiScopeClaim99i v
{99w x
Type99y }
=99~ 
x
99€ 
}
99‚ ƒ
)
99ƒ „
)
99„ …
)
99… †
.:: 
	ForMember:: 
(:: 
x:: 
=>:: 
x::  !
.::! "
Id::" $
,::$ %
opt::& )
=>::* ,
opt::- 0
.::0 1
MapFrom::1 8
(::8 9
src::9 <
=>::= ?
src::@ C
.::C D

ApiScopeId::D N
)::N O
)::O P
;::P Q
	CreateMap<< 
<<< 
ApiScopeDto<< !
,<<! "
ApiScope<<# +
><<+ ,
(<<, -

MemberList<<- 7
.<<7 8
Source<<8 >
)<<> ?
.== 
	ForMember== 
(== 
x== 
=>== 
x==  !
.==! "

UserClaims==" ,
,==, -
opts==. 2
=>==3 5
opts==6 :
.==: ;
MapFrom==; B
(==B C
src==C F
=>==G I
src==J M
.==M N

UserClaims==N X
.==X Y
Select==Y _
(==_ `
x==` a
=>==b d
new==e h
ApiScopeClaim==i v
{==w x
Type==y }
===~ 
x
==€ 
}
==‚ ƒ
)
==ƒ „
)
==„ …
)
==… †
;
==† ‡
}>> 	
}?? 
}@@ Š.
‚C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Mappers\ApiResourceMappers.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Mappers4 ;
{ 
public 

static 
class 
ApiResourceMappers *
{		 
static

 
ApiResourceMappers

 !
(

! "
)

" #
{ 	
Mapper 
= 
new 
MapperConfiguration ,
(, -
cfg- 0
=>1 3
cfg4 7
.7 8

AddProfile8 B
<B C$
ApiResourceMapperProfileC [
>[ \
(\ ]
)] ^
)^ _
. 
CreateMapper 
( 
) 
;  
} 	
internal 
static 
IMapper 
Mapper  &
{' (
get) ,
;, -
}. /
public 
static 
ApiResourceDto $
ToModel% ,
(, -
this- 1
ApiResource2 =
resource> F
)F G
{ 	
return 
resource 
== 
null #
?$ %
null& *
:+ ,
Mapper- 3
.3 4
Map4 7
<7 8
ApiResourceDto8 F
>F G
(G H
resourceH P
)P Q
;Q R
} 	
public 
static 
ApiResourcesDto %
ToModel& -
(- .
this. 2
	PagedList3 <
<< =
ApiResource= H
>H I
	resourcesJ S
)S T
{ 	
return 
	resources 
== 
null  $
?% &
null' +
:, -
Mapper. 4
.4 5
Map5 8
<8 9
ApiResourcesDto9 H
>H I
(I J
	resourcesJ S
)S T
;T U
} 	
public 
static 
ApiSecretsDto #
ToModel$ +
(+ ,
this, 0
	PagedList1 :
<: ;
	ApiSecret; D
>D E
secretsF M
)M N
{ 	
return 
secrets 
== 
null "
?# $
null% )
:* +
Mapper, 2
.2 3
Map3 6
<6 7
ApiSecretsDto7 D
>D E
(E F
secretsF M
)M N
;N O
} 	
public!! 
static!! 
ApiScopesDto!! "
ToModel!!# *
(!!* +
this!!+ /
	PagedList!!0 9
<!!9 :
ApiScope!!: B
>!!B C
scopes!!D J
)!!J K
{"" 	
return## 
scopes## 
==## 
null## !
?##" #
null##$ (
:##) *
Mapper##+ 1
.##1 2
Map##2 5
<##5 6
ApiScopesDto##6 B
>##B C
(##C D
scopes##D J
)##J K
;##K L
}$$ 	
public&& 
static&& 
ApiScopesDto&& "
ToModel&&# *
(&&* +
this&&+ /
ApiScope&&0 8
resource&&9 A
)&&A B
{'' 	
return(( 
resource(( 
==(( 
null(( #
?(($ %
null((& *
:((+ ,
Mapper((- 3
.((3 4
Map((4 7
<((7 8
ApiScopesDto((8 D
>((D E
(((E F
resource((F N
)((N O
;((O P
})) 	
public++ 
static++ 
ApiSecretsDto++ #
ToModel++$ +
(+++ ,
this++, 0
	ApiSecret++1 :
resource++; C
)++C D
{,, 	
return-- 
resource-- 
==-- 
null-- #
?--$ %
null--& *
:--+ ,
Mapper--- 3
.--3 4
Map--4 7
<--7 8
ApiSecretsDto--8 E
>--E F
(--F G
resource--G O
)--O P
;--P Q
}.. 	
public00 
static00 
ApiResource00 !
ToEntity00" *
(00* +
this00+ /
ApiResourceDto000 >
resource00? G
)00G H
{11 	
return22 
resource22 
==22 
null22 #
?22$ %
null22& *
:22+ ,
Mapper22- 3
.223 4
Map224 7
<227 8
ApiResource228 C
>22C D
(22D E
resource22E M
)22M N
;22N O
}33 	
public55 
static55 
	ApiSecret55 
ToEntity55  (
(55( )
this55) -
ApiSecretsDto55. ;
resource55< D
)55D E
{66 	
return77 
resource77 
==77 
null77 #
?77$ %
null77& *
:77+ ,
Mapper77- 3
.773 4
Map774 7
<777 8
	ApiSecret778 A
>77A B
(77B C
resource77C K
)77K L
;77L M
}88 	
public:: 
static:: 
ApiScope:: 
ToEntity:: '
(::' (
this::( ,
ApiScopesDto::- 9
resource::: B
)::B C
{;; 	
return<< 
resource<< 
==<< 
null<< #
?<<$ %
null<<& *
:<<+ ,
Mapper<<- 3
.<<3 4
Map<<4 7
<<<7 8
ApiScope<<8 @
><<@ A
(<<A B
resource<<B J
)<<J K
;<<K L
}== 	
}>> 
}?? Î‡
ƒC:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Mappers\ClientMapperProfile.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Mappers4 ;
{ 
public 

class 
ClientMapperProfile $
:% &
Profile' .
{ 
public 
ClientMapperProfile "
(" #
)# $
{ 	
	CreateMap 
< 
Client 
, 
	ClientDto '
>' (
(( )

MemberList) 3
.3 4
Destination4 ?
)? @
. 
	ForMember 
( 
dest 
=>  "
dest# '
.' (
ProtocolType( 4
,4 5
opt6 9
=>: <
opt= @
.@ A
	ConditionA J
(J K
srsK N
=>O Q
srsR U
!=V X
nullY ]
)] ^
)^ _
. 

ReverseMap 
( 
) 
; 
	CreateMap 
< 
ClientGrantType %
,% &
string' -
>- .
(. /
)/ 0
. 
ConstructUsing 
(  
src  #
=>$ &
src' *
.* +
	GrantType+ 4
)4 5
. 

ReverseMap 
( 
) 
. 
	ForMember 
( 
dest 
=>  "
dest# '
.' (
	GrantType( 1
,1 2
opt3 6
=>7 9
opt: =
.= >
MapFrom> E
(E F
srcF I
=>J L
srcM P
)P Q
)Q R
;R S
	CreateMap 
< 
ClientRedirectUri '
,' (
string) /
>/ 0
(0 1
)1 2
. 
ConstructUsing 
(  
src  #
=>$ &
src' *
.* +
RedirectUri+ 6
)6 7
. 

ReverseMap 
( 
) 
. 
	ForMember 
( 
dest 
=>  "
dest# '
.' (
RedirectUri( 3
,3 4
opt5 8
=>9 ;
opt< ?
.? @
MapFrom@ G
(G H
srcH K
=>L N
srcO R
)R S
)S T
;T U
	CreateMap   
<   '
ClientPostLogoutRedirectUri   1
,  1 2
string  3 9
>  9 :
(  : ;
)  ; <
.!! 
ConstructUsing!! 
(!!  
src!!  #
=>!!$ &
src!!' *
.!!* +!
PostLogoutRedirectUri!!+ @
)!!@ A
."" 

ReverseMap"" 
("" 
)"" 
.## 
	ForMember## 
(## 
dest## 
=>##  "
dest### '
.##' (!
PostLogoutRedirectUri##( =
,##= >
opt##? B
=>##C E
opt##F I
.##I J
MapFrom##J Q
(##Q R
src##R U
=>##V X
src##Y \
)##\ ]
)##] ^
;##^ _
	CreateMap%% 
<%% 
ClientScope%% !
,%%! "
string%%# )
>%%) *
(%%* +
)%%+ ,
.&& 
ConstructUsing&& 
(&&  
src&&  #
=>&&$ &
src&&' *
.&&* +
Scope&&+ 0
)&&0 1
.'' 

ReverseMap'' 
('' 
)'' 
.(( 
	ForMember(( 
((( 
dest(( 
=>((  "
dest((# '
.((' (
Scope((( -
,((- .
opt((/ 2
=>((3 5
opt((6 9
.((9 :
MapFrom((: A
(((A B
src((B E
=>((F H
src((I L
)((L M
)((M N
;((N O
	CreateMap** 
<** 
ClientSecret** "
,**" #
ClientSecretDto**$ 3
>**3 4
(**4 5

MemberList**5 ?
.**? @
Destination**@ K
)**K L
.++ 
	ForMember++ 
(++ 
dest++ 
=>++  "
dest++# '
.++' (
Type++( ,
,++, -
opt++. 1
=>++2 4
opt++5 8
.++8 9
	Condition++9 B
(++B C
srs++C F
=>++G I
srs++J M
!=++N P
null++Q U
)++U V
)++V W
.,, 

ReverseMap,, 
(,, 
),, 
;,, 
	CreateMap.. 
<.. 
ClientClaim.. !
,..! "
ClientClaimDto..# 1
>..1 2
(..2 3

MemberList..3 =
...= >
None..> B
)..B C
.// 
ConstructUsing// 
(//  
src//  #
=>//$ &
new//' *
ClientClaimDto//+ 9
(//9 :
)//: ;
{//< =
Type//> B
=//C D
src//E H
.//H I
Type//I M
,//M N
Value//O T
=//U V
src//W Z
.//Z [
Value//[ `
}//a b
)//b c
.00 

ReverseMap00 
(00 
)00 
;00 
	CreateMap22 
<22  
ClientIdPRestriction22 *
,22* +
string22, 2
>222 3
(223 4
)224 5
.33 
ConstructUsing33 
(33  
src33  #
=>33$ &
src33' *
.33* +
Provider33+ 3
)333 4
.44 

ReverseMap44 
(44 
)44 
.55 
	ForMember55 
(55 
dest55 
=>55  "
dest55# '
.55' (
Provider55( 0
,550 1
opt552 5
=>556 8
opt559 <
.55< =
MapFrom55= D
(55D E
src55E H
=>55I K
src55L O
)55O P
)55P Q
;55Q R
	CreateMap77 
<77 
ClientCorsOrigin77 &
,77& '
string77( .
>77. /
(77/ 0
)770 1
.88 
ConstructUsing88 
(88  
src88  #
=>88$ &
src88' *
.88* +
Origin88+ 1
)881 2
.99 

ReverseMap99 
(99 
)99 
.:: 
	ForMember:: 
(:: 
dest:: 
=>::  "
dest::# '
.::' (
Origin::( .
,::. /
opt::0 3
=>::4 6
opt::7 :
.::: ;
MapFrom::; B
(::B C
src::C F
=>::G I
src::J M
)::M N
)::N O
;::O P
	CreateMap<< 
<<< 
ClientProperty<< $
,<<$ %
ClientPropertyDto<<& 7
><<7 8
(<<8 9

MemberList<<9 C
.<<C D
Destination<<D O
)<<O P
.== 

ReverseMap== 
(== 
)== 
;== 
	CreateMap?? 
<?? 
ClientSecret?? "
,??" #
ClientSecretsDto??$ 4
>??4 5
(??5 6

MemberList??6 @
.??@ A
Destination??A L
)??L M
.@@ 
	ForMember@@ 
(@@ 
dest@@ 
=>@@  "
dest@@# '
.@@' (
Type@@( ,
,@@, -
opt@@. 1
=>@@2 4
opt@@5 8
.@@8 9
	Condition@@9 B
(@@B C
srs@@C F
=>@@G I
srs@@J M
!=@@N P
null@@Q U
)@@U V
)@@V W
.AA 
	ForMemberAA 
(AA 
xAA 
=>AA 
xAA  !
.AA! "
ClientSecretIdAA" 0
,AA0 1
optAA2 5
=>AA6 8
optAA9 <
.AA< =
MapFromAA= D
(AAD E
xAAE F
=>AAG I
xAAJ K
.AAK L
IdAAL N
)AAN O
)AAO P
.BB 
	ForMemberBB 
(BB 
xBB 
=>BB 
xBB  !
.BB! "
ClientIdBB" *
,BB* +
optBB, /
=>BB0 2
optBB3 6
.BB6 7
MapFromBB7 >
(BB> ?
xBB? @
=>BBA C
xBBD E
.BBE F
ClientBBF L
.BBL M
IdBBM O
)BBO P
)BBP Q
;BBQ R
	CreateMapDD 
<DD 
ClientClaimDD !
,DD! "
ClientClaimsDtoDD# 2
>DD2 3
(DD3 4

MemberListDD4 >
.DD> ?
DestinationDD? J
)DDJ K
.EE 
	ForMemberEE 
(EE 
destEE 
=>EE  "
destEE# '
.EE' (
TypeEE( ,
,EE, -
optEE. 1
=>EE2 4
optEE5 8
.EE8 9
	ConditionEE9 B
(EEB C
srsEEC F
=>EEG I
srsEEJ M
!=EEN P
nullEEQ U
)EEU V
)EEV W
.FF 
	ForMemberFF 
(FF 
xFF 
=>FF 
xFF  !
.FF! "
ClientClaimIdFF" /
,FF/ 0
optFF1 4
=>FF5 7
optFF8 ;
.FF; <
MapFromFF< C
(FFC D
xFFD E
=>FFF H
xFFI J
.FFJ K
IdFFK M
)FFM N
)FFN O
.GG 
	ForMemberGG 
(GG 
xGG 
=>GG 
xGG  !
.GG! "
ClientIdGG" *
,GG* +
optGG, /
=>GG0 2
optGG3 6
.GG6 7
MapFromGG7 >
(GG> ?
xGG? @
=>GGA C
xGGD E
.GGE F
ClientGGF L
.GGL M
IdGGM O
)GGO P
)GGP Q
;GGQ R
	CreateMapII 
<II 
ClientPropertyII $
,II$ %
ClientPropertiesDtoII& 9
>II9 :
(II: ;

MemberListII; E
.IIE F
DestinationIIF Q
)IIQ R
.JJ 
	ForMemberJJ 
(JJ 
destJJ 
=>JJ  "
destJJ# '
.JJ' (
KeyJJ( +
,JJ+ ,
optJJ- 0
=>JJ1 3
optJJ4 7
.JJ7 8
	ConditionJJ8 A
(JJA B
srsJJB E
=>JJF H
srsJJI L
!=JJM O
nullJJP T
)JJT U
)JJU V
.KK 
	ForMemberKK 
(KK 
xKK 
=>KK 
xKK  !
.KK! "
ClientPropertyIdKK" 2
,KK2 3
optKK4 7
=>KK8 :
optKK; >
.KK> ?
MapFromKK? F
(KKF G
xKKG H
=>KKI K
xKKL M
.KKM N
IdKKN P
)KKP Q
)KKQ R
.LL 
	ForMemberLL 
(LL 
xLL 
=>LL 
xLL  !
.LL! "
ClientIdLL" *
,LL* +
optLL, /
=>LL0 2
optLL3 6
.LL6 7
MapFromLL7 >
(LL> ?
xLL? @
=>LLA C
xLLD E
.LLE F
ClientLLF L
.LLL M
IdLLM O
)LLO P
)LLP Q
;LLQ R
	CreateMapOO 
<OO 
	PagedListOO 
<OO  
ClientSecretOO  ,
>OO, -
,OO- .
ClientSecretsDtoOO/ ?
>OO? @
(OO@ A

MemberListOOA K
.OOK L
DestinationOOL W
)OOW X
.PP 
	ForMemberPP 
(PP 
xPP 
=>PP 
xPP  !
.PP! "
ClientSecretsPP" /
,PP/ 0
optPP1 4
=>PP5 7
optPP8 ;
.PP; <
MapFromPP< C
(PPC D
srcPPD G
=>PPH J
srcPPK N
.PPN O
DataPPO S
)PPS T
)PPT U
;PPU V
	CreateMapRR 
<RR 
	PagedListRR 
<RR  
ClientClaimRR  +
>RR+ ,
,RR, -
ClientClaimsDtoRR. =
>RR= >
(RR> ?

MemberListRR? I
.RRI J
DestinationRRJ U
)RRU V
.SS 
	ForMemberSS 
(SS 
xSS 
=>SS 
xSS  !
.SS! "
ClientClaimsSS" .
,SS. /
optSS0 3
=>SS4 6
optSS7 :
.SS: ;
MapFromSS; B
(SSB C
srcSSC F
=>SSG I
srcSSJ M
.SSM N
DataSSN R
)SSR S
)SSS T
;SST U
	CreateMapUU 
<UU 
	PagedListUU 
<UU  
ClientPropertyUU  .
>UU. /
,UU/ 0
ClientPropertiesDtoUU1 D
>UUD E
(UUE F

MemberListUUF P
.UUP Q
DestinationUUQ \
)UU\ ]
.VV 
	ForMemberVV 
(VV 
xVV 
=>VV 
xVV  !
.VV! "
ClientPropertiesVV" 2
,VV2 3
optVV4 7
=>VV8 :
optVV; >
.VV> ?
MapFromVV? F
(VVF G
srcVVG J
=>VVK M
srcVVN Q
.VVQ R
DataVVR V
)VVV W
)VVW X
;VVX Y
	CreateMapXX 
<XX 
	PagedListXX 
<XX  
ClientXX  &
>XX& '
,XX' (

ClientsDtoXX) 3
>XX3 4
(XX4 5

MemberListXX5 ?
.XX? @
DestinationXX@ K
)XXK L
.YY 
	ForMemberYY 
(YY 
xYY 
=>YY 
xYY  !
.YY! "
ClientsYY" )
,YY) *
optYY+ .
=>YY/ 1
optYY2 5
.YY5 6
MapFromYY6 =
(YY= >
srcYY> A
=>YYB D
srcYYE H
.YYH I
DataYYI M
)YYM N
)YYN O
;YYO P
	CreateMap\\ 
<\\ 
ClientSecretsDto\\ &
,\\& '
ClientSecret\\( 4
>\\4 5
(\\5 6

MemberList\\6 @
.\\@ A
Source\\A G
)\\G H
.]] 
	ForMember]] "
(]]" #
x]]# $
=>]]% '
x]]( )
.]]) *
Client]]* 0
,]]0 1
dto]]2 5
=>]]6 8
dto]]9 <
.]]< =
MapFrom]]= D
(]]D E
src]]E H
=>]]I K
new]]L O
Client]]P V
(]]V W
)]]W X
{]]Y Z
Id]][ ]
=]]^ _
src]]` c
.]]c d
ClientId]]d l
}]]m n
)]]n o
)]]o p
.^^ 
	ForMember^^ "
(^^" #
x^^# $
=>^^% '
x^^( )
.^^) *
Id^^* ,
,^^, -
opt^^. 1
=>^^2 4
opt^^5 8
.^^8 9
MapFrom^^9 @
(^^@ A
src^^A D
=>^^E G
src^^H K
.^^K L
ClientSecretId^^L Z
)^^Z [
)^^[ \
;^^\ ]
	CreateMap`` 
<`` 
ClientClaimsDto`` %
,``% &
ClientClaim``' 2
>``2 3
(``3 4

MemberList``4 >
.``> ?
Source``? E
)``E F
.aa 
	ForMemberaa 
(aa 
xaa 
=>aa 
xaa  !
.aa! "
Clientaa" (
,aa( )
dtoaa* -
=>aa. 0
dtoaa1 4
.aa4 5
MapFromaa5 <
(aa< =
srcaa= @
=>aaA C
newaaD G
ClientaaH N
(aaN O
)aaO P
{aaQ R
IdaaS U
=aaV W
srcaaX [
.aa[ \
ClientIdaa\ d
}aae f
)aaf g
)aag h
.bb 
	ForMemberbb 
(bb 
xbb 
=>bb 
xbb  !
.bb! "
Idbb" $
,bb$ %
optbb& )
=>bb* ,
optbb- 0
.bb0 1
MapFrombb1 8
(bb8 9
srcbb9 <
=>bb= ?
srcbb@ C
.bbC D
ClientClaimIdbbD Q
)bbQ R
)bbR S
;bbS T
	CreateMapdd 
<dd 
ClientPropertiesDtodd )
,dd) *
ClientPropertydd+ 9
>dd9 :
(dd: ;

MemberListdd; E
.ddE F
SourceddF L
)ddL M
.ee 
	ForMemberee 
(ee 
xee 
=>ee 
xee  !
.ee! "
Clientee" (
,ee( )
dtoee* -
=>ee. 0
dtoee1 4
.ee4 5
MapFromee5 <
(ee< =
srcee= @
=>eeA C
neweeD G
ClienteeH N
(eeN O
)eeO P
{eeQ R
IdeeS U
=eeV W
srceeX [
.ee[ \
ClientIdee\ d
}eee f
)eef g
)eeg h
.ff 
	ForMemberff 
(ff 
xff 
=>ff 
xff  !
.ff! "
Idff" $
,ff$ %
optff& )
=>ff* ,
optff- 0
.ff0 1
MapFromff1 8
(ff8 9
srcff9 <
=>ff= ?
srcff@ C
.ffC D
ClientPropertyIdffD T
)ffT U
)ffU V
;ffV W
}gg 	
}hh 
}ii Ó1
}C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Mappers\ClientMappers.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Mappers4 ;
{ 
public 

static 
class 
ClientMappers %
{		 
static

 
ClientMappers

 
(

 
)

 
{ 	
Mapper 
= 
new 
MapperConfiguration ,
(, -
cfg- 0
=>1 3
cfg4 7
.7 8

AddProfile8 B
<B C
ClientMapperProfileC V
>V W
(W X
)X Y
)Y Z
. 
CreateMapper 
( 
) 
;  
} 	
internal 
static 
IMapper 
Mapper  &
{' (
get) ,
;, -
}. /
public 
static 
	ClientDto 
ToModel  '
(' (
this( ,
Client- 3
client4 :
): ;
{ 	
return 
Mapper 
. 
Map 
< 
	ClientDto '
>' (
(( )
client) /
)/ 0
;0 1
} 	
public 
static 
ClientSecretsDto &
ToModel' .
(. /
this/ 3
	PagedList4 =
<= >
ClientSecret> J
>J K
clientSecretL X
)X Y
{ 	
return 
Mapper 
. 
Map 
< 
ClientSecretsDto .
>. /
(/ 0
clientSecret0 <
)< =
;= >
} 	
public 
static 
ClientClaimsDto %
ToModel& -
(- .
this. 2
	PagedList3 <
<< =
ClientClaim= H
>H I
clientClaimsJ V
)V W
{ 	
return 
Mapper 
. 
Map 
< 
ClientClaimsDto -
>- .
(. /
clientClaims/ ;
); <
;< =
} 	
public!! 
static!! 

ClientsDto!!  
ToModel!!! (
(!!( )
this!!) -
	PagedList!!. 7
<!!7 8
Client!!8 >
>!!> ?
clients!!@ G
)!!G H
{"" 	
return## 
Mapper## 
.## 
Map## 
<## 

ClientsDto## (
>##( )
(##) *
clients##* 1
)##1 2
;##2 3
}$$ 	
public&& 
static&& 
ClientPropertiesDto&& )
ToModel&&* 1
(&&1 2
this&&2 6
	PagedList&&7 @
<&&@ A
ClientProperty&&A O
>&&O P
clientProperties&&Q a
)&&a b
{'' 	
return(( 
Mapper(( 
.(( 
Map(( 
<(( 
ClientPropertiesDto(( 1
>((1 2
(((2 3
clientProperties((3 C
)((C D
;((D E
})) 	
public++ 
static++ 
Client++ 
ToEntity++ %
(++% &
this++& *
	ClientDto+++ 4
client++5 ;
)++; <
{,, 	
return-- 
Mapper-- 
.-- 
Map-- 
<-- 
Client-- $
>--$ %
(--% &
client--& ,
)--, -
;--- .
}.. 	
public00 
static00 
ClientSecretsDto00 &
ToModel00' .
(00. /
this00/ 3
ClientSecret004 @
clientSecret00A M
)00M N
{11 	
return22 
Mapper22 
.22 
Map22 
<22 
ClientSecretsDto22 .
>22. /
(22/ 0
clientSecret220 <
)22< =
;22= >
}33 	
public55 
static55 
ClientSecret55 "
ToEntity55# +
(55+ ,
this55, 0
ClientSecretsDto551 A
clientSecret55B N
)55N O
{66 	
return77 
Mapper77 
.77 
Map77 
<77 
ClientSecret77 *
>77* +
(77+ ,
clientSecret77, 8
)778 9
;779 :
}88 	
public:: 
static:: 
ClientClaimsDto:: %
ToModel::& -
(::- .
this::. 2
ClientClaim::3 >
clientClaim::? J
)::J K
{;; 	
return<< 
Mapper<< 
.<< 
Map<< 
<<< 
ClientClaimsDto<< -
><<- .
(<<. /
clientClaim<</ :
)<<: ;
;<<; <
}== 	
public?? 
static?? 
ClientPropertiesDto?? )
ToModel??* 1
(??1 2
this??2 6
ClientProperty??7 E
clientProperty??F T
)??T U
{@@ 	
returnAA 
MapperAA 
.AA 
MapAA 
<AA 
ClientPropertiesDtoAA 1
>AA1 2
(AA2 3
clientPropertyAA3 A
)AAA B
;AAB C
}BB 	
publicDD 
staticDD 
ClientClaimDD !
ToEntityDD" *
(DD* +
thisDD+ /
ClientClaimsDtoDD0 ?
clientClaimDD@ K
)DDK L
{EE 	
returnFF 
MapperFF 
.FF 
MapFF 
<FF 
ClientClaimFF )
>FF) *
(FF* +
clientClaimFF+ 6
)FF6 7
;FF7 8
}GG 	
publicII 
staticII 
ClientPropertyII $
ToEntityII% -
(II- .
thisII. 2
ClientPropertiesDtoII3 F
clientPropertiesIIG W
)IIW X
{JJ 	
returnKK 
MapperKK 
.KK 
MapKK 
<KK 
ClientPropertyKK ,
>KK, -
(KK- .
clientPropertiesKK. >
)KK> ?
;KK? @
}LL 	
}MM 
}NN ÜR
…C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Mappers\IdentityMapperProfile.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Mappers4 ;
{ 
public 

class !
IdentityMapperProfile &
:' (
Profile) 0
{ 
public !
IdentityMapperProfile $
($ %
)% &
{ 	
	CreateMap 
< 
UserIdentity "
," #
UserDto$ +
>+ ,
(, -

MemberList- 7
.7 8
Destination8 C
)C D
;D E
	CreateMap 
< 
UserLoginInfo #
,# $
UserProviderDto% 4
>4 5
(5 6

MemberList6 @
.@ A
DestinationA L
)L M
;M N
	CreateMap 
< 
IdentityError #
,# $
ViewErrorMessage% 5
>5 6
(6 7

MemberList7 A
.A B
DestinationB M
)M N
. 
	ForMember 
( 
x 
=> 
x  !
.! "
ErrorKey" *
,* +
opt, /
=>0 2
opt3 6
.6 7
MapFrom7 >
(> ?
src? B
=>C E
srcF I
.I J
CodeJ N
)N O
)O P
. 
	ForMember 
( 
x 
=> 
x  !
.! "
ErrorMessage" .
,. /
opt0 3
=>4 6
opt7 :
.: ;
MapFrom; B
(B C
srcC F
=>G I
srcJ M
.M N
DescriptionN Y
)Y Z
)Z [
;[ \
	CreateMap 
< 
UserIdentityRole &
,& '
RoleDto( /
>/ 0
(0 1

MemberList1 ;
.; <
Destination< G
)G H
;H I
	CreateMap   
<   
UserIdentity   "
,  " #
UserIdentity  $ 0
>  0 1
(  1 2

MemberList  2 <
.  < =
Destination  = H
)  H I
.!! 
	ForMember!! 
(!! 
x!! 
=>!! 
x!!  !
.!!! "
SecurityStamp!!" /
,!!/ 0
opt!!1 4
=>!!5 7
opt!!8 ;
.!!; <
Ignore!!< B
(!!B C
)!!C D
)!!D E
;!!E F
	CreateMap## 
<## 
	PagedList## 
<##  
UserIdentity##  ,
>##, -
,##- .
UsersDto##/ 7
>##7 8
(##8 9

MemberList##9 C
.##C D
Destination##D O
)##O P
.$$ 
	ForMember$$ 
($$ 
x$$ 
=>$$ 
x$$  !
.$$! "
Users$$" '
,$$' (
opt%% 
=>%% 
opt%% 
.%% 
MapFrom%% &
(%%& '
src%%' *
=>%%+ -
src%%. 1
.%%1 2
Data%%2 6
)%%6 7
)%%7 8
;%%8 9
	CreateMap'' 
<'' !
UserIdentityUserClaim'' +
,''+ ,
UserClaimDto''- 9
>''9 :
('': ;

MemberList''; E
.''E F
Destination''F Q
)''Q R
.(( 
	ForMember(( 
((( 
x(( 
=>(( 
x((  !
.((! "
ClaimId((" )
,(() *
opt((+ .
=>((/ 1
opt((2 5
.((5 6
MapFrom((6 =
(((= >
src((> A
=>((B D
src((E H
.((H I
Id((I K
)((K L
)((L M
;((M N
	CreateMap** 
<** !
UserIdentityUserClaim** +
,**+ ,
UserClaimsDto**- :
>**: ;
(**; <

MemberList**< F
.**F G
Destination**G R
)**R S
.++ 
	ForMember++ 
(++ 
x++ 
=>++ 
x++  !
.++! "
ClaimId++" )
,++) *
opt+++ .
=>++/ 1
opt++2 5
.++5 6
MapFrom++6 =
(++= >
src++> A
=>++B D
src++E H
.++H I
Id++I K
)++K L
)++L M
;++M N
	CreateMap-- 
<-- 
	PagedList-- 
<--  
UserIdentityRole--  0
>--0 1
,--1 2
RolesDto--3 ;
>--; <
(--< =

MemberList--= G
.--G H
Destination--H S
)--S T
... 
	ForMember.. 
(.. 
x.. 
=>.. 
x..  !
...! "
Roles.." '
,..' (
opt// 
=>// 
opt// 
.// 
MapFrom// &
(//& '
src//' *
=>//+ -
src//. 1
.//1 2
Data//2 6
)//6 7
)//7 8
;//8 9
	CreateMap11 
<11 
	PagedList11 
<11  
UserIdentityRole11  0
>110 1
,111 2
UserRolesDto113 ?
>11? @
(11@ A

MemberList11A K
.11K L
Destination11L W
)11W X
.22 
	ForMember22 
(22 
x22 
=>22 
x22  !
.22! "
Roles22" '
,22' (
opt33 
=>33 
opt33 
.33 
MapFrom33 &
(33& '
src33' *
=>33+ -
src33. 1
.331 2
Data332 6
)336 7
)337 8
;338 9
	CreateMap55 
<55 
	PagedList55 
<55  !
UserIdentityUserClaim55  5
>555 6
,556 7
UserClaimsDto558 E
>55E F
(55F G

MemberList55G Q
.55Q R
Destination55R ]
)55] ^
.66 
	ForMember66 
(66 
x66 
=>66 
x66  !
.66! "
Claims66" (
,66( )
opt77 
=>77 
opt77 
.77 
MapFrom77 &
(77& '
src77' *
=>77+ -
src77. 1
.771 2
Data772 6
)776 7
)777 8
;778 9
	CreateMap99 
<99 
	PagedList99 
<99  !
UserIdentityRoleClaim99  5
>995 6
,996 7
RoleClaimsDto998 E
>99E F
(99F G

MemberList99G Q
.99Q R
Destination99R ]
)99] ^
.:: 
	ForMember:: 
(:: 
x:: 
=>:: 
x::  !
.::! "
Claims::" (
,::( )
opt;; 
=>;; 
opt;; 
.;; 
MapFrom;; &
(;;& '
src;;' *
=>;;+ -
src;;. 1
.;;1 2
Data;;2 6
);;6 7
);;7 8
;;;8 9
	CreateMap== 
<== 
List== 
<== 
UserLoginInfo== (
>==( )
,==) *
UserProvidersDto==+ ;
>==; <
(==< =

MemberList=== G
.==G H
Destination==H S
)==S T
.>> 
	ForMember>> 
(>> 
x>> 
=>>> 
x>>  !
.>>! "
	Providers>>" +
,>>+ ,
opt>>- 0
=>>>1 3
opt>>4 7
.>>7 8
MapFrom>>8 ?
(>>? @
src>>@ C
=>>>D F
src>>G J
)>>J K
)>>K L
;>>L M
	CreateMap@@ 
<@@ !
UserIdentityRoleClaim@@ +
,@@+ ,
RoleClaimDto@@- 9
>@@9 :
(@@: ;

MemberList@@; E
.@@E F
Destination@@F Q
)@@Q R
.AA 
	ForMemberAA 
(AA 
xAA 
=>AA 
xAA  !
.AA! "
ClaimIdAA" )
,AA) *
optAA+ .
=>AA/ 1
optAA2 5
.AA5 6
MapFromAA6 =
(AA= >
srcAA> A
=>AAB D
srcAAE H
.AAH I
IdAAI K
)AAK L
)AAL M
;AAM N
	CreateMapCC 
<CC !
UserIdentityRoleClaimCC +
,CC+ ,
RoleClaimsDtoCC- :
>CC: ;
(CC; <

MemberListCC< F
.CCF G
DestinationCCG R
)CCR S
.DD 
	ForMemberDD 
(DD 
xDD 
=>DD 
xDD  !
.DD! "
ClaimIdDD" )
,DD) *
optDD+ .
=>DD/ 1
optDD2 5
.DD5 6
MapFromDD6 =
(DD= >
srcDD> A
=>DDB D
srcDDE H
.DDH I
IdDDI K
)DDK L
)DDL M
;DDM N
	CreateMapFF 
<FF !
UserIdentityUserLoginFF +
,FF+ ,
UserProviderDtoFF- <
>FF< =
(FF= >

MemberListFF> H
.FFH I
DestinationFFI T
)FFT U
;FFU V
	CreateMapII 
<II 
RoleDtoII 
,II 
UserIdentityRoleII /
>II/ 0
(II0 1

MemberListII1 ;
.II; <
SourceII< B
)IIB C
;IIC D
	CreateMapKK 
<KK 
RoleClaimsDtoKK #
,KK# $!
UserIdentityRoleClaimKK% :
>KK: ;
(KK; <

MemberListKK< F
.KKF G
SourceKKG M
)KKM N
;KKN O
	CreateMapMM 
<MM 
UserClaimsDtoMM #
,MM# $!
UserIdentityUserClaimMM% :
>MM: ;
(MM; <

MemberListMM< F
.MMF G
SourceMMG M
)MMM N
.NN 
	ForMemberNN 
(NN 
xNN 
=>NN 
xNN  !
.NN! "
IdNN" $
,NN$ %
optOO 
=>OO 
optOO 
.OO 
MapFromOO &
(OO& '
srcOO' *
=>OO+ -
srcOO. 1
.OO1 2
ClaimIdOO2 9
)OO9 :
)OO: ;
;OO; <
	CreateMapRR 
<RR 
UserDtoRR 
,RR 
UserIdentityRR +
>RR+ ,
(RR, -

MemberListRR- 7
.RR7 8
SourceRR8 >
)RR> ?
;RR? @
}SS 	
}TT 
}UU ¦G
C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Mappers\IdentityMappers.cs
	namespace		 	
MAGVA		
 
.		 
Middle		 
.		 
Security		 
.		  
Admin		  %
.		% &
BusinessLogic		& 3
.		3 4
Mappers		4 ;
{

 
public 

static 
class 
IdentityMappers '
{ 
internal 
static 
IMapper 
Mapper  &
{' (
get) ,
;, -
}. /
static 
IdentityMappers 
( 
)  
{ 	
Mapper 
= 
new 
MapperConfiguration ,
(, -
cfg- 0
=>1 3
cfg4 7
.7 8

AddProfile8 B
<B C!
IdentityMapperProfileC X
>X Y
(Y Z
)Z [
)[ \
. 
CreateMapper 
( 
) 
;  
} 	
public 
static 
UsersDto 
ToModel &
(& '
this' +
	PagedList, 5
<5 6
UserIdentity6 B
>B C
usersD I
)I J
{ 	
return 
Mapper 
. 
Map 
< 
UsersDto &
>& '
(' (
users( -
)- .
;. /
} 	
public 
static 
UserClaimsDto #
ToModel$ +
(+ ,
this, 0
	PagedList1 :
<: ;!
UserIdentityUserClaim; P
>P Q
claimsR X
)X Y
{ 	
return 
Mapper 
. 
Map 
< 
UserClaimsDto +
>+ ,
(, -
claims- 3
)3 4
;4 5
} 	
public 
static 
UserClaimsDto #
ToModel$ +
(+ ,
this, 0!
UserIdentityUserClaim1 F
claimG L
)L M
{   	
return!! 
Mapper!! 
.!! 
Map!! 
<!! 
UserClaimsDto!! +
>!!+ ,
(!!, -
claim!!- 2
)!!2 3
;!!3 4
}"" 	
public$$ 
static$$ 
RolesDto$$ 
ToModel$$ &
($$& '
this$$' +
	PagedList$$, 5
<$$5 6
UserIdentityRole$$6 F
>$$F G
roles$$H M
)$$M N
{%% 	
return&& 
Mapper&& 
.&& 
Map&& 
<&& 
RolesDto&& &
>&&& '
(&&' (
roles&&( -
)&&- .
;&&. /
}'' 	
public)) 
static)) 
UserRolesDto)) "

MapToModel))# -
())- .
this)). 2
	PagedList))3 <
<))< =
UserIdentityRole))= M
>))M N
roles))O T
)))T U
{** 	
return++ 
Mapper++ 
.++ 
Map++ 
<++ 
UserRolesDto++ *
>++* +
(+++ ,
roles++, 1
)++1 2
;++2 3
},, 	
public.. 
static.. 
UserDto.. 
ToModel.. %
(..% &
this..& *
UserIdentity..+ 7
user..8 <
)..< =
{// 	
return00 
Mapper00 
.00 
Map00 
<00 
UserDto00 %
>00% &
(00& '
user00' +
)00+ ,
;00, -
}11 	
public33 
static33 
List33 
<33 
ViewErrorMessage33 +
>33+ ,
ToModel33- 4
(334 5
this335 9
IEnumerable33: E
<33E F
IdentityError33F S
>33S T
error33U Z
)33Z [
{44 	
return55 
Mapper55 
.55 
Map55 
<55 
List55 "
<55" #
ViewErrorMessage55# 3
>553 4
>554 5
(555 6
error556 ;
)55; <
;55< =
}66 	
public88 
static88 
RoleDto88 
ToModel88 %
(88% &
this88& *
UserIdentityRole88+ ;
role88< @
)88@ A
{99 	
return:: 
Mapper:: 
.:: 
Map:: 
<:: 
RoleDto:: %
>::% &
(::& '
role::' +
)::+ ,
;::, -
};; 	
public== 
static== 
UserProviderDto== %
ToModel==& -
(==- .
this==. 2!
UserIdentityUserLogin==3 H
login==I N
)==N O
{>> 	
return?? 
Mapper?? 
.?? 
Map?? 
<?? 
UserProviderDto?? -
>??- .
(??. /
login??/ 4
)??4 5
;??5 6
}@@ 	
publicBB 
staticBB 
UserProvidersDtoBB &
ToModelBB' .
(BB. /
thisBB/ 3
ListBB4 8
<BB8 9
UserLoginInfoBB9 F
>BBF G
loginBBH M
)BBM N
{CC 	
returnDD 
MapperDD 
.DD 
MapDD 
<DD 
UserProvidersDtoDD .
>DD. /
(DD/ 0
loginDD0 5
)DD5 6
;DD6 7
}EE 	
publicGG 
staticGG 
RoleClaimsDtoGG #
ToModelGG$ +
(GG+ ,
thisGG, 0!
UserIdentityRoleClaimGG1 F
	roleClaimGGG P
)GGP Q
{HH 	
returnII 
MapperII 
.II 
MapII 
<II 
RoleClaimsDtoII +
>II+ ,
(II, -
	roleClaimII- 6
)II6 7
;II7 8
}JJ 	
publicLL 
staticLL 
ListLL 
<LL 
RoleDtoLL "
>LL" #
ToModelLL$ +
(LL+ ,
thisLL, 0
ListLL1 5
<LL5 6
UserIdentityRoleLL6 F
>LLF G
rolesLLH M
)LLM N
{MM 	
returnNN 
MapperNN 
.NN 
MapNN 
<NN 
ListNN "
<NN" #
RoleDtoNN# *
>NN* +
>NN+ ,
(NN, -
rolesNN- 2
)NN2 3
;NN3 4
}OO 	
publicQQ 
staticQQ 
RoleClaimsDtoQQ #
ToModelQQ$ +
(QQ+ ,
thisQQ, 0
	PagedListQQ1 :
<QQ: ;!
UserIdentityRoleClaimQQ; P
>QQP Q
	roleClaimQQR [
)QQ[ \
{RR 	
returnSS 
MapperSS 
.SS 
MapSS 
<SS 
RoleClaimsDtoSS +
>SS+ ,
(SS, -
	roleClaimSS- 6
)SS6 7
;SS7 8
}TT 	
publicVV 
staticVV !
UserIdentityUserClaimVV +
ToEntityVV, 4
(VV4 5
thisVV5 9
UserClaimsDtoVV: G
claimVVH M
)VVM N
{WW 	
returnXX 
MapperXX 
.XX 
MapXX 
<XX !
UserIdentityUserClaimXX 3
>XX3 4
(XX4 5
claimXX5 :
)XX: ;
;XX; <
}YY 	
public[[ 
static[[ 
UserIdentity[[ "
ToEntity[[# +
([[+ ,
this[[, 0
UserDto[[1 8
user[[9 =
)[[= >
{\\ 	
return]] 
Mapper]] 
.]] 
Map]] 
<]] 
UserIdentity]] *
>]]* +
(]]+ ,
user]], 0
)]]0 1
;]]1 2
}^^ 	
public`` 
static`` !
UserIdentityRoleClaim`` +
ToEntity``, 4
(``4 5
this``5 9
RoleClaimsDto``: G
	roleClaim``H Q
)``Q R
{aa 	
returnbb 
Mapperbb 
.bb 
Mapbb 
<bb !
UserIdentityRoleClaimbb 3
>bb3 4
(bb4 5
	roleClaimbb5 >
)bb> ?
;bb? @
}cc 	
publicee 
staticee 
UserIdentityRoleee &
ToEntityee' /
(ee/ 0
thisee0 4
RoleDtoee5 <
roleee= A
)eeA B
{ff 	
returngg 
Mappergg 
.gg 
Mapgg 
<gg 
UserIdentityRolegg .
>gg. /
(gg/ 0
rolegg0 4
)gg4 5
;gg5 6
}hh 	
publicjj 
staticjj 
UserIdentityjj "
MapTojj# (
(jj( )
thisjj) -
UserIdentityjj. :
userjj; ?
,jj? @
UserIdentityjjA M
newUserjjN U
)jjU V
{kk 	
returnll 
Mapperll 
.ll 
Mapll 
(ll 
newUserll %
,ll% &
userll' +
)ll+ ,
;ll, -
}mm 	
}nn 
}oo ò
C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Mappers\IdentityResourceMapperProfile.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Mappers4 ;
{ 
public 

class )
IdentityResourceMapperProfile .
:/ 0
Profile1 8
{ 
public )
IdentityResourceMapperProfile ,
(, -
)- .
{ 	
	CreateMap 
< 
IdentityResource &
,& '
IdentityResourceDto( ;
>; <
(< =

MemberList= G
.G H
DestinationH S
)S T
. 
	ForMember 
( 
x 
=> 
x  !
.! "

UserClaims" ,
,, -
opt. 1
=>2 4
opt5 8
.8 9
MapFrom9 @
(@ A
srcA D
=>E G
srcH K
.K L

UserClaimsL V
.V W
SelectW ]
(] ^
x^ _
=>` b
xc d
.d e
Typee i
)i j
)j k
)k l
;l m
	CreateMap 
< 
	PagedList 
<  
IdentityResource  0
>0 1
,1 2 
IdentityResourcesDto3 G
>G H
(H I

MemberListI S
.S T
DestinationT _
)_ `
. 
	ForMember 
( 
x 
=> 
x  !
.! "
IdentityResources" 3
,3 4
opt 
=> 
opt 
. 
MapFrom &
(& '
src' *
=>+ -
src. 1
.1 2
Data2 6
)6 7
)7 8
;8 9
	CreateMap 
< 
IdentityResourceDto )
,) *
IdentityResource+ ;
>; <
(< =

MemberList= G
.G H
SourceH N
)N O
. 
	ForMember 
( 
x 
=> 
x  !
.! "

UserClaims" ,
,, -
opts. 2
=>3 5
opts6 :
.: ;
MapFrom; B
(B C
srcC F
=>G I
srcJ M
.M N

UserClaimsN X
.X Y
SelectY _
(_ `
x` a
=>b d
newe h
IdentityClaimi v
{w x
Typey }
=~ 
x
€ 
}
‚ ƒ
)
ƒ „
)
„ …
)
… †
;
† ‡
} 	
} 
} ¾ 
‡C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Mappers\IdentityResourceMappers.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Mappers4 ;
{ 
public		 

static		 
class		 #
IdentityResourceMappers		 /
{

 
static #
IdentityResourceMappers &
(& '
)' (
{ 	
Mapper 
= 
new 
MapperConfiguration ,
(, -
cfg- 0
=>1 3
cfg4 7
.7 8

AddProfile8 B
<B C)
IdentityResourceMapperProfileC `
>` a
(a b
)b c
)c d
. 
CreateMapper 
( 
) 
;  
} 	
internal 
static 
IMapper 
Mapper  &
{' (
get) ,
;, -
}. /
public 
static 
IdentityResourceDto )
ToModel* 1
(1 2
this2 6
IdentityResource7 G
resourceH P
)P Q
{ 	
return 
resource 
== 
null #
?$ %
null& *
:+ ,
Mapper- 3
.3 4
Map4 7
<7 8
IdentityResourceDto8 K
>K L
(L M
resourceM U
)U V
;V W
} 	
public 
static  
IdentityResourcesDto *
ToModel+ 2
(2 3
this3 7
	PagedList8 A
<A B
IdentityResourceB R
>R S
resourceT \
)\ ]
{ 	
return 
resource 
== 
null #
?$ %
null& *
:+ ,
Mapper- 3
.3 4
Map4 7
<7 8 
IdentityResourcesDto8 L
>L M
(M N
resourceN V
)V W
;W X
} 	
public 
static 
List 
< 
IdentityResourceDto .
>. /
ToModel0 7
(7 8
this8 <
List= A
<A B
IdentityResourceB R
>R S
resourceT \
)\ ]
{ 	
return   
resource   
==   
null   #
?  $ %
null  & *
:  + ,
Mapper  - 3
.  3 4
Map  4 7
<  7 8
List  8 <
<  < =
IdentityResourceDto  = P
>  P Q
>  Q R
(  R S
resource  S [
)  [ \
;  \ ]
}!! 	
public## 
static## 
IdentityResource## &
ToEntity##' /
(##/ 0
this##0 4
IdentityResourceDto##5 H
resource##I Q
)##Q R
{$$ 	
return%% 
resource%% 
==%% 
null%% #
?%%$ %
null%%& *
:%%+ ,
Mapper%%- 3
.%%3 4
Map%%4 7
<%%7 8
IdentityResource%%8 H
>%%H I
(%%I J
resource%%J R
)%%R S
;%%S T
}&& 	
public(( 
static(( 
List(( 
<(( 
IdentityResource(( +
>((+ ,
ToEntity((- 5
(((5 6
this((6 :
List((; ?
<((? @
IdentityResourceDto((@ S
>((S T
resource((U ]
)((] ^
{)) 	
return** 
resource** 
==** 
null** #
?**$ %
null**& *
:**+ ,
Mapper**- 3
.**3 4
Map**4 7
<**7 8
List**8 <
<**< =
IdentityResource**= M
>**M N
>**N O
(**O P
resource**P X
)**X Y
;**Y Z
}++ 	
},, 
}-- ‚
€C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Mappers\LogMapperProfile.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Mappers4 ;
{ 
public 

class 
LogMapperProfile !
:" #
Profile$ +
{		 
public

 
LogMapperProfile

 
(

  
)

  !
{ 	
	CreateMap 
< 
Log 
, 
LogDto !
>! "
(" #

MemberList# -
.- .
Destination. 9
)9 :
. 

ReverseMap 
( 
) 
; 
	CreateMap 
< 
	PagedList 
<  
Log  #
># $
,$ %
LogsDto& -
>- .
(. /

MemberList/ 9
.9 :
Destination: E
)E F
. 
	ForMember 
( 
x 
=> 
x  !
.! "
Logs" &
,& '
opt( +
=>, .
opt/ 2
.2 3
MapFrom3 :
(: ;
src; >
=>? A
srcB E
.E F
DataF J
)J K
)K L
;L M
} 	
} 
} þ
zC:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Mappers\LogMappers.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Mappers4 ;
{ 
public 

static 
class 

LogMappers "
{		 
internal

 
static

 
IMapper

 
Mapper

  &
{

' (
get

) ,
;

, -
}

. /
static 

LogMappers 
( 
) 
{ 	
Mapper 
= 
new 
MapperConfiguration ,
(, -
cfg- 0
=>1 3
cfg4 7
.7 8

AddProfile8 B
<B C
LogMapperProfileC S
>S T
(T U
)U V
)V W
. 
CreateMapper 
( 
) 
;  
} 	
public 
static 
LogDto 
ToModel $
($ %
this% )
Log* -
log. 1
)1 2
{ 	
return 
Mapper 
. 
Map 
< 
LogDto $
>$ %
(% &
log& )
)) *
;* +
} 	
public 
static 
LogsDto 
ToModel %
(% &
this& *
	PagedList+ 4
<4 5
Log5 8
>8 9
logs: >
)> ?
{ 	
return 
Mapper 
. 
Map 
< 
LogsDto %
>% &
(& '
logs' +
)+ ,
;, -
} 	
public 
static 
Log 
ToEntity "
(" #
this# '
LogDto( .
log/ 2
)2 3
{ 	
return 
Mapper 
. 
Map 
< 
Log !
>! "
(" #
log# &
)& '
;' (
} 	
}   
}!! ì
‹C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Mappers\PersistedGrantMapperProfile.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Mappers4 ;
{ 
public		 

class		 '
PersistedGrantMapperProfile		 ,
:		- .
Profile		/ 6
{

 
public '
PersistedGrantMapperProfile *
(* +
)+ ,
{ 	
	CreateMap 
< 
PersistedGrant $
,$ %
PersistedGrantDto& 7
>7 8
(8 9

MemberList9 C
.C D
DestinationD O
)O P
. 

ReverseMap 
( 
) 
; 
	CreateMap 
< "
PersistedGrantDataView ,
,, -
PersistedGrantDto. ?
>? @
(@ A

MemberListA K
.K L
DestinationL W
)W X
;X Y
	CreateMap 
< 
	PagedList 
<  "
PersistedGrantDataView  6
>6 7
,7 8
PersistedGrantsDto9 K
>K L
(L M

MemberListM W
.W X
DestinationX c
)c d
. 
	ForMember 
( 
x 
=> 
x  !
.! "
PersistedGrants" 1
,1 2
opt 
=> 
opt 
. 
MapFrom &
(& '
src' *
=>+ -
src. 1
.1 2
Data2 6
)6 7
)7 8
;8 9
	CreateMap 
< 
	PagedList 
<  
PersistedGrant  .
>. /
,/ 0
PersistedGrantsDto1 C
>C D
(D E

MemberListE O
.O P
DestinationP [
)[ \
. 
	ForMember 
( 
x 
=> 
x  !
.! "
PersistedGrants" 1
,1 2
opt 
=> 
opt 
. 
MapFrom &
(& '
src' *
=>+ -
src. 1
.1 2
Data2 6
)6 7
)7 8
;8 9
} 	
} 
} Ï
…C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Mappers\PersistedGrantMappers.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Mappers4 ;
{ 
public 

static 
class !
PersistedGrantMappers -
{		 
static

 !
PersistedGrantMappers

 $
(

$ %
)

% &
{ 	
Mapper 
= 
new 
MapperConfiguration ,
(, -
cfg- 0
=>1 3
cfg4 7
.7 8

AddProfile8 B
<B C'
PersistedGrantMapperProfileC ^
>^ _
(_ `
)` a
)a b
. 
CreateMapper 
( 
) 
;  
} 	
internal 
static 
IMapper 
Mapper  &
{' (
get) ,
;, -
}. /
public 
static 
PersistedGrantsDto (
ToModel) 0
(0 1
this1 5
	PagedList6 ?
<? @"
PersistedGrantDataView@ V
>V W
grantX ]
)] ^
{ 	
return 
grant 
== 
null  
?! "
null# '
:( )
Mapper* 0
.0 1
Map1 4
<4 5
PersistedGrantsDto5 G
>G H
(H I
grantI N
)N O
;O P
} 	
public 
static 
PersistedGrantsDto (
ToModel) 0
(0 1
this1 5
	PagedList6 ?
<? @
global@ F
::F H
IdentityServer4H W
.W X
EntityFrameworkX g
.g h
Entitiesh p
.p q
PersistedGrantq 
>	 €
grant
 †
)
† ‡
{ 	
return 
grant 
== 
null  
?! "
null# '
:( )
Mapper* 0
.0 1
Map1 4
<4 5
PersistedGrantsDto5 G
>G H
(H I
grantI N
)N O
;O P
} 	
public 
static 
PersistedGrantDto '
ToModel( /
(/ 0
this0 4
global5 ;
::; =
IdentityServer4= L
.L M
EntityFrameworkM \
.\ ]
Entities] e
.e f
PersistedGrantf t
grantu z
)z {
{ 	
return 
grant 
== 
null  
?! "
null# '
:( )
Mapper* 0
.0 1
Map1 4
<4 5
PersistedGrantDto5 F
>F G
(G H
grantH M
)M N
;N O
} 	
}   
}!! ¥Î
ŠC:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Repositories\ApiResourceRepository.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Repositories4 @
{ 
public 

class !
ApiResourceRepository &
:' ("
IApiResourceRepository) ?
{ 
private 
readonly 
AdminDbContext '

_dbContext( 2
;2 3
public 
bool 
AutoSaveChanges #
{$ %
get& )
;) *
set+ .
;. /
}0 1
=2 3
true4 8
;8 9
public !
ApiResourceRepository $
($ %
AdminDbContext% 3
	dbContext4 =
)= >
{ 	

_dbContext 
= 
	dbContext "
;" #
} 	
public 
async 
Task 
< 
	PagedList #
<# $
ApiResource$ /
>/ 0
>0 1 
GetApiResourcesAsync2 F
(F G
stringG M
searchN T
,T U
intV Y
pageZ ^
=_ `
$numa b
,b c
intd g
pageSizeh p
=q r
$nums u
)u v
{ 	
var 
	pagedList 
= 
new 
	PagedList  )
<) *
ApiResource* 5
>5 6
(6 7
)7 8
;8 9

Expression 
< 
Func 
< 
ApiResource '
,' (
bool) -
>- .
>. /
searchCondition0 ?
=@ A
xB C
=>D F
xG H
.H I
NameI M
.M N
ContainsN V
(V W
searchW ]
)] ^
;^ _
var 
apiResources 
= 
await $

_dbContext% /
./ 0
ApiResources0 <
.< =
WhereIf= D
(D E
!E F
stringF L
.L M
IsNullOrEmptyM Z
(Z [
search[ a
)a b
,b c
searchConditiond s
)s t
.t u
PageByu {
({ |
x| }
=>	~ €
x
 ‚
.
‚ ƒ
Name
ƒ ‡
,
‡ ˆ
page
‰ 
,
 Ž
pageSize
 —
)
— ˜
.
˜ ™
ToListAsync
™ ¤
(
¤ ¥
)
¥ ¦
;
¦ §
	pagedList!! 
.!! 
Data!! 
.!! 
AddRange!! #
(!!# $
apiResources!!$ 0
)!!0 1
;!!1 2
	pagedList"" 
."" 

TotalCount""  
=""! "
await""# (

_dbContext"") 3
.""3 4
ApiResources""4 @
.""@ A
WhereIf""A H
(""H I
!""I J
string""J P
.""P Q
IsNullOrEmpty""Q ^
(""^ _
search""_ e
)""e f
,""f g
searchCondition""h w
)""w x
.""x y

CountAsync	""y ƒ
(
""ƒ „
)
""„ …
;
""… †
	pagedList## 
.## 
PageSize## 
=##  
pageSize##! )
;##) *
return%% 
	pagedList%% 
;%% 
}&& 	
public(( 
Task(( 
<(( 
ApiResource(( 
>((  
GetApiResourceAsync((! 4
(((4 5
int((5 8
apiResourceId((9 F
)((F G
{)) 	
return** 

_dbContext** 
.** 
ApiResources** *
.++ 
Include++ 
(++ 
x++ 
=>++ 
x++ 
.++  

UserClaims++  *
)++* +
.,, 
Where,, 
(,, 
x,, 
=>,, 
x,, 
.,, 
Id,,  
==,,! #
apiResourceId,,$ 1
),,1 2
.--  
SingleOrDefaultAsync-- %
(--% &
)--& '
;--' (
}.. 	
public00 
async00 
Task00 
<00 
bool00 
>00 %
CanInsertApiResourceAsync00  9
(009 :
ApiResource00: E
apiResource00F Q
)00Q R
{11 	
if22 
(22 
apiResource22 
.22 
Id22 
==22 !
$num22" #
)22# $
{33 
var44 
existsWithSameName44 &
=44' (
await44) .

_dbContext44/ 9
.449 :
ApiResources44: F
.44F G
Where44G L
(44L M
x44M N
=>44O Q
x44R S
.44S T
Name44T X
==44Y [
apiResource44\ g
.44g h
Name44h l
)44l m
.44m n!
SingleOrDefaultAsync	44n ‚
(
44‚ ƒ
)
44ƒ „
;
44„ …
return55 
existsWithSameName55 )
==55* ,
null55- 1
;551 2
}66 
else77 
{88 
var99 
existsWithSameName99 &
=99' (
await99) .

_dbContext99/ 9
.999 :
ApiResources99: F
.99F G
Where99G L
(99L M
x99M N
=>99O Q
x99R S
.99S T
Name99T X
==99Y [
apiResource99\ g
.99g h
Name99h l
&&99m o
x99p q
.99q r
Id99r t
!=99u w
apiResource	99x ƒ
.
99ƒ „
Id
99„ †
)
99† ‡
.
99‡ ˆ"
SingleOrDefaultAsync
99ˆ œ
(
99œ 
)
99 ž
;
99ž Ÿ
return:: 
existsWithSameName:: )
==::* ,
null::- 1
;::1 2
};; 
}<< 	
public>> 
async>> 
Task>> 
<>> 
bool>> 
>>> "
CanInsertApiScopeAsync>>  6
(>>6 7
ApiScope>>7 ?
apiScope>>@ H
)>>H I
{?? 	
if@@ 
(@@ 
apiScope@@ 
.@@ 
Id@@ 
==@@ 
$num@@  
)@@  !
{AA 
varBB 
existsWithSameNameBB &
=BB' (
awaitBB) .

_dbContextBB/ 9
.BB9 :
	ApiScopesBB: C
.BBC D
WhereBBD I
(BBI J
xBBJ K
=>BBL N
xBBO P
.BBP Q
NameBBQ U
==BBV X
apiScopeBBY a
.BBa b
NameBBb f
)BBf g
.BBg h 
SingleOrDefaultAsyncBBh |
(BB| }
)BB} ~
;BB~ 
returnCC 
existsWithSameNameCC )
==CC* ,
nullCC- 1
;CC1 2
}DD 
elseEE 
{FF 
varGG 
existsWithSameNameGG &
=GG' (
awaitGG) .

_dbContextGG/ 9
.GG9 :
	ApiScopesGG: C
.GGC D
WhereGGD I
(GGI J
xGGJ K
=>GGL N
xGGO P
.GGP Q
NameGGQ U
==GGV X
apiScopeGGY a
.GGa b
NameGGb f
&&GGg i
xGGj k
.GGk l
IdGGl n
!=GGo q
apiScopeGGr z
.GGz {
IdGG{ }
)GG} ~
.GG~ !
SingleOrDefaultAsync	GG “
(
GG“ ”
)
GG” •
;
GG• –
returnHH 
existsWithSameNameHH )
==HH* ,
nullHH- 1
;HH1 2
}II 
}JJ 	
publicLL 
asyncLL 
TaskLL 
<LL 
intLL 
>LL 
AddApiResourceAsyncLL 2
(LL2 3
ApiResourceLL3 >
apiResourceLL? J
)LLJ K
{MM 	

_dbContextNN 
.NN 
ApiResourcesNN #
.NN# $
AddNN$ '
(NN' (
apiResourceNN( 3
)NN3 4
;NN4 5
returnPP 
awaitPP  
AutoSaveChangesAsyncPP -
(PP- .
)PP. /
;PP/ 0
}QQ 	
privateSS 
asyncSS 
TaskSS (
RemoveApiResourceClaimsAsyncSS 7
(SS7 8
ApiResourceSS8 C
identityResourceSSD T
)SST U
{TT 	
varVV 
apiResourceClaimsVV !
=VV" #
awaitVV$ )

_dbContextVV* 4
.VV4 5
ApiResourceClaimsVV5 F
.VVF G
WhereVVG L
(VVL M
xVVM N
=>VVO Q
xVVR S
.VVS T
ApiResourceVVT _
.VV_ `
IdVV` b
==VVc e
identityResourceVVf v
.VVv w
IdVVw y
)VVy z
.VVz {
ToListAsync	VV{ †
(
VV† ‡
)
VV‡ ˆ
;
VVˆ ‰

_dbContextWW 
.WW 
ApiResourceClaimsWW (
.WW( )
RemoveRangeWW) 4
(WW4 5
apiResourceClaimsWW5 F
)WWF G
;WWG H
}XX 	
publicZZ 
asyncZZ 
TaskZZ 
<ZZ 
intZZ 
>ZZ "
UpdateApiResourceAsyncZZ 5
(ZZ5 6
ApiResourceZZ6 A
apiResourceZZB M
)ZZM N
{[[ 	
await]] (
RemoveApiResourceClaimsAsync]] .
(]]. /
apiResource]]/ :
)]]: ;
;]]; <

_dbContext`` 
.`` 
ApiResources`` #
.``# $
Update``$ *
(``* +
apiResource``+ 6
)``6 7
;``7 8
returnbb 
awaitbb  
AutoSaveChangesAsyncbb -
(bb- .
)bb. /
;bb/ 0
}cc 	
publicee 
asyncee 
Taskee 
<ee 
intee 
>ee "
DeleteApiResourceAsyncee 5
(ee5 6
ApiResourceee6 A
apiResourceeeB M
)eeM N
{ff 	
vargg 
resourcegg 
=gg 
awaitgg  

_dbContextgg! +
.gg+ ,
ApiResourcesgg, 8
.gg8 9
Wheregg9 >
(gg> ?
xgg? @
=>ggA C
xggD E
.ggE F
IdggF H
==ggI K
apiResourceggL W
.ggW X
IdggX Z
)ggZ [
.gg[ \ 
SingleOrDefaultAsyncgg\ p
(ggp q
)ggq r
;ggr s

_dbContextii 
.ii 
Removeii 
(ii 
resourceii &
)ii& '
;ii' (
returnkk 
awaitkk  
AutoSaveChangesAsynckk -
(kk- .
)kk. /
;kk/ 0
}ll 	
publicnn 
asyncnn 
Tasknn 
<nn 
	PagedListnn #
<nn# $
ApiScopenn$ ,
>nn, -
>nn- .
GetApiScopesAsyncnn/ @
(nn@ A
intnnA D
apiResourceIdnnE R
,nnR S
intnnT W
pagennX \
=nn] ^
$numnn_ `
,nn` a
intnnb e
pageSizennf n
=nno p
$numnnq s
)nns t
{oo 	
varpp 
	pagedListpp 
=pp 
newpp 
	PagedListpp  )
<pp) *
ApiScopepp* 2
>pp2 3
(pp3 4
)pp4 5
;pp5 6
varrr 
	apiScopesrr 
=rr 
awaitrr !

_dbContextrr" ,
.rr, -
	ApiScopesrr- 6
.ss 
Includess 
(ss 
xss 
=>ss 
xss 
.ss  
ApiResourcess  +
)ss+ ,
.tt 
Wherett 
(tt 
xtt 
=>tt 
xtt 
.tt 
ApiResourcett )
.tt) *
Idtt* ,
==tt- /
apiResourceIdtt0 =
)tt= >
.tt> ?
PageBytt? E
(ttE F
xttF G
=>ttH J
xttK L
.ttL M
NamettM Q
,ttQ R
pagettS W
,ttW X
pageSizettY a
)tta b
.ttb c
ToListAsyncttc n
(ttn o
)tto p
;ttp q
	pagedListvv 
.vv 
Datavv 
.vv 
AddRangevv #
(vv# $
	apiScopesvv$ -
)vv- .
;vv. /
	pagedListww 
.ww 

TotalCountww  
=ww! "
awaitww# (

_dbContextww) 3
.ww3 4
	ApiScopesww4 =
.ww= >
Whereww> C
(wwC D
xwwD E
=>wwF H
xwwI J
.wwJ K
ApiResourcewwK V
.wwV W
IdwwW Y
==wwZ \
apiResourceIdww] j
)wwj k
.wwk l

CountAsyncwwl v
(wwv w
)www x
;wwx y
	pagedListxx 
.xx 
PageSizexx 
=xx  
pageSizexx! )
;xx) *
returnzz 
	pagedListzz 
;zz 
}{{ 	
public}} 
Task}} 
<}} 
ApiScope}} 
>}} 
GetApiScopeAsync}} .
(}}. /
int}}/ 2
apiResourceId}}3 @
,}}@ A
int}}B E

apiScopeId}}F P
)}}P Q
{~~ 	
return 

_dbContext 
. 
	ApiScopes '
.
€€ 
Include
€€ 
(
€€ 
x
€€ 
=>
€€ 
x
€€ 
.
€€  

UserClaims
€€  *
)
€€* +
.
 
Include
 
(
 
x
 
=>
 
x
 
.
  
ApiResource
  +
)
+ ,
.
‚‚ 
Where
‚‚ 
(
‚‚ 
x
‚‚ 
=>
‚‚ 
x
‚‚ 
.
‚‚ 
Id
‚‚  
==
‚‚! #

apiScopeId
‚‚$ .
&&
‚‚/ 1
x
‚‚2 3
.
‚‚3 4
ApiResource
‚‚4 ?
.
‚‚? @
Id
‚‚@ B
==
‚‚C E
apiResourceId
‚‚F S
)
‚‚S T
.
ƒƒ "
SingleOrDefaultAsync
ƒƒ %
(
ƒƒ% &
)
ƒƒ& '
;
ƒƒ' (
}
„„ 	
public
†† 
async
†† 
Task
†† 
<
†† 
int
†† 
>
†† 
AddApiScopeAsync
†† /
(
††/ 0
int
††0 3
apiResourceId
††4 A
,
††A B
ApiScope
††C K
apiScope
††L T
)
††T U
{
‡‡ 	
var
ˆˆ 
apiResource
ˆˆ 
=
ˆˆ 
await
ˆˆ #

_dbContext
ˆˆ$ .
.
ˆˆ. /
ApiResources
ˆˆ/ ;
.
ˆˆ; <
Where
ˆˆ< A
(
ˆˆA B
x
ˆˆB C
=>
ˆˆD F
x
ˆˆG H
.
ˆˆH I
Id
ˆˆI K
==
ˆˆL N
apiResourceId
ˆˆO \
)
ˆˆ\ ]
.
ˆˆ] ^"
SingleOrDefaultAsync
ˆˆ^ r
(
ˆˆr s
)
ˆˆs t
;
ˆˆt u
apiScope
‰‰ 
.
‰‰ 
ApiResource
‰‰  
=
‰‰! "
apiResource
‰‰# .
;
‰‰. /

_dbContext
‹‹ 
.
‹‹ 
	ApiScopes
‹‹  
.
‹‹  !
Add
‹‹! $
(
‹‹$ %
apiScope
‹‹% -
)
‹‹- .
;
‹‹. /
return
 
await
 "
AutoSaveChangesAsync
 -
(
- .
)
. /
;
/ 0
}
ŽŽ 	
private
 
async
 
Task
 '
RemoveApiScopeClaimsAsync
 4
(
4 5
ApiScope
5 =
apiScope
> F
)
F G
{
‘‘ 	
var
““ 
apiScopeClaims
““ 
=
““  
await
““! &

_dbContext
““' 1
.
““1 2
ApiScopeClaims
““2 @
.
““@ A
Where
““A F
(
““F G
x
““G H
=>
““I K
x
““L M
.
““M N
ApiScope
““N V
.
““V W
Id
““W Y
==
““Z \
apiScope
““] e
.
““e f
Id
““f h
)
““h i
.
““i j
ToListAsync
““j u
(
““u v
)
““v w
;
““w x

_dbContext
”” 
.
”” 
ApiScopeClaims
”” %
.
””% &
RemoveRange
””& 1
(
””1 2
apiScopeClaims
””2 @
)
””@ A
;
””A B
}
•• 	
public
—— 
async
—— 
Task
—— 
<
—— 
int
—— 
>
—— !
UpdateApiScopeAsync
—— 2
(
——2 3
int
——3 6
apiResourceId
——7 D
,
——D E
ApiScope
——F N
apiScope
——O W
)
——W X
{
˜˜ 	
var
™™ 
apiResource
™™ 
=
™™ 
await
™™ #

_dbContext
™™$ .
.
™™. /
ApiResources
™™/ ;
.
™™; <
Where
™™< A
(
™™A B
x
™™B C
=>
™™D F
x
™™G H
.
™™H I
Id
™™I K
==
™™L N
apiResourceId
™™O \
)
™™\ ]
.
™™] ^"
SingleOrDefaultAsync
™™^ r
(
™™r s
)
™™s t
;
™™t u
apiScope
šš 
.
šš 
ApiResource
šš  
=
šš! "
apiResource
šš# .
;
šš. /
await
 '
RemoveApiScopeClaimsAsync
 +
(
+ ,
apiScope
, 4
)
4 5
;
5 6

_dbContext
   
.
   
	ApiScopes
    
.
    !
Update
  ! '
(
  ' (
apiScope
  ( 0
)
  0 1
;
  1 2
return
¢¢ 
await
¢¢ "
AutoSaveChangesAsync
¢¢ -
(
¢¢- .
)
¢¢. /
;
¢¢/ 0
}
££ 	
public
¥¥ 
async
¥¥ 
Task
¥¥ 
<
¥¥ 
int
¥¥ 
>
¥¥ !
DeleteApiScopeAsync
¥¥ 2
(
¥¥2 3
ApiScope
¥¥3 ;
apiScope
¥¥< D
)
¥¥D E
{
¦¦ 	
var
§§ 
apiScopeToDelete
§§  
=
§§! "
await
§§# (

_dbContext
§§) 3
.
§§3 4
	ApiScopes
§§4 =
.
§§= >
Where
§§> C
(
§§C D
x
§§D E
=>
§§F H
x
§§I J
.
§§J K
Id
§§K M
==
§§N P
apiScope
§§Q Y
.
§§Y Z
Id
§§Z \
)
§§\ ]
.
§§] ^"
SingleOrDefaultAsync
§§^ r
(
§§r s
)
§§s t
;
§§t u

_dbContext
¨¨ 
.
¨¨ 
	ApiScopes
¨¨  
.
¨¨  !
Remove
¨¨! '
(
¨¨' (
apiScopeToDelete
¨¨( 8
)
¨¨8 9
;
¨¨9 :
return
ªª 
await
ªª "
AutoSaveChangesAsync
ªª -
(
ªª- .
)
ªª. /
;
ªª/ 0
}
«« 	
public
­­ 
async
­­ 
Task
­­ 
<
­­ 
	PagedList
­­ #
<
­­# $
	ApiSecret
­­$ -
>
­­- .
>
­­. / 
GetApiSecretsAsync
­­0 B
(
­­B C
int
­­C F
apiResourceId
­­G T
,
­­T U
int
­­V Y
page
­­Z ^
=
­­_ `
$num
­­a b
,
­­b c
int
­­d g
pageSize
­­h p
=
­­q r
$num
­­s u
)
­­u v
{
®® 	
var
¯¯ 
	pagedList
¯¯ 
=
¯¯ 
new
¯¯ 
	PagedList
¯¯  )
<
¯¯) *
	ApiSecret
¯¯* 3
>
¯¯3 4
(
¯¯4 5
)
¯¯5 6
;
¯¯6 7
var
°° 

apiSecrets
°° 
=
°° 
await
°° "

_dbContext
°°# -
.
°°- .

ApiSecrets
°°. 8
.
°°8 9
Where
°°9 >
(
°°> ?
x
°°? @
=>
°°A C
x
°°D E
.
°°E F
ApiResource
°°F Q
.
°°Q R
Id
°°R T
==
°°U W
apiResourceId
°°X e
)
°°e f
.
°°f g
PageBy
°°g m
(
°°m n
x
°°n o
=>
°°p r
x
°°s t
.
°°t u
Id
°°u w
,
°°w x
page
°°y }
,
°°} ~
pageSize°° ‡
)°°‡ ˆ
.°°ˆ ‰
ToListAsync°°‰ ”
(°°” •
)°°• –
;°°– —
	pagedList
²² 
.
²² 
Data
²² 
.
²² 
AddRange
²² #
(
²²# $

apiSecrets
²²$ .
)
²². /
;
²²/ 0
	pagedList
³³ 
.
³³ 

TotalCount
³³  
=
³³! "
await
³³# (

_dbContext
³³) 3
.
³³3 4

ApiSecrets
³³4 >
.
³³> ?
Where
³³? D
(
³³D E
x
³³E F
=>
³³G I
x
³³J K
.
³³K L
ApiResource
³³L W
.
³³W X
Id
³³X Z
==
³³[ ]
apiResourceId
³³^ k
)
³³k l
.
³³l m

CountAsync
³³m w
(
³³w x
)
³³x y
;
³³y z
	pagedList
´´ 
.
´´ 
PageSize
´´ 
=
´´  
pageSize
´´! )
;
´´) *
return
¶¶ 
	pagedList
¶¶ 
;
¶¶ 
}
·· 	
public
¹¹ 
Task
¹¹ 
<
¹¹ 
	ApiSecret
¹¹ 
>
¹¹ 
GetApiSecretAsync
¹¹ 0
(
¹¹0 1
int
¹¹1 4
apiSecretId
¹¹5 @
)
¹¹@ A
{
ºº 	
return
»» 

_dbContext
»» 
.
»» 

ApiSecrets
»» (
.
¼¼ 
Include
¼¼ 
(
¼¼ 
x
¼¼ 
=>
¼¼ 
x
¼¼ 
.
¼¼  
ApiResource
¼¼  +
)
¼¼+ ,
.
½½ 
Where
½½ 
(
½½ 
x
½½ 
=>
½½ 
x
½½ 
.
½½ 
Id
½½  
==
½½! #
apiSecretId
½½$ /
)
½½/ 0
.
¾¾ "
SingleOrDefaultAsync
¾¾ %
(
¾¾% &
)
¾¾& '
;
¾¾' (
}
¿¿ 	
public
ÁÁ 
async
ÁÁ 
Task
ÁÁ 
<
ÁÁ 
int
ÁÁ 
>
ÁÁ 
AddApiSecretAsync
ÁÁ 0
(
ÁÁ0 1
int
ÁÁ1 4
apiResourceId
ÁÁ5 B
,
ÁÁB C
	ApiSecret
ÁÁD M
	apiSecret
ÁÁN W
)
ÁÁW X
{
ÂÂ 	
	apiSecret
ÃÃ 
.
ÃÃ 
ApiResource
ÃÃ !
=
ÃÃ" #
await
ÃÃ$ )

_dbContext
ÃÃ* 4
.
ÃÃ4 5
ApiResources
ÃÃ5 A
.
ÃÃA B
Where
ÃÃB G
(
ÃÃG H
x
ÃÃH I
=>
ÃÃJ L
x
ÃÃM N
.
ÃÃN O
Id
ÃÃO Q
==
ÃÃR T
apiResourceId
ÃÃU b
)
ÃÃb c
.
ÃÃc d"
SingleOrDefaultAsync
ÃÃd x
(
ÃÃx y
)
ÃÃy z
;
ÃÃz {
await
ÄÄ 

_dbContext
ÄÄ 
.
ÄÄ 

ApiSecrets
ÄÄ '
.
ÄÄ' (
AddAsync
ÄÄ( 0
(
ÄÄ0 1
	apiSecret
ÄÄ1 :
)
ÄÄ: ;
;
ÄÄ; <
return
ÆÆ 
await
ÆÆ "
AutoSaveChangesAsync
ÆÆ -
(
ÆÆ- .
)
ÆÆ. /
;
ÆÆ/ 0
}
ÇÇ 	
public
ÉÉ 
async
ÉÉ 
Task
ÉÉ 
<
ÉÉ 
int
ÉÉ 
>
ÉÉ "
DeleteApiSecretAsync
ÉÉ 3
(
ÉÉ3 4
	ApiSecret
ÉÉ4 =
	apiSecret
ÉÉ> G
)
ÉÉG H
{
ÊÊ 	
var
ËË 
apiSecretToDelete
ËË !
=
ËË" #
await
ËË$ )

_dbContext
ËË* 4
.
ËË4 5

ApiSecrets
ËË5 ?
.
ËË? @
Where
ËË@ E
(
ËËE F
x
ËËF G
=>
ËËH J
x
ËËK L
.
ËËL M
Id
ËËM O
==
ËËP R
	apiSecret
ËËS \
.
ËË\ ]
Id
ËË] _
)
ËË_ `
.
ËË` a"
SingleOrDefaultAsync
ËËa u
(
ËËu v
)
ËËv w
;
ËËw x

_dbContext
ÌÌ 
.
ÌÌ 

ApiSecrets
ÌÌ !
.
ÌÌ! "
Remove
ÌÌ" (
(
ÌÌ( )
apiSecretToDelete
ÌÌ) :
)
ÌÌ: ;
;
ÌÌ; <
return
ÎÎ 
await
ÎÎ "
AutoSaveChangesAsync
ÎÎ -
(
ÎÎ- .
)
ÎÎ. /
;
ÎÎ/ 0
}
ÏÏ 	
private
ÑÑ 
async
ÑÑ 
Task
ÑÑ 
<
ÑÑ 
int
ÑÑ 
>
ÑÑ "
AutoSaveChangesAsync
ÑÑ  4
(
ÑÑ4 5
)
ÑÑ5 6
{
ÒÒ 	
return
ÓÓ 
AutoSaveChanges
ÓÓ "
?
ÓÓ# $
await
ÓÓ% *

_dbContext
ÓÓ+ 5
.
ÓÓ5 6
SaveChangesAsync
ÓÓ6 F
(
ÓÓF G
)
ÓÓG H
:
ÓÓI J
(
ÓÓK L
int
ÓÓL O
)
ÓÓO P
SavedStatus
ÓÓP [
.
ÓÓ[ \#
WillBeSavedExplicitly
ÓÓ\ q
;
ÓÓq r
}
ÔÔ 	
public
ÖÖ 
async
ÖÖ 
Task
ÖÖ 
<
ÖÖ 
int
ÖÖ 
>
ÖÖ !
SaveAllChangesAsync
ÖÖ 2
(
ÖÖ2 3
)
ÖÖ3 4
{
×× 	
return
ØØ 
await
ØØ 

_dbContext
ØØ #
.
ØØ# $
SaveChangesAsync
ØØ$ 4
(
ØØ4 5
)
ØØ5 6
;
ØØ6 7
}
ÙÙ 	
public
ÛÛ 
async
ÛÛ 
Task
ÛÛ 
<
ÛÛ 
string
ÛÛ  
>
ÛÛ  !%
GetApiResourceNameAsync
ÛÛ" 9
(
ÛÛ9 :
int
ÛÛ: =
apiResourceId
ÛÛ> K
)
ÛÛK L
{
ÜÜ 	
var
ÝÝ 
apiResourceName
ÝÝ 
=
ÝÝ  !
await
ÝÝ" '

_dbContext
ÝÝ( 2
.
ÝÝ2 3
ApiResources
ÝÝ3 ?
.
ÝÝ? @
Where
ÝÝ@ E
(
ÝÝE F
x
ÝÝF G
=>
ÝÝH J
x
ÝÝK L
.
ÝÝL M
Id
ÝÝM O
==
ÝÝP R
apiResourceId
ÝÝS `
)
ÝÝ` a
.
ÝÝa b
Select
ÝÝb h
(
ÝÝh i
x
ÝÝi j
=>
ÝÝk m
x
ÝÝn o
.
ÝÝo p
Name
ÝÝp t
)
ÝÝt u
.
ÝÝu v#
SingleOrDefaultAsyncÝÝv Š
(ÝÝŠ ‹
)ÝÝ‹ Œ
;ÝÝŒ 
return
ßß 
apiResourceName
ßß "
;
ßß" #
}
àà 	
}
áá 
}ââ â
…C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Repositories\ClientRepository.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Repositories4 @
{ 
public 

class 
ClientRepository !
:" #
IClientRepository$ 5
{ 
private 
readonly 
AdminDbContext '

_dbContext( 2
;2 3
public 
bool 
AutoSaveChanges #
{$ %
get& )
;) *
set+ .
;. /
}0 1
=2 3
true4 8
;8 9
public 
ClientRepository 
(  
AdminDbContext  .
	dbContext/ 8
)8 9
{ 	

_dbContext 
= 
	dbContext "
;" #
} 	
public 
Task 
< 
Client 
> 
GetClientAsync *
(* +
int+ .
clientId/ 7
)7 8
{ 	
return 

_dbContext 
. 
Clients %
. 
Include 
( 
x 
=> 
x 
.  
AllowedGrantTypes  1
)1 2
.   
Include   
(   
x   
=>   
x   
.    
RedirectUris    ,
)  , -
.!! 
Include!! 
(!! 
x!! 
=>!! 
x!! 
.!!  "
PostLogoutRedirectUris!!  6
)!!6 7
."" 
Include"" 
("" 
x"" 
=>"" 
x"" 
.""  
AllowedScopes""  -
)""- .
.## 
Include## 
(## 
x## 
=>## 
x## 
.##  
ClientSecrets##  -
)##- .
.$$ 
Include$$ 
($$ 
x$$ 
=>$$ 
x$$ 
.$$  
Claims$$  &
)$$& '
.%% 
Include%% 
(%% 
x%% 
=>%% 
x%% 
.%%  (
IdentityProviderRestrictions%%  <
)%%< =
.&& 
Include&& 
(&& 
x&& 
=>&& 
x&& 
.&&  
AllowedCorsOrigins&&  2
)&&2 3
.'' 
Include'' 
('' 
x'' 
=>'' 
x'' 
.''  

Properties''  *
)''* +
.(( 
Where(( 
((( 
x(( 
=>(( 
x(( 
.(( 
Id((  
==((! #
clientId(($ ,
)((, -
.))  
SingleOrDefaultAsync)) %
())% &
)))& '
;))' (
}** 	
public,, 
async,, 
Task,, 
<,, 
	PagedList,, #
<,,# $
Client,,$ *
>,,* +
>,,+ ,
GetClientsAsync,,- <
(,,< =
string,,= C
search,,D J
=,,K L
$str,,M O
,,,O P
int,,Q T
page,,U Y
=,,Z [
$num,,\ ]
,,,] ^
int,,_ b
pageSize,,c k
=,,l m
$num,,n p
),,p q
{-- 	
var.. 
	pagedList.. 
=.. 
new.. 
	PagedList..  )
<..) *
Client..* 0
>..0 1
(..1 2
)..2 3
;..3 4

Expression00 
<00 
Func00 
<00 
Client00 "
,00" #
bool00$ (
>00( )
>00) *
searchCondition00+ :
=00; <
x00= >
=>00? A
x00B C
.00C D
ClientId00D L
.00L M
Contains00M U
(00U V
search00V \
)00\ ]
||00^ `
x00a b
.00b c

ClientName00c m
.00m n
Contains00n v
(00v w
search00w }
)00} ~
;00~ 
var11 
clients11 
=11 
await11 

_dbContext11  *
.11* +
Clients11+ 2
.112 3
WhereIf113 :
(11: ;
!11; <
string11< B
.11B C
IsNullOrEmpty11C P
(11P Q
search11Q W
)11W X
,11X Y
searchCondition11Z i
)11i j
.11j k
PageBy11k q
(11q r
x11r s
=>11t v
x11w x
.11x y
Id11y {
,11{ |
page	11} 
,
11 ‚
pageSize
11ƒ ‹
)
11‹ Œ
.
11Œ 
ToListAsync
11 ˜
(
11˜ ™
)
11™ š
;
11š ›
	pagedList22 
.22 
Data22 
.22 
AddRange22 #
(22# $
clients22$ +
)22+ ,
;22, -
	pagedList33 
.33 

TotalCount33  
=33! "
await33# (

_dbContext33) 3
.333 4
Clients334 ;
.33; <
WhereIf33< C
(33C D
!33D E
string33E K
.33K L
IsNullOrEmpty33L Y
(33Y Z
search33Z `
)33` a
,33a b
searchCondition33c r
)33r s
.33s t

CountAsync33t ~
(33~ 
)	33 €
;
33€ 
	pagedList44 
.44 
PageSize44 
=44  
pageSize44! )
;44) *
return66 
	pagedList66 
;66 
}77 	
public99 
async99 
Task99 
<99 
List99 
<99 
string99 %
>99% &
>99& '
GetScopesAsync99( 6
(996 7
string997 =
scope99> C
,99C D
int99E H
limit99I N
=99O P
$num99Q R
)99R S
{:: 	
var;; 
identityResources;; !
=;;" #
await;;$ )

_dbContext;;* 4
.;;4 5
IdentityResources;;5 F
.<< 
WhereIf<< 
(<< 
!<< 
string<<  
.<<  !
IsNullOrEmpty<<! .
(<<. /
scope<</ 4
)<<4 5
,<<5 6
x<<7 8
=><<9 ;
x<<< =
.<<= >
Name<<> B
.<<B C
Contains<<C K
(<<K L
scope<<L Q
)<<Q R
)<<R S
.== 
TakeIf== 
(== 
x== 
=>== 
x== 
.== 
Id== !
,==! "
limit==# (
>==) *
$num==+ ,
,==, -
limit==. 3
)==3 4
.>> 
Select>> 
(>> 
x>> 
=>>> 
x>> 
.>> 
Name>> #
)>># $
.>>$ %
ToListAsync>>% 0
(>>0 1
)>>1 2
;>>2 3
var@@ 
apiResources@@ 
=@@ 
await@@ $

_dbContext@@% /
.@@/ 0
ApiResources@@0 <
.AA 
WhereIfAA 
(AA 
!AA 
stringAA  
.AA  !
IsNullOrEmptyAA! .
(AA. /
scopeAA/ 4
)AA4 5
,AA5 6
xAA7 8
=>AA9 ;
xAA< =
.AA= >
NameAA> B
.AAB C
ContainsAAC K
(AAK L
scopeAAL Q
)AAQ R
)AAR S
.BB 
TakeIfBB 
(BB 
xBB 
=>BB 
xBB 
.BB 
IdBB !
,BB! "
limitBB# (
>BB) *
$numBB+ ,
,BB, -
limitBB. 3
)BB3 4
.CC 
SelectCC 
(CC 
xCC 
=>CC 
xCC 
.CC 
NameCC #
)CC# $
.CC$ %
ToListAsyncCC% 0
(CC0 1
)CC1 2
;CC2 3
varEE 
scopesEE 
=EE 
identityResourcesEE *
.EE* +
ConcatEE+ 1
(EE1 2
apiResourcesEE2 >
)EE> ?
.EE? @
TakeIfEE@ F
(EEF G
xEEG H
=>EEI K
xEEL M
,EEM N
limitEEO T
>EEU V
$numEEW X
,EEX Y
limitEEZ _
)EE_ `
.EE` a
ToListEEa g
(EEg h
)EEh i
;EEi j
returnGG 
scopesGG 
;GG 
}HH 	
publicJJ 
ListJJ 
<JJ 
stringJJ 
>JJ 
GetGrantTypesJJ )
(JJ) *
stringJJ* 0
grantJJ1 6
,JJ6 7
intJJ8 ;
limitJJ< A
=JJB C
$numJJD E
)JJE F
{KK 	
varLL 
filteredGrantsLL 
=LL  
ClientConstsLL! -
.LL- .
GetGrantTypesLL. ;
(LL; <
)LL< =
.MM 
WhereIfMM 
(MM 
!MM 
stringMM  
.MM  !
IsNullOrWhiteSpaceMM! 3
(MM3 4
grantMM4 9
)MM9 :
,MM: ;
xMM< =
=>MM> @
xMMA B
.MMB C
ContainsMMC K
(MMK L
grantMML Q
)MMQ R
)MMR S
.NN 
TakeIfNN 
(NN 
xNN 
=>NN 
xNN 
,NN 
limitNN  %
>NN& '
$numNN( )
,NN) *
limitNN+ 0
)NN0 1
.OO 
ToListOO 
(OO 
)OO 
;OO 
returnQQ 
filteredGrantsQQ !
;QQ! "
}RR 	
publicTT 
ListTT 
<TT 

SelectItemTT 
>TT 
GetProtocolTypesTT  0
(TT0 1
)TT1 2
{UU 	
returnVV 
ClientConstsVV 
.VV  
GetProtocolTypesVV  0
(VV0 1
)VV1 2
;VV2 3
}WW 	
publicYY 
ListYY 
<YY 

SelectItemYY 
>YY 
GetSecretTypesYY  .
(YY. /
)YY/ 0
{ZZ 	
var[[ 
secrets[[ 
=[[ 
new[[ 
List[[ "
<[[" #

SelectItem[[# -
>[[- .
([[. /
)[[/ 0
;[[0 1
secrets\\ 
.\\ 
AddRange\\ 
(\\ 
ClientConsts\\ )
.\\) *
GetSecretTypes\\* 8
(\\8 9
)\\9 :
.\\: ;
Select\\; A
(\\A B
x\\B C
=>\\D F
new\\G J

SelectItem\\K U
(\\U V
x\\V W
,\\W X
x\\Y Z
)\\Z [
)\\[ \
)\\\ ]
;\\] ^
return^^ 
secrets^^ 
;^^ 
}__ 	
publicaa 
Listaa 
<aa 
stringaa 
>aa 
GetStandardClaimsaa -
(aa- .
stringaa. 4
claimaa5 :
,aa: ;
intaa< ?
limitaa@ E
=aaF G
$numaaH I
)aaI J
{bb 	
varcc 
filteredClaimscc 
=cc  
ClientConstscc! -
.cc- .
GetStandardClaimscc. ?
(cc? @
)cc@ A
.dd 
WhereIfdd 
(dd 
!dd 
stringdd  
.dd  !
IsNullOrWhiteSpacedd! 3
(dd3 4
claimdd4 9
)dd9 :
,dd: ;
xdd< =
=>dd> @
xddA B
.ddB C
ContainsddC K
(ddK L
claimddL Q
)ddQ R
)ddR S
.ee 
TakeIfee 
(ee 
xee 
=>ee 
xee 
,ee 
limitee  %
>ee& '
$numee( )
,ee) *
limitee+ 0
)ee0 1
.ff 
ToListff 
(ff 
)ff 
;ff 
returnhh 
filteredClaimshh !
;hh! "
}ii 	
publickk 
Listkk 
<kk 

SelectItemkk 
>kk 
GetAccessTokenTypeskk  3
(kk3 4
)kk4 5
{ll 	
varmm 
accessTokenTypesmm  
=mm! "
EnumHelpersmm# .
.mm. /
ToSelectListmm/ ;
<mm; <
AccessTokenTypemm< K
>mmK L
(mmL M
)mmM N
;mmN O
returnnn 
accessTokenTypesnn #
;nn# $
}oo 	
publicqq 
Listqq 
<qq 

SelectItemqq 
>qq 
GetTokenExpirationsqq  3
(qq3 4
)qq4 5
{rr 	
varss 
tokenExpirationsss  
=ss! "
EnumHelpersss# .
.ss. /
ToSelectListss/ ;
<ss; <
TokenExpirationss< K
>ssK L
(ssL M
)ssM N
;ssN O
returntt 
tokenExpirationstt #
;tt# $
}uu 	
publicww 
Listww 
<ww 

SelectItemww 
>ww 
GetTokenUsageww  -
(ww- .
)ww. /
{xx 	
varyy 

tokenUsageyy 
=yy 
EnumHelpersyy (
.yy( )
ToSelectListyy) 5
<yy5 6

TokenUsageyy6 @
>yy@ A
(yyA B
)yyB C
;yyC D
returnzz 

tokenUsagezz 
;zz 
}{{ 	
public}} 
List}} 
<}} 

SelectItem}} 
>}} 
GetHashTypes}}  ,
(}}, -
)}}- .
{~~ 	
var 
	hashTypes 
= 
EnumHelpers '
.' (
ToSelectList( 4
<4 5
HashType5 =
>= >
(> ?
)? @
;@ A
return
€€ 
	hashTypes
€€ 
;
€€ 
}
 	
public
ƒƒ 
async
ƒƒ 
Task
ƒƒ 
<
ƒƒ 
int
ƒƒ 
>
ƒƒ "
AddClientSecretAsync
ƒƒ 3
(
ƒƒ3 4
int
ƒƒ4 7
clientId
ƒƒ8 @
,
ƒƒ@ A
ClientSecret
ƒƒB N
clientSecret
ƒƒO [
)
ƒƒ[ \
{
„„ 	
var
…… 
client
…… 
=
…… 
await
…… 

_dbContext
…… )
.
……) *
Clients
……* 1
.
……1 2
Where
……2 7
(
……7 8
x
……8 9
=>
……: <
x
……= >
.
……> ?
Id
……? A
==
……B D
clientId
……E M
)
……M N
.
……N O"
SingleOrDefaultAsync
……O c
(
……c d
)
……d e
;
……e f
clientSecret
†† 
.
†† 
Client
†† 
=
††  !
client
††" (
;
††( )
await
ˆˆ 

_dbContext
ˆˆ 
.
ˆˆ 
ClientSecrets
ˆˆ *
.
ˆˆ* +
AddAsync
ˆˆ+ 3
(
ˆˆ3 4
clientSecret
ˆˆ4 @
)
ˆˆ@ A
;
ˆˆA B
return
ŠŠ 
await
ŠŠ "
AutoSaveChangesAsync
ŠŠ -
(
ŠŠ- .
)
ŠŠ. /
;
ŠŠ/ 0
}
‹‹ 	
private
 
async
 
Task
 
<
 
int
 
>
 "
AutoSaveChangesAsync
  4
(
4 5
)
5 6
{
ŽŽ 	
return
 
AutoSaveChanges
 "
?
# $
await
% *

_dbContext
+ 5
.
5 6
SaveChangesAsync
6 F
(
F G
)
G H
:
I J
(
K L
int
L O
)
O P
SavedStatus
P [
.
[ \#
WillBeSavedExplicitly
\ q
;
q r
}
 	
public
’’ 
Task
’’ 
<
’’ 
ClientProperty
’’ "
>
’’" #$
GetClientPropertyAsync
’’$ :
(
’’: ;
int
’’; >
clientPropertyId
’’? O
)
’’O P
{
““ 	
return
”” 

_dbContext
”” 
.
”” 
ClientProperties
”” .
.
•• 
Include
•• 
(
•• 
x
•• 
=>
•• 
x
•• 
.
••  
Client
••  &
)
••& '
.
–– 
Where
–– 
(
–– 
x
–– 
=>
–– 
x
–– 
.
–– 
Id
––  
==
––! #
clientPropertyId
––$ 4
)
––4 5
.
—— "
SingleOrDefaultAsync
—— %
(
——% &
)
——& '
;
——' (
}
˜˜ 	
public
šš 
async
šš 
Task
šš 
<
šš 
int
šš 
>
šš !
AddClientClaimAsync
šš 2
(
šš2 3
int
šš3 6
clientId
šš7 ?
,
šš? @
ClientClaim
ššA L
clientClaim
ššM X
)
ššX Y
{
›› 	
var
œœ 
client
œœ 
=
œœ 
await
œœ 

_dbContext
œœ )
.
œœ) *
Clients
œœ* 1
.
œœ1 2
Where
œœ2 7
(
œœ7 8
x
œœ8 9
=>
œœ: <
x
œœ= >
.
œœ> ?
Id
œœ? A
==
œœB D
clientId
œœE M
)
œœM N
.
œœN O"
SingleOrDefaultAsync
œœO c
(
œœc d
)
œœd e
;
œœe f
clientClaim
žž 
.
žž 
Client
žž 
=
žž  
client
žž! '
;
žž' (
await
ŸŸ 

_dbContext
ŸŸ 
.
ŸŸ 
ClientClaims
ŸŸ )
.
ŸŸ) *
AddAsync
ŸŸ* 2
(
ŸŸ2 3
clientClaim
ŸŸ3 >
)
ŸŸ> ?
;
ŸŸ? @
return
¡¡ 
await
¡¡ "
AutoSaveChangesAsync
¡¡ -
(
¡¡- .
)
¡¡. /
;
¡¡/ 0
}
¢¢ 	
public
¤¤ 
async
¤¤ 
Task
¤¤ 
<
¤¤ 
int
¤¤ 
>
¤¤ $
AddClientPropertyAsync
¤¤ 5
(
¤¤5 6
int
¤¤6 9
clientId
¤¤: B
,
¤¤B C
ClientProperty
¤¤D R
clientProperty
¤¤S a
)
¤¤a b
{
¥¥ 	
var
¦¦ 
client
¦¦ 
=
¦¦ 
await
¦¦ 

_dbContext
¦¦ )
.
¦¦) *
Clients
¦¦* 1
.
¦¦1 2
Where
¦¦2 7
(
¦¦7 8
x
¦¦8 9
=>
¦¦: <
x
¦¦= >
.
¦¦> ?
Id
¦¦? A
==
¦¦B D
clientId
¦¦E M
)
¦¦M N
.
¦¦N O"
SingleOrDefaultAsync
¦¦O c
(
¦¦c d
)
¦¦d e
;
¦¦e f
clientProperty
¨¨ 
.
¨¨ 
Client
¨¨ !
=
¨¨" #
client
¨¨$ *
;
¨¨* +
await
©© 

_dbContext
©© 
.
©© 
ClientProperties
©© -
.
©©- .
AddAsync
©©. 6
(
©©6 7
clientProperty
©©7 E
)
©©E F
;
©©F G
return
«« 
await
«« "
AutoSaveChangesAsync
«« -
(
««- .
)
««. /
;
««/ 0
}
¬¬ 	
public
®® 
async
®® 
Task
®® 
<
®® 
(
®® 
string
®® !
ClientId
®®" *
,
®®* +
string
®®, 2

ClientName
®®3 =
)
®®= >
>
®®> ?
GetClientIdAsync
®®@ P
(
®®P Q
int
®®Q T
clientId
®®U ]
)
®®] ^
{
¯¯ 	
var
°° 
client
°° 
=
°° 
await
°° 

_dbContext
°° )
.
°°) *
Clients
°°* 1
.
°°1 2
Where
°°2 7
(
°°7 8
x
°°8 9
=>
°°: <
x
°°= >
.
°°> ?
Id
°°? A
==
°°B D
clientId
°°E M
)
°°M N
.
±± 
Select
±± 
(
±± 
x
±± 
=>
±± 
new
±±  
{
±±! "
x
±±# $
.
±±$ %
ClientId
±±% -
,
±±- .
x
±±/ 0
.
±±0 1

ClientName
±±1 ;
}
±±< =
)
±±= >
.
²² "
SingleOrDefaultAsync
²² %
(
²²% &
)
²²& '
;
²²' (
return
´´ 
(
´´ 
client
´´ 
?
´´ 
.
´´ 
ClientId
´´ $
,
´´$ %
client
´´& ,
?
´´, -
.
´´- .

ClientName
´´. 8
)
´´8 9
;
´´9 :
}
µµ 	
public
·· 
async
·· 
Task
·· 
<
·· 
	PagedList
·· #
<
··# $
ClientSecret
··$ 0
>
··0 1
>
··1 2#
GetClientSecretsAsync
··3 H
(
··H I
int
··I L
clientId
··M U
,
··U V
int
··W Z
page
··[ _
=
··` a
$num
··b c
,
··c d
int
··e h
pageSize
··i q
=
··r s
$num
··t v
)
··v w
{
¸¸ 	
var
¹¹ 
	pagedList
¹¹ 
=
¹¹ 
new
¹¹ 
	PagedList
¹¹  )
<
¹¹) *
ClientSecret
¹¹* 6
>
¹¹6 7
(
¹¹7 8
)
¹¹8 9
;
¹¹9 :
var
»» 
secrets
»» 
=
»» 
await
»» 

_dbContext
»»  *
.
»»* +
ClientSecrets
»»+ 8
.
¼¼ 
Where
¼¼ 
(
¼¼ 
x
¼¼ 
=>
¼¼ 
x
¼¼ 
.
¼¼ 
Client
¼¼ $
.
¼¼$ %
Id
¼¼% '
==
¼¼( *
clientId
¼¼+ 3
)
¼¼3 4
.
½½ 
Skip
½½ 
(
½½ 
(
½½ 
page
½½ 
-
½½ 
$num
½½ 
)
½½  
*
½½! "
pageSize
½½# +
)
½½+ ,
.
¾¾ 
Take
¾¾ 
(
¾¾ 
pageSize
¾¾ 
)
¾¾ 
.
¿¿ 
ToListAsync
¿¿ 
(
¿¿ 
)
¿¿ 
;
¿¿ 
	pagedList
ÁÁ 
.
ÁÁ 
Data
ÁÁ 
.
ÁÁ 
AddRange
ÁÁ #
(
ÁÁ# $
secrets
ÁÁ$ +
)
ÁÁ+ ,
;
ÁÁ, -
	pagedList
ÂÂ 
.
ÂÂ 

TotalCount
ÂÂ  
=
ÂÂ! "
await
ÂÂ# (

_dbContext
ÂÂ) 3
.
ÂÂ3 4
ClientSecrets
ÂÂ4 A
.
ÂÂA B
Where
ÂÂB G
(
ÂÂG H
x
ÂÂH I
=>
ÂÂJ L
x
ÂÂM N
.
ÂÂN O
Client
ÂÂO U
.
ÂÂU V
Id
ÂÂV X
==
ÂÂY [
clientId
ÂÂ\ d
)
ÂÂd e
.
ÂÂe f

CountAsync
ÂÂf p
(
ÂÂp q
)
ÂÂq r
;
ÂÂr s
	pagedList
ÃÃ 
.
ÃÃ 
PageSize
ÃÃ 
=
ÃÃ  
pageSize
ÃÃ! )
;
ÃÃ) *
return
ÅÅ 
	pagedList
ÅÅ 
;
ÅÅ 
}
ÆÆ 	
public
ÈÈ 
Task
ÈÈ 
<
ÈÈ 
ClientSecret
ÈÈ  
>
ÈÈ  !"
GetClientSecretAsync
ÈÈ" 6
(
ÈÈ6 7
int
ÈÈ7 :
clientSecretId
ÈÈ; I
)
ÈÈI J
{
ÉÉ 	
return
ÊÊ 

_dbContext
ÊÊ 
.
ÊÊ 
ClientSecrets
ÊÊ +
.
ËË 
Include
ËË 
(
ËË 
x
ËË 
=>
ËË 
x
ËË 
.
ËË  
Client
ËË  &
)
ËË& '
.
ÌÌ 
Where
ÌÌ 
(
ÌÌ 
x
ÌÌ 
=>
ÌÌ 
x
ÌÌ 
.
ÌÌ 
Id
ÌÌ  
==
ÌÌ! #
clientSecretId
ÌÌ$ 2
)
ÌÌ2 3
.
ÍÍ "
SingleOrDefaultAsync
ÍÍ %
(
ÍÍ% &
)
ÍÍ& '
;
ÍÍ' (
}
ÎÎ 	
public
ÐÐ 
async
ÐÐ 
Task
ÐÐ 
<
ÐÐ 
	PagedList
ÐÐ #
<
ÐÐ# $
ClientClaim
ÐÐ$ /
>
ÐÐ/ 0
>
ÐÐ0 1"
GetClientClaimsAsync
ÐÐ2 F
(
ÐÐF G
int
ÐÐG J
clientId
ÐÐK S
,
ÐÐS T
int
ÐÐU X
page
ÐÐY ]
=
ÐÐ^ _
$num
ÐÐ` a
,
ÐÐa b
int
ÐÐc f
pageSize
ÐÐg o
=
ÐÐp q
$num
ÐÐr t
)
ÐÐt u
{
ÑÑ 	
var
ÒÒ 
	pagedList
ÒÒ 
=
ÒÒ 
new
ÒÒ 
	PagedList
ÒÒ  )
<
ÒÒ) *
ClientClaim
ÒÒ* 5
>
ÒÒ5 6
(
ÒÒ6 7
)
ÒÒ7 8
;
ÒÒ8 9
var
ÔÔ 
claims
ÔÔ 
=
ÔÔ 
await
ÔÔ 

_dbContext
ÔÔ )
.
ÔÔ) *
ClientClaims
ÔÔ* 6
.
ÔÔ6 7
Where
ÔÔ7 <
(
ÔÔ< =
x
ÔÔ= >
=>
ÔÔ? A
x
ÔÔB C
.
ÔÔC D
Client
ÔÔD J
.
ÔÔJ K
Id
ÔÔK M
==
ÔÔN P
clientId
ÔÔQ Y
)
ÔÔY Z
.
ÔÔZ [
PageBy
ÔÔ[ a
(
ÔÔa b
x
ÔÔb c
=>
ÔÔd f
x
ÔÔg h
.
ÔÔh i
Id
ÔÔi k
,
ÔÔk l
page
ÔÔm q
,
ÔÔq r
pageSize
ÔÔs {
)
ÔÔ{ |
.
ÕÕ 
ToListAsync
ÕÕ 
(
ÕÕ 
)
ÕÕ 
;
ÕÕ 
	pagedList
×× 
.
×× 
Data
×× 
.
×× 
AddRange
×× #
(
××# $
claims
××$ *
)
××* +
;
××+ ,
	pagedList
ØØ 
.
ØØ 

TotalCount
ØØ  
=
ØØ! "
await
ØØ# (

_dbContext
ØØ) 3
.
ØØ3 4
ClientClaims
ØØ4 @
.
ØØ@ A
Where
ØØA F
(
ØØF G
x
ØØG H
=>
ØØI K
x
ØØL M
.
ØØM N
Client
ØØN T
.
ØØT U
Id
ØØU W
==
ØØX Z
clientId
ØØ[ c
)
ØØc d
.
ØØd e

CountAsync
ØØe o
(
ØØo p
)
ØØp q
;
ØØq r
	pagedList
ÙÙ 
.
ÙÙ 
PageSize
ÙÙ 
=
ÙÙ  
pageSize
ÙÙ! )
;
ÙÙ) *
return
ÛÛ 
	pagedList
ÛÛ 
;
ÛÛ 
}
ÜÜ 	
public
ÞÞ 
async
ÞÞ 
Task
ÞÞ 
<
ÞÞ 
	PagedList
ÞÞ #
<
ÞÞ# $
ClientProperty
ÞÞ$ 2
>
ÞÞ2 3
>
ÞÞ3 4&
GetClientPropertiesAsync
ÞÞ5 M
(
ÞÞM N
int
ÞÞN Q
clientId
ÞÞR Z
,
ÞÞZ [
int
ÞÞ\ _
page
ÞÞ` d
=
ÞÞe f
$num
ÞÞg h
,
ÞÞh i
int
ÞÞj m
pageSize
ÞÞn v
=
ÞÞw x
$num
ÞÞy {
)
ÞÞ{ |
{
ßß 	
var
àà 
	pagedList
àà 
=
àà 
new
àà 
	PagedList
àà  )
<
àà) *
ClientProperty
àà* 8
>
àà8 9
(
àà9 :
)
àà: ;
;
àà; <
var
ââ 

properties
ââ 
=
ââ 
await
ââ "

_dbContext
ââ# -
.
ââ- .
ClientProperties
ââ. >
.
ââ> ?
Where
ââ? D
(
ââD E
x
ââE F
=>
ââG I
x
ââJ K
.
ââK L
Client
ââL R
.
ââR S
Id
ââS U
==
ââV X
clientId
ââY a
)
ââa b
.
ââb c
PageBy
ââc i
(
ââi j
x
ââj k
=>
ââl n
x
ââo p
.
ââp q
Id
ââq s
,
ââs t
page
ââu y
,
âây z
pageSizeââ{ ƒ
)ââƒ „
.
ãã 
ToListAsync
ãã 
(
ãã 
)
ãã 
;
ãã 
	pagedList
åå 
.
åå 
Data
åå 
.
åå 
AddRange
åå #
(
åå# $

properties
åå$ .
)
åå. /
;
åå/ 0
	pagedList
ææ 
.
ææ 

TotalCount
ææ  
=
ææ! "
await
ææ# (

_dbContext
ææ) 3
.
ææ3 4
ClientProperties
ææ4 D
.
ææD E
Where
ææE J
(
ææJ K
x
ææK L
=>
ææM O
x
ææP Q
.
ææQ R
Client
ææR X
.
ææX Y
Id
ææY [
==
ææ\ ^
clientId
ææ_ g
)
ææg h
.
ææh i

CountAsync
ææi s
(
ææs t
)
ææt u
;
ææu v
	pagedList
çç 
.
çç 
PageSize
çç 
=
çç  
pageSize
çç! )
;
çç) *
return
éé 
	pagedList
éé 
;
éé 
}
êê 	
public
ìì 
Task
ìì 
<
ìì 
ClientClaim
ìì 
>
ìì  !
GetClientClaimAsync
ìì! 4
(
ìì4 5
int
ìì5 8
clientClaimId
ìì9 F
)
ììF G
{
íí 	
return
îî 

_dbContext
îî 
.
îî 
ClientClaims
îî *
.
ïï 
Include
ïï 
(
ïï 
x
ïï 
=>
ïï 
x
ïï 
.
ïï  
Client
ïï  &
)
ïï& '
.
ðð 
Where
ðð 
(
ðð 
x
ðð 
=>
ðð 
x
ðð 
.
ðð 
Id
ðð  
==
ðð! #
clientClaimId
ðð$ 1
)
ðð1 2
.
ññ "
SingleOrDefaultAsync
ññ %
(
ññ% &
)
ññ& '
;
ññ' (
}
òò 	
public
ôô 
async
ôô 
Task
ôô 
<
ôô 
int
ôô 
>
ôô %
DeleteClientSecretAsync
ôô 6
(
ôô6 7
ClientSecret
ôô7 C
clientSecret
ôôD P
)
ôôP Q
{
õõ 	
var
öö 
secretToDelete
öö 
=
öö  
await
öö! &

_dbContext
öö' 1
.
öö1 2
ClientSecrets
öö2 ?
.
öö? @
Where
öö@ E
(
ööE F
x
ööF G
=>
ööH J
x
ööK L
.
ööL M
Id
ööM O
==
ööP R
clientSecret
ööS _
.
öö_ `
Id
öö` b
)
ööb c
.
ööc d"
SingleOrDefaultAsync
ööd x
(
ööx y
)
ööy z
;
ööz {

_dbContext
øø 
.
øø 
ClientSecrets
øø $
.
øø$ %
Remove
øø% +
(
øø+ ,
secretToDelete
øø, :
)
øø: ;
;
øø; <
return
úú 
await
úú "
AutoSaveChangesAsync
úú -
(
úú- .
)
úú. /
;
úú/ 0
}
ûû 	
public
ýý 
async
ýý 
Task
ýý 
<
ýý 
int
ýý 
>
ýý $
DeleteClientClaimAsync
ýý 5
(
ýý5 6
ClientClaim
ýý6 A
clientClaim
ýýB M
)
ýýM N
{
þþ 	
var
ÿÿ 
claimToDelete
ÿÿ 
=
ÿÿ 
await
ÿÿ  %

_dbContext
ÿÿ& 0
.
ÿÿ0 1
ClientClaims
ÿÿ1 =
.
ÿÿ= >
Where
ÿÿ> C
(
ÿÿC D
x
ÿÿD E
=>
ÿÿF H
x
ÿÿI J
.
ÿÿJ K
Id
ÿÿK M
==
ÿÿN P
clientClaim
ÿÿQ \
.
ÿÿ\ ]
Id
ÿÿ] _
)
ÿÿ_ `
.
ÿÿ` a"
SingleOrDefaultAsync
ÿÿa u
(
ÿÿu v
)
ÿÿv w
;
ÿÿw x

_dbContext
 
.
 
ClientClaims
 #
.
# $
Remove
$ *
(
* +
claimToDelete
+ 8
)
8 9
;
9 :
return
‚‚ 
await
‚‚ "
AutoSaveChangesAsync
‚‚ -
(
‚‚- .
)
‚‚. /
;
‚‚/ 0
}
ƒƒ 	
public
…… 
async
…… 
Task
…… 
<
…… 
int
…… 
>
…… '
DeleteClientPropertyAsync
…… 8
(
……8 9
ClientProperty
……9 G
clientProperty
……H V
)
……V W
{
†† 	
var
‡‡ 
propertyToDelete
‡‡  
=
‡‡! "
await
‡‡# (

_dbContext
‡‡) 3
.
‡‡3 4
ClientProperties
‡‡4 D
.
‡‡D E
Where
‡‡E J
(
‡‡J K
x
‡‡K L
=>
‡‡M O
x
‡‡P Q
.
‡‡Q R
Id
‡‡R T
==
‡‡U W
clientProperty
‡‡X f
.
‡‡f g
Id
‡‡g i
)
‡‡i j
.
‡‡j k"
SingleOrDefaultAsync
‡‡k 
(‡‡ €
)‡‡€ 
;‡‡ ‚

_dbContext
‰‰ 
.
‰‰ 
ClientProperties
‰‰ '
.
‰‰' (
Remove
‰‰( .
(
‰‰. /
propertyToDelete
‰‰/ ?
)
‰‰? @
;
‰‰@ A
return
ŠŠ 
await
ŠŠ "
AutoSaveChangesAsync
ŠŠ -
(
ŠŠ- .
)
ŠŠ. /
;
ŠŠ/ 0
}
‹‹ 	
public
 
async
 
Task
 
<
 
int
 
>
 !
SaveAllChangesAsync
 2
(
2 3
)
3 4
{
ŽŽ 	
return
 
await
 

_dbContext
 #
.
# $
SaveChangesAsync
$ 4
(
4 5
)
5 6
;
6 7
}
 	
public
’’ 
async
’’ 
Task
’’ 
<
’’ 
bool
’’ 
>
’’ "
CanInsertClientAsync
’’  4
(
’’4 5
Client
’’5 ;
client
’’< B
,
’’B C
bool
’’D H
isCloned
’’I Q
=
’’R S
false
’’T Y
)
’’Y Z
{
““ 	
if
”” 
(
”” 
client
”” 
.
”” 
Id
”” 
==
”” 
$num
”” 
||
”” !
isCloned
””" *
)
””* +
{
•• 
var
–– "
existsWithClientName
–– (
=
––) *
await
––+ 0

_dbContext
––1 ;
.
––; <
Clients
––< C
.
––C D
Where
––D I
(
––I J
x
––J K
=>
––L N
x
––O P
.
––P Q
ClientId
––Q Y
==
––Z \
client
––] c
.
––c d
ClientId
––d l
)
––l m
.
––m n#
SingleOrDefaultAsync––n ‚
(––‚ ƒ
)––ƒ „
;––„ …
return
—— "
existsWithClientName
—— +
==
——, .
null
——/ 3
;
——3 4
}
˜˜ 
else
™™ 
{
šš 
var
›› "
existsWithClientName
›› (
=
››) *
await
››+ 0

_dbContext
››1 ;
.
››; <
Clients
››< C
.
››C D
Where
››D I
(
››I J
x
››J K
=>
››L N
x
››O P
.
››P Q
ClientId
››Q Y
==
››Z \
client
››] c
.
››c d
ClientId
››d l
&&
››m o
x
››p q
.
››q r
Id
››r t
!=
››u w
client
››x ~
.
››~ 
Id›› 
)›› ‚
.››‚ ƒ$
SingleOrDefaultAsync››ƒ —
(››— ˜
)››˜ ™
;››™ š
return
œœ "
existsWithClientName
œœ +
==
œœ, .
null
œœ/ 3
;
œœ3 4
}
 
}
žž 	
public
¥¥ 
async
¥¥ 
Task
¥¥ 
<
¥¥ 
int
¥¥ 
>
¥¥ 
AddClientAsync
¥¥ -
(
¥¥- .
Client
¥¥. 4
client
¥¥5 ;
)
¥¥; <
{
¦¦ 	

_dbContext
§§ 
.
§§ 
Clients
§§ 
.
§§ 
Add
§§ "
(
§§" #
client
§§# )
)
§§) *
;
§§* +
await
©© "
AutoSaveChangesAsync
©© &
(
©©& '
)
©©' (
;
©©( )
return
«« 
client
«« 
.
«« 
Id
«« 
;
«« 
}
¬¬ 	
public
®® 
async
®® 
Task
®® 
<
®® 
int
®® 
>
®® 
CloneClientAsync
®® /
(
®®/ 0
Client
®®0 6
client
®®7 =
,
®®= >
bool
¯¯ $
cloneClientCorsOrigins
¯¯ '
=
¯¯( )
true
¯¯* .
,
¯¯. /
bool
°° #
cloneClientGrantTypes
°° &
=
°°' (
true
°°) -
,
°°- .
bool
±± (
cloneClientIdPRestrictions
±± +
=
±±, -
true
±±. 2
,
±±2 3
bool
²² /
!cloneClientPostLogoutRedirectUris
²² 2
=
²²3 4
true
²²5 9
,
²²9 :
bool
³³ 
cloneClientScopes
³³ "
=
³³# $
true
³³% )
,
³³) *
bool
´´ %
cloneClientRedirectUris
´´ (
=
´´) *
true
´´+ /
,
´´/ 0
bool
µµ 
cloneClientClaims
µµ "
=
µµ# $
true
µµ% )
,
µµ) *
bool
¶¶ #
cloneClientProperties
¶¶ &
=
¶¶' (
true
¶¶) -
)
·· 
{
¸¸ 	
var
¹¹ 
clientToClone
¹¹ 
=
¹¹ 
await
¹¹  %

_dbContext
¹¹& 0
.
¹¹0 1
Clients
¹¹1 8
.
ºº 
Include
ºº 
(
ºº 
x
ºº 
=>
ºº 
x
ºº 
.
ºº  
AllowedGrantTypes
ºº  1
)
ºº1 2
.
»» 
Include
»» 
(
»» 
x
»» 
=>
»» 
x
»» 
.
»»  
RedirectUris
»»  ,
)
»», -
.
¼¼ 
Include
¼¼ 
(
¼¼ 
x
¼¼ 
=>
¼¼ 
x
¼¼ 
.
¼¼  $
PostLogoutRedirectUris
¼¼  6
)
¼¼6 7
.
½½ 
Include
½½ 
(
½½ 
x
½½ 
=>
½½ 
x
½½ 
.
½½  
AllowedScopes
½½  -
)
½½- .
.
¾¾ 
Include
¾¾ 
(
¾¾ 
x
¾¾ 
=>
¾¾ 
x
¾¾ 
.
¾¾  
ClientSecrets
¾¾  -
)
¾¾- .
.
¿¿ 
Include
¿¿ 
(
¿¿ 
x
¿¿ 
=>
¿¿ 
x
¿¿ 
.
¿¿  
Claims
¿¿  &
)
¿¿& '
.
ÀÀ 
Include
ÀÀ 
(
ÀÀ 
x
ÀÀ 
=>
ÀÀ 
x
ÀÀ 
.
ÀÀ  *
IdentityProviderRestrictions
ÀÀ  <
)
ÀÀ< =
.
ÁÁ 
Include
ÁÁ 
(
ÁÁ 
x
ÁÁ 
=>
ÁÁ 
x
ÁÁ 
.
ÁÁ   
AllowedCorsOrigins
ÁÁ  2
)
ÁÁ2 3
.
ÂÂ 
Include
ÂÂ 
(
ÂÂ 
x
ÂÂ 
=>
ÂÂ 
x
ÂÂ 
.
ÂÂ  

Properties
ÂÂ  *
)
ÂÂ* +
.
ÃÃ 
AsNoTracking
ÃÃ 
(
ÃÃ 
)
ÃÃ 
.
ÄÄ !
FirstOrDefaultAsync
ÄÄ $
(
ÄÄ$ %
x
ÄÄ% &
=>
ÄÄ' )
x
ÄÄ* +
.
ÄÄ+ ,
Id
ÄÄ, .
==
ÄÄ/ 1
client
ÄÄ2 8
.
ÄÄ8 9
Id
ÄÄ9 ;
)
ÄÄ; <
;
ÄÄ< =
clientToClone
ÆÆ 
.
ÆÆ 

ClientName
ÆÆ $
=
ÆÆ% &
client
ÆÆ' -
.
ÆÆ- .

ClientName
ÆÆ. 8
;
ÆÆ8 9
clientToClone
ÇÇ 
.
ÇÇ 
ClientId
ÇÇ "
=
ÇÇ# $
client
ÇÇ% +
.
ÇÇ+ ,
ClientId
ÇÇ, 4
;
ÇÇ4 5
clientToClone
ÊÊ 
.
ÊÊ 
Id
ÊÊ 
=
ÊÊ 
$num
ÊÊ  
;
ÊÊ  !
clientToClone
ËË 
.
ËË  
AllowedCorsOrigins
ËË ,
.
ËË, -
ForEach
ËË- 4
(
ËË4 5
x
ËË5 6
=>
ËË7 9
x
ËË: ;
.
ËË; <
Id
ËË< >
=
ËË? @
$num
ËËA B
)
ËËB C
;
ËËC D
clientToClone
ÌÌ 
.
ÌÌ 
RedirectUris
ÌÌ &
.
ÌÌ& '
ForEach
ÌÌ' .
(
ÌÌ. /
x
ÌÌ/ 0
=>
ÌÌ1 3
x
ÌÌ4 5
.
ÌÌ5 6
Id
ÌÌ6 8
=
ÌÌ9 :
$num
ÌÌ; <
)
ÌÌ< =
;
ÌÌ= >
clientToClone
ÍÍ 
.
ÍÍ $
PostLogoutRedirectUris
ÍÍ 0
.
ÍÍ0 1
ForEach
ÍÍ1 8
(
ÍÍ8 9
x
ÍÍ9 :
=>
ÍÍ; =
x
ÍÍ> ?
.
ÍÍ? @
Id
ÍÍ@ B
=
ÍÍC D
$num
ÍÍE F
)
ÍÍF G
;
ÍÍG H
clientToClone
ÎÎ 
.
ÎÎ 
AllowedScopes
ÎÎ '
.
ÎÎ' (
ForEach
ÎÎ( /
(
ÎÎ/ 0
x
ÎÎ0 1
=>
ÎÎ2 4
x
ÎÎ5 6
.
ÎÎ6 7
Id
ÎÎ7 9
=
ÎÎ: ;
$num
ÎÎ< =
)
ÎÎ= >
;
ÎÎ> ?
clientToClone
ÏÏ 
.
ÏÏ 
ClientSecrets
ÏÏ '
.
ÏÏ' (
ForEach
ÏÏ( /
(
ÏÏ/ 0
x
ÏÏ0 1
=>
ÏÏ2 4
x
ÏÏ5 6
.
ÏÏ6 7
Id
ÏÏ7 9
=
ÏÏ: ;
$num
ÏÏ< =
)
ÏÏ= >
;
ÏÏ> ?
clientToClone
ÐÐ 
.
ÐÐ *
IdentityProviderRestrictions
ÐÐ 6
.
ÐÐ6 7
ForEach
ÐÐ7 >
(
ÐÐ> ?
x
ÐÐ? @
=>
ÐÐA C
x
ÐÐD E
.
ÐÐE F
Id
ÐÐF H
=
ÐÐI J
$num
ÐÐK L
)
ÐÐL M
;
ÐÐM N
clientToClone
ÑÑ 
.
ÑÑ 
Claims
ÑÑ  
.
ÑÑ  !
ForEach
ÑÑ! (
(
ÑÑ( )
x
ÑÑ) *
=>
ÑÑ+ -
x
ÑÑ. /
.
ÑÑ/ 0
Id
ÑÑ0 2
=
ÑÑ3 4
$num
ÑÑ5 6
)
ÑÑ6 7
;
ÑÑ7 8
clientToClone
ÒÒ 
.
ÒÒ 
AllowedGrantTypes
ÒÒ +
.
ÒÒ+ ,
ForEach
ÒÒ, 3
(
ÒÒ3 4
x
ÒÒ4 5
=>
ÒÒ6 8
x
ÒÒ9 :
.
ÒÒ: ;
Id
ÒÒ; =
=
ÒÒ> ?
$num
ÒÒ@ A
)
ÒÒA B
;
ÒÒB C
clientToClone
ÓÓ 
.
ÓÓ 

Properties
ÓÓ $
.
ÓÓ$ %
ForEach
ÓÓ% ,
(
ÓÓ, -
x
ÓÓ- .
=>
ÓÓ/ 1
x
ÓÓ2 3
.
ÓÓ3 4
Id
ÓÓ4 6
=
ÓÓ7 8
$num
ÓÓ9 :
)
ÓÓ: ;
;
ÓÓ; <
clientToClone
ÖÖ 
.
ÖÖ 
ClientSecrets
ÖÖ '
.
ÖÖ' (
Clear
ÖÖ( -
(
ÖÖ- .
)
ÖÖ. /
;
ÖÖ/ 0
if
ØØ 
(
ØØ 
!
ØØ $
cloneClientCorsOrigins
ØØ '
)
ØØ' (
{
ÙÙ 
clientToClone
ÚÚ 
.
ÚÚ  
AllowedCorsOrigins
ÚÚ 0
.
ÚÚ0 1
Clear
ÚÚ1 6
(
ÚÚ6 7
)
ÚÚ7 8
;
ÚÚ8 9
}
ÛÛ 
if
ÝÝ 
(
ÝÝ 
!
ÝÝ #
cloneClientGrantTypes
ÝÝ &
)
ÝÝ& '
{
ÞÞ 
clientToClone
ßß 
.
ßß 
AllowedGrantTypes
ßß /
.
ßß/ 0
Clear
ßß0 5
(
ßß5 6
)
ßß6 7
;
ßß7 8
}
àà 
if
ââ 
(
ââ 
!
ââ (
cloneClientIdPRestrictions
ââ +
)
ââ+ ,
{
ãã 
clientToClone
ää 
.
ää *
IdentityProviderRestrictions
ää :
.
ää: ;
Clear
ää; @
(
ää@ A
)
ääA B
;
ääB C
}
åå 
if
çç 
(
çç 
!
çç /
!cloneClientPostLogoutRedirectUris
çç 2
)
çç2 3
{
èè 
clientToClone
éé 
.
éé $
PostLogoutRedirectUris
éé 4
.
éé4 5
Clear
éé5 :
(
éé: ;
)
éé; <
;
éé< =
}
êê 
if
ìì 
(
ìì 
!
ìì 
cloneClientScopes
ìì "
)
ìì" #
{
íí 
clientToClone
îî 
.
îî 
AllowedScopes
îî +
.
îî+ ,
Clear
îî, 1
(
îî1 2
)
îî2 3
;
îî3 4
}
ïï 
if
ññ 
(
ññ 
!
ññ %
cloneClientRedirectUris
ññ (
)
ññ( )
{
òò 
clientToClone
óó 
.
óó 
RedirectUris
óó *
.
óó* +
Clear
óó+ 0
(
óó0 1
)
óó1 2
;
óó2 3
}
ôô 
if
öö 
(
öö 
!
öö 
cloneClientClaims
öö "
)
öö" #
{
÷÷ 
clientToClone
øø 
.
øø 
Claims
øø $
.
øø$ %
Clear
øø% *
(
øø* +
)
øø+ ,
;
øø, -
}
ùù 
if
ûû 
(
ûû 
!
ûû #
cloneClientProperties
ûû &
)
ûû& '
{
üü 
clientToClone
ýý 
.
ýý 

Properties
ýý (
.
ýý( )
Clear
ýý) .
(
ýý. /
)
ýý/ 0
;
ýý0 1
}
þþ 
await
€€ 

_dbContext
€€ 
.
€€ 
Clients
€€ $
.
€€$ %
AddAsync
€€% -
(
€€- .
clientToClone
€€. ;
)
€€; <
;
€€< =
await
‚‚ "
AutoSaveChangesAsync
‚‚ &
(
‚‚& '
)
‚‚' (
;
‚‚( )
var
„„ 
id
„„ 
=
„„ 
clientToClone
„„ "
.
„„" #
Id
„„# %
;
„„% &
return
†† 
id
†† 
;
†† 
}
‡‡ 	
private
‰‰ 
async
‰‰ 
Task
‰‰ (
RemoveClientRelationsAsync
‰‰ 5
(
‰‰5 6
Client
‰‰6 <
client
‰‰= C
)
‰‰C D
{
ŠŠ 	
var
ŒŒ 
clientScopes
ŒŒ 
=
ŒŒ 
await
ŒŒ $

_dbContext
ŒŒ% /
.
ŒŒ/ 0
ClientScopes
ŒŒ0 <
.
ŒŒ< =
Where
ŒŒ= B
(
ŒŒB C
x
ŒŒC D
=>
ŒŒE G
x
ŒŒH I
.
ŒŒI J
Client
ŒŒJ P
.
ŒŒP Q
Id
ŒŒQ S
==
ŒŒT V
client
ŒŒW ]
.
ŒŒ] ^
Id
ŒŒ^ `
)
ŒŒ` a
.
ŒŒa b
ToListAsync
ŒŒb m
(
ŒŒm n
)
ŒŒn o
;
ŒŒo p

_dbContext
 
.
 
ClientScopes
 #
.
# $
RemoveRange
$ /
(
/ 0
clientScopes
0 <
)
< =
;
= >
var
 
clientGrantTypes
  
=
! "
await
# (

_dbContext
) 3
.
3 4
ClientGrantTypes
4 D
.
D E
Where
E J
(
J K
x
K L
=>
M O
x
P Q
.
Q R
Client
R X
.
X Y
Id
Y [
==
\ ^
client
_ e
.
e f
Id
f h
)
h i
.
i j
ToListAsync
j u
(
u v
)
v w
;
w x

_dbContext
‘‘ 
.
‘‘ 
ClientGrantTypes
‘‘ '
.
‘‘' (
RemoveRange
‘‘( 3
(
‘‘3 4
clientGrantTypes
‘‘4 D
)
‘‘D E
;
‘‘E F
var
””  
clientRedirectUris
”” "
=
””# $
await
””% *

_dbContext
””+ 5
.
””5 6 
ClientRedirectUris
””6 H
.
””H I
Where
””I N
(
””N O
x
””O P
=>
””Q S
x
””T U
.
””U V
Client
””V \
.
””\ ]
Id
””] _
==
””` b
client
””c i
.
””i j
Id
””j l
)
””l m
.
””m n
ToListAsync
””n y
(
””y z
)
””z {
;
””{ |

_dbContext
•• 
.
••  
ClientRedirectUris
•• )
.
••) *
RemoveRange
••* 5
(
••5 6 
clientRedirectUris
••6 H
)
••H I
;
••I J
var
˜˜ 
clientCorsOrigins
˜˜ !
=
˜˜" #
await
˜˜$ )

_dbContext
˜˜* 4
.
˜˜4 5
ClientCorsOrigins
˜˜5 F
.
˜˜F G
Where
˜˜G L
(
˜˜L M
x
˜˜M N
=>
˜˜O Q
x
˜˜R S
.
˜˜S T
Client
˜˜T Z
.
˜˜Z [
Id
˜˜[ ]
==
˜˜^ `
client
˜˜a g
.
˜˜g h
Id
˜˜h j
)
˜˜j k
.
˜˜k l
ToListAsync
˜˜l w
(
˜˜w x
)
˜˜x y
;
˜˜y z

_dbContext
™™ 
.
™™ 
ClientCorsOrigins
™™ (
.
™™( )
RemoveRange
™™) 4
(
™™4 5
clientCorsOrigins
™™5 F
)
™™F G
;
™™G H
var
œœ #
clientIdPRestrictions
œœ %
=
œœ& '
await
œœ( -

_dbContext
œœ. 8
.
œœ8 9#
ClientIdPRestrictions
œœ9 N
.
œœN O
Where
œœO T
(
œœT U
x
œœU V
=>
œœW Y
x
œœZ [
.
œœ[ \
Client
œœ\ b
.
œœb c
Id
œœc e
==
œœf h
client
œœi o
.
œœo p
Id
œœp r
)
œœr s
.
œœs t
ToListAsync
œœt 
(œœ €
)œœ€ 
;œœ ‚

_dbContext
 
.
 #
ClientIdPRestrictions
 ,
.
, -
RemoveRange
- 8
(
8 9#
clientIdPRestrictions
9 N
)
N O
;
O P
var
   *
clientPostLogoutRedirectUris
   ,
=
  - .
await
  / 4

_dbContext
  5 ?
.
  ? @*
ClientPostLogoutRedirectUris
  @ \
.
  \ ]
Where
  ] b
(
  b c
x
  c d
=>
  e g
x
  h i
.
  i j
Client
  j p
.
  p q
Id
  q s
==
  t v
client
  w }
.
  } ~
Id  ~ €
)  € 
.   ‚
ToListAsync  ‚ 
(   Ž
)  Ž 
;   

_dbContext
¡¡ 
.
¡¡ *
ClientPostLogoutRedirectUris
¡¡ 3
.
¡¡3 4
RemoveRange
¡¡4 ?
(
¡¡? @*
clientPostLogoutRedirectUris
¡¡@ \
)
¡¡\ ]
;
¡¡] ^
}
¢¢ 	
public
¤¤ 
async
¤¤ 
Task
¤¤ 
<
¤¤ 
int
¤¤ 
>
¤¤ 
UpdateClientAsync
¤¤ 0
(
¤¤0 1
Client
¤¤1 7
client
¤¤8 >
)
¤¤> ?
{
¥¥ 	
await
§§ (
RemoveClientRelationsAsync
§§ ,
(
§§, -
client
§§- 3
)
§§3 4
;
§§4 5

_dbContext
ªª 
.
ªª 
Clients
ªª 
.
ªª 
Update
ªª %
(
ªª% &
client
ªª& ,
)
ªª, -
;
ªª- .
return
¬¬ 
await
¬¬ "
AutoSaveChangesAsync
¬¬ -
(
¬¬- .
)
¬¬. /
;
¬¬/ 0
}
­­ 	
public
¯¯ 
async
¯¯ 
Task
¯¯ 
<
¯¯ 
int
¯¯ 
>
¯¯ 
RemoveClientAsync
¯¯ 0
(
¯¯0 1
Client
¯¯1 7
client
¯¯8 >
)
¯¯> ?
{
°° 	

_dbContext
±± 
.
±± 
Clients
±± 
.
±± 
Remove
±± %
(
±±% &
client
±±& ,
)
±±, -
;
±±- .
return
³³ 
await
³³ "
AutoSaveChangesAsync
³³ -
(
³³- .
)
³³. /
;
³³/ 0
}
´´ 	
}
µµ 
}¶¶ Ã%
‹C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Repositories\IApiResourceRepository.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Repositories4 @
{ 
public 

	interface "
IApiResourceRepository +
{		 
Task

 
<

 
	PagedList

 
<

 
ApiResource

 "
>

" #
>

# $ 
GetApiResourcesAsync

% 9
(

9 :
string

: @
search

A G
,

G H
int

I L
page

M Q
=

R S
$num

T U
,

U V
int

W Z
pageSize

[ c
=

d e
$num

f h
)

h i
;

i j
Task 
< 
ApiResource 
> 
GetApiResourceAsync -
(- .
int. 1
apiResourceId2 ?
)? @
;@ A
Task 
< 
int 
> 
AddApiResourceAsync %
(% &
ApiResource& 1
apiResource2 =
)= >
;> ?
Task 
< 
int 
> "
UpdateApiResourceAsync (
(( )
ApiResource) 4
apiResource5 @
)@ A
;A B
Task 
< 
int 
> "
DeleteApiResourceAsync (
(( )
ApiResource) 4
apiResource5 @
)@ A
;A B
Task 
< 
bool 
> %
CanInsertApiResourceAsync ,
(, -
ApiResource- 8
apiResource9 D
)D E
;E F
Task 
< 
	PagedList 
< 
ApiScope 
>  
>  !
GetApiScopesAsync" 3
(3 4
int4 7
apiResourceId8 E
,E F
intG J
pageK O
=P Q
$numR S
,S T
intU X
pageSizeY a
=b c
$numd f
)f g
;g h
Task 
< 
ApiScope 
> 
GetApiScopeAsync '
(' (
int( +
apiResourceId, 9
,9 :
int; >

apiScopeId? I
)I J
;J K
Task 
< 
int 
> 
AddApiScopeAsync "
(" #
int# &
apiResourceId' 4
,4 5
ApiScope6 >
apiScope? G
)G H
;H I
Task 
< 
int 
> 
UpdateApiScopeAsync %
(% &
int& )
apiResourceId* 7
,7 8
ApiScope9 A
apiScopeB J
)J K
;K L
Task 
< 
int 
> 
DeleteApiScopeAsync %
(% &
ApiScope& .
apiScope/ 7
)7 8
;8 9
Task   
<   
	PagedList   
<   
	ApiSecret    
>    !
>  ! "
GetApiSecretsAsync  # 5
(  5 6
int  6 9
apiResourceId  : G
,  G H
int  I L
page  M Q
=  R S
$num  T U
,  U V
int  W Z
pageSize  [ c
=  d e
$num  f h
)  h i
;  i j
Task"" 
<"" 
int"" 
>"" 
AddApiSecretAsync"" #
(""# $
int""$ '
apiResourceId""( 5
,""5 6
	ApiSecret""7 @
	apiSecret""A J
)""J K
;""K L
Task$$ 
<$$ 
	ApiSecret$$ 
>$$ 
GetApiSecretAsync$$ )
($$) *
int$$* -
apiSecretId$$. 9
)$$9 :
;$$: ;
Task&& 
<&& 
int&& 
>&&  
DeleteApiSecretAsync&& &
(&&& '
	ApiSecret&&' 0
	apiSecret&&1 :
)&&: ;
;&&; <
Task(( 
<(( 
bool(( 
>(( "
CanInsertApiScopeAsync(( )
((() *
ApiScope((* 2
apiScope((3 ;
)((; <
;((< =
Task** 
<** 
int** 
>** 
SaveAllChangesAsync** %
(**% &
)**& '
;**' (
Task,, 
<,, 
string,, 
>,, #
GetApiResourceNameAsync,, ,
(,,, -
int,,- 0
apiResourceId,,1 >
),,> ?
;,,? @
}-- 
}.. ß=
ŒC:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Repositories\IBaseIdentityRepository.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Repositories4 @
{ 
public		 

	interface		 #
IBaseIdentityRepository		 ,
<		, -
in		- /
TUserId		0 7
,		7 8
in		9 ;
TRoleId		< C
,		C D
in		E G
TClaimId		H P
>		P Q
{

 
Task 
< 
bool 
> 
ExistsUserAsync "
(" #
TUserId# *
userId+ 1
)1 2
;2 3
Task 
< 
bool 
> 
ExistsRoleAsync "
(" #
TRoleId# *
roleId+ 1
)1 2
;2 3
Task 
< 
	PagedList 
< 
UserIdentity #
># $
>$ %
GetUsersAsync& 3
(3 4
string4 :
search; A
,A B
intC F
pageG K
=L M
$numN O
,O P
intQ T
pageSizeU ]
=^ _
$num` b
)b c
;c d
Task 
< 
	PagedList 
< 
UserIdentityRole '
>' (
>( )
GetRolesAsync* 7
(7 8
string8 >
search? E
,E F
intG J
pageK O
=P Q
$numR S
,S T
intU X
pageSizeY a
=b c
$numd f
)f g
;g h
Task 
< 
IdentityResult 
> 
CreateRoleAsync ,
(, -
UserIdentityRole- =
role> B
)B C
;C D
Task 
< 
UserIdentityRole 
> 
GetRoleAsync +
(+ ,
UserIdentityRole, <
role= A
)A B
;B C
Task 
< 
List 
< 
UserIdentityRole "
>" #
># $
GetRolesAsync% 2
(2 3
)3 4
;4 5
Task 
< 
IdentityResult 
> 
UpdateRoleAsync ,
(, -
UserIdentityRole- =
role> B
)B C
;C D
Task 
< 
UserIdentity 
> 
GetUserAsync '
(' (
UserIdentity( 4
user5 9
)9 :
;: ;
Task 
< 
IdentityResult 
> 
CreateUserAsync ,
(, -
UserIdentity- 9
user: >
)> ?
;? @
Task 
< 
IdentityResult 
> 
UpdateUserAsync ,
(, -
UserIdentity- 9
user: >
)> ?
;? @
Task!! 
<!! 
IdentityResult!! 
>!! 
DeleteUserAsync!! ,
(!!, -
UserIdentity!!- 9
user!!: >
)!!> ?
;!!? @
Task## 
<## 
IdentityResult## 
>## 
CreateUserRoleAsync## 0
(##0 1
TUserId##1 8
userId##9 ?
,##? @
TRoleId##A H
roleId##I O
)##O P
;##P Q
Task%% 
<%% 
	PagedList%% 
<%% 
UserIdentityRole%% '
>%%' (
>%%( )
GetUserRolesAsync%%* ;
(%%; <
TUserId%%< C
userId%%D J
,%%J K
int%%L O
page%%P T
=%%U V
$num%%W X
,%%X Y
int%%Z ]
pageSize%%^ f
=%%g h
$num%%i k
)%%k l
;%%l m
Task'' 
<'' 
IdentityResult'' 
>'' 
DeleteUserRoleAsync'' 0
(''0 1
TUserId''1 8
userId''9 ?
,''? @
TRoleId''A H
roleId''I O
)''O P
;''P Q
Task)) 
<)) 
	PagedList)) 
<)) !
UserIdentityUserClaim)) ,
>)), -
>))- .
GetUserClaimsAsync))/ A
())A B
TUserId))B I
userId))J P
,))P Q
int))R U
page))V Z
=))[ \
$num))] ^
,))^ _
int))` c
pageSize))d l
=))m n
$num))o q
)))q r
;))r s
Task++ 
<++ !
UserIdentityUserClaim++ "
>++" #
GetUserClaimAsync++$ 5
(++5 6
TUserId++6 =
userId++> D
,++D E
TClaimId++F N
claimId++O V
)++V W
;++W X
Task-- 
<-- 
IdentityResult-- 
>-- !
CreateUserClaimsAsync-- 2
(--2 3!
UserIdentityUserClaim--3 H
claims--I O
)--O P
;--P Q
Task// 
<// 
int// 
>// !
DeleteUserClaimsAsync// '
(//' (
TUserId//( /
userId//0 6
,//6 7
TClaimId//8 @
claimId//A H
)//H I
;//I J
Task11 
<11 
List11 
<11 
UserLoginInfo11 
>11  
>11  !!
GetUserProvidersAsync11" 7
(117 8
TUserId118 ?
userId11@ F
)11F G
;11G H
Task33 
<33 
IdentityResult33 
>33 $
DeleteUserProvidersAsync33 5
(335 6
TUserId336 =
userId33> D
,33D E
string33F L
providerKey33M X
,33X Y
string33Z `
loginProvider33a n
)33n o
;33o p
Task55 
<55 !
UserIdentityUserLogin55 "
>55" # 
GetUserProviderAsync55$ 8
(558 9
TUserId559 @
userId55A G
,55G H
string55I O
providerKey55P [
)55[ \
;55\ ]
Task77 
<77 
IdentityResult77 
>77 #
UserChangePasswordAsync77 4
(774 5
TUserId775 <
userId77= C
,77C D
string77E K
password77L T
)77T U
;77U V
Task99 
<99 
IdentityResult99 
>99 !
CreateRoleClaimsAsync99 2
(992 3!
UserIdentityRoleClaim993 H
claims99I O
)99O P
;99P Q
Task;; 
<;; 
	PagedList;; 
<;; !
UserIdentityRoleClaim;; ,
>;;, -
>;;- .
GetRoleClaimsAsync;;/ A
(;;A B
TRoleId;;B I
roleId;;J P
,;;P Q
int;;R U
page;;V Z
=;;[ \
$num;;] ^
,;;^ _
int;;` c
pageSize;;d l
=;;m n
$num;;o q
);;q r
;;;r s
Task== 
<== !
UserIdentityRoleClaim== "
>==" #
GetRoleClaimAsync==$ 5
(==5 6
TRoleId==6 =
roleId==> D
,==D E
TClaimId==F N
claimId==O V
)==V W
;==W X
Task?? 
<?? 
int?? 
>?? !
DeleteRoleClaimsAsync?? '
(??' (
TRoleId??( /
roleId??0 6
,??6 7
TClaimId??8 @
claimId??A H
)??H I
;??I J
TaskAA 
<AA 
IdentityResultAA 
>AA 
DeleteRoleAsyncAA ,
(AA, -
UserIdentityRoleAA- =
roleAA> B
)AAB C
;AAC D
}BB 
}CC à@
†C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Repositories\IClientRepository.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Repositories4 @
{ 
public 

	interface 
IClientRepository &
{		 
Task

 
<

 
int

 
>

 
AddClientAsync

  
(

  !
Client

! '
client

( .
)

. /
;

/ 0
Task 
< 
int 
> 
UpdateClientAsync #
(# $
Client$ *
client+ 1
)1 2
;2 3
Task 
< 
int 
> 
RemoveClientAsync #
(# $
Client$ *
client+ 1
)1 2
;2 3
Task 
< 
int 
> 
CloneClientAsync "
(" #
Client# )
client* 0
,0 1
bool "
cloneClientCorsOrigins '
=( )
true* .
,. /
bool !
cloneClientGrantTypes &
=' (
true) -
,- .
bool &
cloneClientIdPRestrictions +
=, -
true. 2
,2 3
bool -
!cloneClientPostLogoutRedirectUris 2
=3 4
true5 9
,9 :
bool 
cloneClientScopes "
=# $
true% )
,) *
bool #
cloneClientRedirectUris (
=) *
true+ /
,/ 0
bool 
cloneClientClaims "
=# $
true% )
,) *
bool !
cloneClientProperties &
=' (
true) -
)- .
;. /
Task 
< 
bool 
>  
CanInsertClientAsync '
(' (
Client( .
client/ 5
,5 6
bool7 ;
isCloned< D
=E F
falseG L
)L M
;M N
Task 
< 
Client 
> 
GetClientAsync #
(# $
int$ '
clientId( 0
)0 1
;1 2
Task 
< 
( 
string 
ClientId 
, 
string %

ClientName& 0
)0 1
>1 2
GetClientIdAsync3 C
(C D
intD G
clientIdH P
)P Q
;Q R
Task   
<   
	PagedList   
<   
Client   
>   
>   
GetClientsAsync    /
(  / 0
string  0 6
search  7 =
=  > ?
$str  @ B
,  B C
int  D G
page  H L
=  M N
$num  O P
,  P Q
int  R U
pageSize  V ^
=  _ `
$num  a c
)  c d
;  d e
Task"" 
<"" 
List"" 
<"" 
string"" 
>"" 
>"" 
GetScopesAsync"" )
("") *
string""* 0
scope""1 6
,""6 7
int""8 ;
limit""< A
=""B C
$num""D E
)""E F
;""F G
List$$ 
<$$ 
string$$ 
>$$ 
GetGrantTypes$$ "
($$" #
string$$# )
grant$$* /
,$$/ 0
int$$1 4
limit$$5 :
=$$; <
$num$$= >
)$$> ?
;$$? @
List&& 
<&& 

SelectItem&& 
>&& 
GetProtocolTypes&& )
(&&) *
)&&* +
;&&+ ,
List(( 
<(( 

SelectItem(( 
>(( 
GetAccessTokenTypes(( ,
(((, -
)((- .
;((. /
List** 
<** 

SelectItem** 
>** 
GetTokenExpirations** ,
(**, -
)**- .
;**. /
List,, 
<,, 

SelectItem,, 
>,, 
GetTokenUsage,, &
(,,& '
),,' (
;,,( )
List.. 
<.. 

SelectItem.. 
>.. 
GetHashTypes.. %
(..% &
)..& '
;..' (
List00 
<00 

SelectItem00 
>00 
GetSecretTypes00 '
(00' (
)00( )
;00) *
List22 
<22 
string22 
>22 
GetStandardClaims22 &
(22& '
string22' -
claim22. 3
,223 4
int225 8
limit229 >
=22? @
$num22A B
)22B C
;22C D
Task44 
<44 
int44 
>44  
AddClientSecretAsync44 &
(44& '
int44' *
clientId44+ 3
,443 4
ClientSecret445 A
clientSecret44B N
)44N O
;44O P
Task66 
<66 
int66 
>66 #
DeleteClientSecretAsync66 )
(66) *
ClientSecret66* 6
clientSecret667 C
)66C D
;66D E
Task88 
<88 
	PagedList88 
<88 
ClientSecret88 #
>88# $
>88$ %!
GetClientSecretsAsync88& ;
(88; <
int88< ?
clientId88@ H
,88H I
int88J M
page88N R
=88S T
$num88U V
,88V W
int88X [
pageSize88\ d
=88e f
$num88g i
)88i j
;88j k
Task:: 
<:: 
ClientSecret:: 
>::  
GetClientSecretAsync:: /
(::/ 0
int::0 3
clientSecretId::4 B
)::B C
;::C D
Task<< 
<<< 
	PagedList<< 
<<< 
ClientClaim<< "
><<" #
><<# $ 
GetClientClaimsAsync<<% 9
(<<9 :
int<<: =
clientId<<> F
,<<F G
int<<H K
page<<L P
=<<Q R
$num<<S T
,<<T U
int<<V Y
pageSize<<Z b
=<<c d
$num<<e g
)<<g h
;<<h i
Task>> 
<>> 
	PagedList>> 
<>> 
ClientProperty>> %
>>>% &
>>>& '$
GetClientPropertiesAsync>>( @
(>>@ A
int>>A D
clientId>>E M
,>>M N
int>>O R
page>>S W
=>>X Y
$num>>Z [
,>>[ \
int>>] `
pageSize>>a i
=>>j k
$num>>l n
)>>n o
;>>o p
Task@@ 
<@@ 
ClientClaim@@ 
>@@ 
GetClientClaimAsync@@ -
(@@- .
int@@. 1
clientClaimId@@2 ?
)@@? @
;@@@ A
TaskBB 
<BB 
ClientPropertyBB 
>BB "
GetClientPropertyAsyncBB 3
(BB3 4
intBB4 7
clientPropertyIdBB8 H
)BBH I
;BBI J
TaskDD 
<DD 
intDD 
>DD 
AddClientClaimAsyncDD %
(DD% &
intDD& )
clientIdDD* 2
,DD2 3
ClientClaimDD4 ?
clientClaimDD@ K
)DDK L
;DDL M
TaskFF 
<FF 
intFF 
>FF "
AddClientPropertyAsyncFF (
(FF( )
intFF) ,
clientIdFF- 5
,FF5 6
ClientPropertyFF7 E
clientPropertiesFFF V
)FFV W
;FFW X
TaskHH 
<HH 
intHH 
>HH "
DeleteClientClaimAsyncHH (
(HH( )
ClientClaimHH) 4
clientClaimHH5 @
)HH@ A
;HHA B
TaskJJ 
<JJ 
intJJ 
>JJ %
DeleteClientPropertyAsyncJJ +
(JJ+ ,
ClientPropertyJJ, :
clientPropertyJJ; I
)JJI J
;JJJ K
TaskLL 
<LL 
intLL 
>LL 
SaveAllChangesAsyncLL %
(LL% &
)LL& '
;LL' (
}MM 
}NN ûŽ
‡C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Repositories\IdentityRepository.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Repositories4 @
{ 
public 

class 
IdentityRepository #
:$ %
IIdentityRepository& 9
{ 
private 
readonly 
AdminDbContext '

_dbContext( 2
;2 3
private 
readonly 
UserManager $
<$ %
UserIdentity% 1
>1 2
_userManager3 ?
;? @
private 
readonly 
RoleManager $
<$ %
UserIdentityRole% 5
>5 6
_roleManager7 C
;C D
public 
bool 
AutoSaveChanges #
{$ %
get& )
;) *
set+ .
;. /
}0 1
=2 3
true4 8
;8 9
public 
IdentityRepository !
(! "
AdminDbContext" 0
	dbContext1 :
,: ;
UserManager 
< 
UserIdentity $
>$ %
userManager& 1
,1 2
RoleManager 
< 
UserIdentityRole (
>( )
roleManager* 5
)5 6
{ 	

_dbContext 
= 
	dbContext "
;" #
_userManager 
= 
userManager &
;& '
_roleManager   
=   
roleManager   &
;  & '
}!! 	
public## 
Task## 
<## 
bool## 
>## 
ExistsUserAsync## )
(##) *
int##* -
userId##. 4
)##4 5
{$$ 	
return%% 

_dbContext%% 
.%% 
Users%% #
.%%# $
AnyAsync%%$ ,
(%%, -
x%%- .
=>%%/ 1
x%%2 3
.%%3 4
Id%%4 6
==%%7 9
userId%%: @
)%%@ A
;%%A B
}&& 	
public(( 
Task(( 
<(( 
bool(( 
>(( 
ExistsRoleAsync(( )
((() *
int((* -
roleId((. 4
)((4 5
{)) 	
return** 

_dbContext** 
.** 
Roles** #
.**# $
AnyAsync**$ ,
(**, -
x**- .
=>**/ 1
x**2 3
.**3 4
Id**4 6
==**7 9
roleId**: @
)**@ A
;**A B
}++ 	
public-- 
async-- 
Task-- 
<-- 
	PagedList-- #
<--# $
UserIdentity--$ 0
>--0 1
>--1 2
GetUsersAsync--3 @
(--@ A
string--A G
search--H N
,--N O
int--P S
page--T X
=--Y Z
$num--[ \
,--\ ]
int--^ a
pageSize--b j
=--k l
$num--m o
)--o p
{.. 	
var// 
	pagedList// 
=// 
new// 
	PagedList//  )
<//) *
UserIdentity//* 6
>//6 7
(//7 8
)//8 9
;//9 :

Expression00 
<00 
Func00 
<00 
UserIdentity00 (
,00( )
bool00* .
>00. /
>00/ 0
searchCondition001 @
=00A B
x00C D
=>00E G
x00H I
.00I J
UserName00J R
.00R S
Contains00S [
(00[ \
search00\ b
)00b c
||00d f
x00g h
.00h i
Email00i n
.00n o
Contains00o w
(00w x
search00x ~
)00~ 
;	00 €
var22 
users22 
=22 
await22 

_dbContext22 (
.22( )
Users22) .
.22. /
WhereIf22/ 6
(226 7
!227 8
string228 >
.22> ?
IsNullOrEmpty22? L
(22L M
search22M S
)22S T
,22T U
searchCondition22V e
)22e f
.22f g
PageBy22g m
(22m n
x22n o
=>22p r
x22s t
.22t u
Id22u w
,22w x
page22y }
,22} ~
pageSize	22 ‡
)
22‡ ˆ
.
22ˆ ‰
ToListAsync
22‰ ”
(
22” •
)
22• –
;
22– —
	pagedList44 
.44 
Data44 
.44 
AddRange44 #
(44# $
users44$ )
)44) *
;44* +
	pagedList55 
.55 

TotalCount55  
=55! "
await55# (

_dbContext55) 3
.553 4
Users554 9
.559 :
WhereIf55: A
(55A B
!55B C
string55C I
.55I J
IsNullOrEmpty55J W
(55W X
search55X ^
)55^ _
,55_ `
searchCondition55a p
)55p q
.55q r

CountAsync55r |
(55| }
)55} ~
;55~ 
	pagedList66 
.66 
PageSize66 
=66  
pageSize66! )
;66) *
return88 
	pagedList88 
;88 
}99 	
public;; 
Task;; 
<;; 
List;; 
<;; 
UserIdentityRole;; )
>;;) *
>;;* +
GetRolesAsync;;, 9
(;;9 :
);;: ;
{<< 	
return== 
_roleManager== 
.==  
Roles==  %
.==% &
ToListAsync==& 1
(==1 2
)==2 3
;==3 4
}>> 	
public@@ 
async@@ 
Task@@ 
<@@ 
	PagedList@@ #
<@@# $
UserIdentityRole@@$ 4
>@@4 5
>@@5 6
GetRolesAsync@@7 D
(@@D E
string@@E K
search@@L R
,@@R S
int@@T W
page@@X \
=@@] ^
$num@@_ `
,@@` a
int@@b e
pageSize@@f n
=@@o p
$num@@q s
)@@s t
{AA 	
varBB 
	pagedListBB 
=BB 
newBB 
	PagedListBB  )
<BB) *
UserIdentityRoleBB* :
>BB: ;
(BB; <
)BB< =
;BB= >

ExpressionDD 
<DD 
FuncDD 
<DD 
UserIdentityRoleDD ,
,DD, -
boolDD. 2
>DD2 3
>DD3 4
searchConditionDD5 D
=DDE F
xDDG H
=>DDI K
xDDL M
.DDM N
NameDDN R
.DDR S
ContainsDDS [
(DD[ \
searchDD\ b
)DDb c
;DDc d
varEE 
rolesEE 
=EE 
awaitEE 
_roleManagerEE *
.EE* +
RolesEE+ 0
.EE0 1
WhereIfEE1 8
(EE8 9
!EE9 :
stringEE: @
.EE@ A
IsNullOrEmptyEEA N
(EEN O
searchEEO U
)EEU V
,EEV W
searchConditionEEX g
)EEg h
.EEh i
PageByEEi o
(EEo p
xEEp q
=>EEr t
xEEu v
.EEv w
IdEEw y
,EEy z
pageEE{ 
,	EE €
pageSize
EE ‰
)
EE‰ Š
.
EEŠ ‹
ToListAsync
EE‹ –
(
EE– —
)
EE— ˜
;
EE˜ ™
	pagedListGG 
.GG 
DataGG 
.GG 
AddRangeGG #
(GG# $
rolesGG$ )
)GG) *
;GG* +
	pagedListHH 
.HH 

TotalCountHH  
=HH! "
awaitHH# (
_roleManagerHH) 5
.HH5 6
RolesHH6 ;
.HH; <
WhereIfHH< C
(HHC D
!HHD E
stringHHE K
.HHK L
IsNullOrEmptyHHL Y
(HHY Z
searchHHZ `
)HH` a
,HHa b
searchConditionHHc r
)HHr s
.HHs t

CountAsyncHHt ~
(HH~ 
)	HH €
;
HH€ 
	pagedListII 
.II 
PageSizeII 
=II  
pageSizeII! )
;II) *
returnKK 
	pagedListKK 
;KK 
}LL 	
publicNN 
TaskNN 
<NN 
UserIdentityRoleNN $
>NN$ %
GetRoleAsyncNN& 2
(NN2 3
UserIdentityRoleNN3 C
roleNND H
)NNH I
{OO 	
returnPP 
_roleManagerPP 
.PP  
RolesPP  %
.PP% &
WherePP& +
(PP+ ,
xPP, -
=>PP. 0
xPP1 2
.PP2 3
IdPP3 5
==PP6 8
rolePP9 =
.PP= >
IdPP> @
)PP@ A
.PPA B 
SingleOrDefaultAsyncPPB V
(PPV W
)PPW X
;PPX Y
}QQ 	
publicSS 
TaskSS 
<SS 
IdentityResultSS "
>SS" #
CreateRoleAsyncSS$ 3
(SS3 4
UserIdentityRoleSS4 D
roleSSE I
)SSI J
{TT 	
returnUU 
_roleManagerUU 
.UU  
CreateAsyncUU  +
(UU+ ,
roleUU, 0
)UU0 1
;UU1 2
}VV 	
publicXX 
asyncXX 
TaskXX 
<XX 
IdentityResultXX (
>XX( )
UpdateRoleAsyncXX* 9
(XX9 :
UserIdentityRoleXX: J
roleXXK O
)XXO P
{YY 	
varZZ 
thisRoleZZ 
=ZZ 
awaitZZ  
_roleManagerZZ! -
.ZZ- .
FindByIdAsyncZZ. ;
(ZZ; <
roleZZ< @
.ZZ@ A
IdZZA C
.ZZC D
ToStringZZD L
(ZZL M
)ZZM N
)ZZN O
;ZZO P
thisRole[[ 
.[[ 
Name[[ 
=[[ 
role[[  
.[[  !
Name[[! %
;[[% &
return]] 
await]] 
_roleManager]] %
.]]% &
UpdateAsync]]& 1
(]]1 2
thisRole]]2 :
)]]: ;
;]]; <
}^^ 	
public`` 
async`` 
Task`` 
<`` 
IdentityResult`` (
>``( )
DeleteRoleAsync``* 9
(``9 :
UserIdentityRole``: J
role``K O
)``O P
{aa 	
varbb 
thisRolebb 
=bb 
awaitbb  
_roleManagerbb! -
.bb- .
FindByIdAsyncbb. ;
(bb; <
rolebb< @
.bb@ A
IdbbA C
.bbC D
ToStringbbD L
(bbL M
)bbM N
)bbN O
;bbO P
returndd 
awaitdd 
_roleManagerdd %
.dd% &
DeleteAsyncdd& 1
(dd1 2
thisRoledd2 :
)dd: ;
;dd; <
}ee 	
publicgg 
Taskgg 
<gg 
UserIdentitygg  
>gg  !
GetUserAsyncgg" .
(gg. /
UserIdentitygg/ ;
usergg< @
)gg@ A
{hh 	
returnii 
_userManagerii 
.ii  
FindByIdAsyncii  -
(ii- .
userii. 2
.ii2 3
Idii3 5
.ii5 6
ToStringii6 >
(ii> ?
)ii? @
)ii@ A
;iiA B
}jj 	
publicll 
Taskll 
<ll 
IdentityResultll "
>ll" #
CreateUserAsyncll$ 3
(ll3 4
UserIdentityll4 @
userllA E
)llE F
{mm 	
returnnn 
_userManagernn 
.nn  
CreateAsyncnn  +
(nn+ ,
usernn, 0
)nn0 1
;nn1 2
}oo 	
publicqq 
asyncqq 
Taskqq 
<qq 
IdentityResultqq (
>qq( )
UpdateUserAsyncqq* 9
(qq9 :
UserIdentityqq: F
userqqG K
)qqK L
{rr 	
varss 
userIdentityss 
=ss 
awaitss $
_userManagerss% 1
.ss1 2
FindByIdAsyncss2 ?
(ss? @
userss@ D
.ssD E
IdssE G
.ssG H
ToStringssH P
(ssP Q
)ssQ R
)ssR S
;ssS T
iftt 
(tt 
userIdentitytt 
==tt 
nulltt  $
)tt$ %
returntt& ,
IdentityResulttt- ;
.tt; <
Failedtt< B
(ttB C
newttC F
IdentityErrorttG T
(ttT U
)ttU V
{ttW X
DescriptionttY d
=tte f
$strttg |
}tt} ~
)tt~ 
;	tt €
userIdentityvv 
.vv 
MapTovv 
(vv 
uservv #
)vv# $
;vv$ %
returnxx 
awaitxx 
_userManagerxx %
.xx% &
UpdateAsyncxx& 1
(xx1 2
userIdentityxx2 >
)xx> ?
;xx? @
}yy 	
public{{ 
async{{ 
Task{{ 
<{{ 
IdentityResult{{ (
>{{( )
CreateUserRoleAsync{{* =
({{= >
int{{> A
userId{{B H
,{{H I
int{{J M
roleId{{N T
){{T U
{|| 	
var}} 
user}} 
=}} 
await}} 
_userManager}} )
.}}) *
FindByIdAsync}}* 7
(}}7 8
userId}}8 >
.}}> ?
ToString}}? G
(}}G H
)}}H I
)}}I J
;}}J K
var~~ 

selectRole~~ 
=~~ 
await~~ "
_roleManager~~# /
.~~/ 0
FindByIdAsync~~0 =
(~~= >
roleId~~> D
.~~D E
ToString~~E M
(~~M N
)~~N O
)~~O P
;~~P Q
return
€€ 
await
€€ 
_userManager
€€ %
.
€€% &
AddToRoleAsync
€€& 4
(
€€4 5
user
€€5 9
,
€€9 :

selectRole
€€; E
.
€€E F
Name
€€F J
)
€€J K
;
€€K L
}
 	
public
ƒƒ 
async
ƒƒ 
Task
ƒƒ 
<
ƒƒ 
	PagedList
ƒƒ #
<
ƒƒ# $
UserIdentityRole
ƒƒ$ 4
>
ƒƒ4 5
>
ƒƒ5 6
GetUserRolesAsync
ƒƒ7 H
(
ƒƒH I
int
ƒƒI L
userId
ƒƒM S
,
ƒƒS T
int
ƒƒU X
page
ƒƒY ]
=
ƒƒ^ _
$num
ƒƒ` a
,
ƒƒa b
int
ƒƒc f
pageSize
ƒƒg o
=
ƒƒp q
$num
ƒƒr t
)
ƒƒt u
{
„„ 	
var
…… 
	pagedList
…… 
=
…… 
new
…… 
	PagedList
……  )
<
……) *
UserIdentityRole
……* :
>
……: ;
(
……; <
)
……< =
;
……= >
var
†† 
roles
†† 
=
†† 
from
†† 
r
†† 
in
†† !

_dbContext
††" ,
.
††, -
Roles
††- 2
join
‡‡ 
ur
‡‡ 
in
‡‡  "

_dbContext
‡‡# -
.
‡‡- .
	UserRoles
‡‡. 7
on
‡‡8 :
r
‡‡; <
.
‡‡< =
Id
‡‡= ?
equals
‡‡@ F
ur
‡‡G I
.
‡‡I J
RoleId
‡‡J P
where
ˆˆ 
ur
ˆˆ  
.
ˆˆ  !
UserId
ˆˆ! '
==
ˆˆ( *
userId
ˆˆ+ 1
select
ŠŠ 
new
ŠŠ "
UserIdentityRole
ŠŠ# 3
{
ŠŠ4 5
Id
ŠŠ6 8
=
ŠŠ9 :
r
ŠŠ; <
.
ŠŠ< =
Id
ŠŠ= ?
,
ŠŠ? @
Name
ŠŠA E
=
ŠŠF G
r
ŠŠH I
.
ŠŠI J
Name
ŠŠJ N
}
ŠŠO P
;
ŠŠP Q
var
ŒŒ 
userIdentityRoles
ŒŒ !
=
ŒŒ" #
await
ŒŒ$ )
roles
ŒŒ* /
.
ŒŒ/ 0
PageBy
ŒŒ0 6
(
ŒŒ6 7
x
ŒŒ7 8
=>
ŒŒ9 ;
x
ŒŒ< =
.
ŒŒ= >
Id
ŒŒ> @
,
ŒŒ@ A
page
ŒŒB F
,
ŒŒF G
pageSize
ŒŒH P
)
ŒŒP Q
.
 
ToListAsync
 
(
 
)
 
;
 
	pagedList
 
.
 
Data
 
.
 
AddRange
 #
(
# $
userIdentityRoles
$ 5
)
5 6
;
6 7
	pagedList
 
.
 

TotalCount
  
=
! "
await
# (
roles
) .
.
. /

CountAsync
/ 9
(
9 :
)
: ;
;
; <
	pagedList
‘‘ 
.
‘‘ 
PageSize
‘‘ 
=
‘‘  
pageSize
‘‘! )
;
‘‘) *
return
““ 
	pagedList
““ 
;
““ 
}
”” 	
public
–– 
async
–– 
Task
–– 
<
–– 
IdentityResult
–– (
>
––( )!
DeleteUserRoleAsync
––* =
(
––= >
int
––> A
userId
––B H
,
––H I
int
––J M
roleId
––N T
)
––T U
{
—— 	
var
˜˜ 
role
˜˜ 
=
˜˜ 
await
˜˜ 
_roleManager
˜˜ )
.
˜˜) *
FindByIdAsync
˜˜* 7
(
˜˜7 8
roleId
˜˜8 >
.
˜˜> ?
ToString
˜˜? G
(
˜˜G H
)
˜˜H I
)
˜˜I J
;
˜˜J K
var
™™ 
user
™™ 
=
™™ 
await
™™ 
_userManager
™™ )
.
™™) *
FindByIdAsync
™™* 7
(
™™7 8
userId
™™8 >
.
™™> ?
ToString
™™? G
(
™™G H
)
™™H I
)
™™I J
;
™™J K
return
›› 
await
›› 
_userManager
›› %
.
››% &!
RemoveFromRoleAsync
››& 9
(
››9 :
user
››: >
,
››> ?
role
››@ D
.
››D E
Name
››E I
)
››I J
;
››J K
}
œœ 	
public
žž 
async
žž 
Task
žž 
<
žž 
	PagedList
žž #
<
žž# $#
UserIdentityUserClaim
žž$ 9
>
žž9 :
>
žž: ; 
GetUserClaimsAsync
žž< N
(
žžN O
int
žžO R
userId
žžS Y
,
žžY Z
int
žž[ ^
page
žž_ c
,
žžc d
int
žže h
pageSize
žži q
)
žžq r
{
ŸŸ 	
var
   
	pagedList
   
=
   
new
   
	PagedList
    )
<
  ) *#
UserIdentityUserClaim
  * ?
>
  ? @
(
  @ A
)
  A B
;
  B C
var
¡¡ 
claims
¡¡ 
=
¡¡ 
await
¡¡ 

_dbContext
¡¡ )
.
¡¡) *

UserClaims
¡¡* 4
.
¡¡4 5
Where
¡¡5 :
(
¡¡: ;
x
¡¡; <
=>
¡¡= ?
x
¡¡@ A
.
¡¡A B
UserId
¡¡B H
==
¡¡I K
userId
¡¡L R
)
¡¡R S
.
¢¢ 
PageBy
¢¢ 
(
¢¢ 
x
¢¢ 
=>
¢¢ 
x
¢¢ 
.
¢¢ 
Id
¢¢ !
,
¢¢! "
page
¢¢# '
,
¢¢' (
pageSize
¢¢) 1
)
¢¢1 2
.
££ 
ToListAsync
££ 
(
££ 
)
££ 
;
££ 
	pagedList
¥¥ 
.
¥¥ 
Data
¥¥ 
.
¥¥ 
AddRange
¥¥ #
(
¥¥# $
claims
¥¥$ *
)
¥¥* +
;
¥¥+ ,
	pagedList
¦¦ 
.
¦¦ 

TotalCount
¦¦  
=
¦¦! "
await
¦¦# (

_dbContext
¦¦) 3
.
¦¦3 4

UserClaims
¦¦4 >
.
¦¦> ?
Where
¦¦? D
(
¦¦D E
x
¦¦E F
=>
¦¦G I
x
¦¦J K
.
¦¦K L
UserId
¦¦L R
==
¦¦S U
userId
¦¦V \
)
¦¦\ ]
.
¦¦] ^

CountAsync
¦¦^ h
(
¦¦h i
)
¦¦i j
;
¦¦j k
	pagedList
§§ 
.
§§ 
PageSize
§§ 
=
§§  
pageSize
§§! )
;
§§) *
return
©© 
	pagedList
©© 
;
©© 
}
ªª 	
public
¬¬ 
async
¬¬ 
Task
¬¬ 
<
¬¬ 
	PagedList
¬¬ #
<
¬¬# $#
UserIdentityRoleClaim
¬¬$ 9
>
¬¬9 :
>
¬¬: ; 
GetRoleClaimsAsync
¬¬< N
(
¬¬N O
int
¬¬O R
roleId
¬¬S Y
,
¬¬Y Z
int
¬¬[ ^
page
¬¬_ c
=
¬¬d e
$num
¬¬f g
,
¬¬g h
int
¬¬i l
pageSize
¬¬m u
=
¬¬v w
$num
¬¬x z
)
¬¬z {
{
­­ 	
var
®® 
	pagedList
®® 
=
®® 
new
®® 
	PagedList
®®  )
<
®®) *#
UserIdentityRoleClaim
®®* ?
>
®®? @
(
®®@ A
)
®®A B
;
®®B C
var
¯¯ 
claims
¯¯ 
=
¯¯ 
await
¯¯ 

_dbContext
¯¯ )
.
¯¯) *

RoleClaims
¯¯* 4
.
¯¯4 5
Where
¯¯5 :
(
¯¯: ;
x
¯¯; <
=>
¯¯= ?
x
¯¯@ A
.
¯¯A B
RoleId
¯¯B H
==
¯¯I K
roleId
¯¯L R
)
¯¯R S
.
°° 
PageBy
°° 
(
°° 
x
°° 
=>
°° 
x
°° 
.
°° 
Id
°° !
,
°°! "
page
°°# '
,
°°' (
pageSize
°°) 1
)
°°1 2
.
±± 
ToListAsync
±± 
(
±± 
)
±± 
;
±± 
	pagedList
³³ 
.
³³ 
Data
³³ 
.
³³ 
AddRange
³³ #
(
³³# $
claims
³³$ *
)
³³* +
;
³³+ ,
	pagedList
´´ 
.
´´ 

TotalCount
´´  
=
´´! "
await
´´# (

_dbContext
´´) 3
.
´´3 4

RoleClaims
´´4 >
.
´´> ?
Where
´´? D
(
´´D E
x
´´E F
=>
´´G I
x
´´J K
.
´´K L
RoleId
´´L R
==
´´S U
roleId
´´V \
)
´´\ ]
.
´´] ^

CountAsync
´´^ h
(
´´h i
)
´´i j
;
´´j k
	pagedList
µµ 
.
µµ 
PageSize
µµ 
=
µµ  
pageSize
µµ! )
;
µµ) *
return
·· 
	pagedList
·· 
;
·· 
}
¸¸ 	
public
ºº 
Task
ºº 
<
ºº #
UserIdentityUserClaim
ºº )
>
ºº) *
GetUserClaimAsync
ºº+ <
(
ºº< =
int
ºº= @
userId
ººA G
,
ººG H
int
ººI L
claimId
ººM T
)
ººT U
{
»» 	
return
¼¼ 

_dbContext
¼¼ 
.
¼¼ 

UserClaims
¼¼ (
.
¼¼( )
Where
¼¼) .
(
¼¼. /
x
¼¼/ 0
=>
¼¼1 3
x
¼¼4 5
.
¼¼5 6
UserId
¼¼6 <
==
¼¼= ?
userId
¼¼@ F
&&
¼¼G I
x
¼¼J K
.
¼¼K L
Id
¼¼L N
==
¼¼O Q
claimId
¼¼R Y
)
¼¼Y Z
.
½½ "
SingleOrDefaultAsync
½½ %
(
½½% &
)
½½& '
;
½½' (
}
¾¾ 	
public
ÀÀ 
Task
ÀÀ 
<
ÀÀ #
UserIdentityRoleClaim
ÀÀ )
>
ÀÀ) *
GetRoleClaimAsync
ÀÀ+ <
(
ÀÀ< =
int
ÀÀ= @
roleId
ÀÀA G
,
ÀÀG H
int
ÀÀI L
claimId
ÀÀM T
)
ÀÀT U
{
ÁÁ 	
return
ÂÂ 

_dbContext
ÂÂ 
.
ÂÂ 

RoleClaims
ÂÂ (
.
ÂÂ( )
Where
ÂÂ) .
(
ÂÂ. /
x
ÂÂ/ 0
=>
ÂÂ1 3
x
ÂÂ4 5
.
ÂÂ5 6
RoleId
ÂÂ6 <
==
ÂÂ= ?
roleId
ÂÂ@ F
&&
ÂÂG I
x
ÂÂJ K
.
ÂÂK L
Id
ÂÂL N
==
ÂÂO Q
claimId
ÂÂR Y
)
ÂÂY Z
.
ÃÃ "
SingleOrDefaultAsync
ÃÃ %
(
ÃÃ% &
)
ÃÃ& '
;
ÃÃ' (
}
ÄÄ 	
public
ÆÆ 
async
ÆÆ 
Task
ÆÆ 
<
ÆÆ 
IdentityResult
ÆÆ (
>
ÆÆ( )#
CreateUserClaimsAsync
ÆÆ* ?
(
ÆÆ? @#
UserIdentityUserClaim
ÆÆ@ U
claims
ÆÆV \
)
ÆÆ\ ]
{
ÇÇ 	
var
ÈÈ 
user
ÈÈ 
=
ÈÈ 
await
ÈÈ 
_userManager
ÈÈ )
.
ÈÈ) *
FindByIdAsync
ÈÈ* 7
(
ÈÈ7 8
claims
ÈÈ8 >
.
ÈÈ> ?
UserId
ÈÈ? E
.
ÈÈE F
ToString
ÈÈF N
(
ÈÈN O
)
ÈÈO P
)
ÈÈP Q
;
ÈÈQ R
return
ÉÉ 
await
ÉÉ 
_userManager
ÉÉ %
.
ÉÉ% &
AddClaimAsync
ÉÉ& 3
(
ÉÉ3 4
user
ÉÉ4 8
,
ÉÉ8 9
new
ÉÉ: =
Claim
ÉÉ> C
(
ÉÉC D
claims
ÉÉD J
.
ÉÉJ K
	ClaimType
ÉÉK T
,
ÉÉT U
claims
ÉÉV \
.
ÉÉ\ ]

ClaimValue
ÉÉ] g
)
ÉÉg h
)
ÉÉh i
;
ÉÉi j
}
ÊÊ 	
public
ÌÌ 
async
ÌÌ 
Task
ÌÌ 
<
ÌÌ 
IdentityResult
ÌÌ (
>
ÌÌ( )#
CreateRoleClaimsAsync
ÌÌ* ?
(
ÌÌ? @#
UserIdentityRoleClaim
ÌÌ@ U
claims
ÌÌV \
)
ÌÌ\ ]
{
ÍÍ 	
var
ÎÎ 
role
ÎÎ 
=
ÎÎ 
await
ÎÎ 
_roleManager
ÎÎ )
.
ÎÎ) *
FindByIdAsync
ÎÎ* 7
(
ÎÎ7 8
claims
ÎÎ8 >
.
ÎÎ> ?
RoleId
ÎÎ? E
.
ÎÎE F
ToString
ÎÎF N
(
ÎÎN O
)
ÎÎO P
)
ÎÎP Q
;
ÎÎQ R
return
ÏÏ 
await
ÏÏ 
_roleManager
ÏÏ %
.
ÏÏ% &
AddClaimAsync
ÏÏ& 3
(
ÏÏ3 4
role
ÏÏ4 8
,
ÏÏ8 9
new
ÏÏ: =
Claim
ÏÏ> C
(
ÏÏC D
claims
ÏÏD J
.
ÏÏJ K
	ClaimType
ÏÏK T
,
ÏÏT U
claims
ÏÏV \
.
ÏÏ\ ]

ClaimValue
ÏÏ] g
)
ÏÏg h
)
ÏÏh i
;
ÏÏi j
}
ÐÐ 	
public
ÒÒ 
async
ÒÒ 
Task
ÒÒ 
<
ÒÒ 
int
ÒÒ 
>
ÒÒ #
DeleteUserClaimsAsync
ÒÒ 4
(
ÒÒ4 5
int
ÒÒ5 8
userId
ÒÒ9 ?
,
ÒÒ? @
int
ÒÒA D
claimId
ÒÒE L
)
ÒÒL M
{
ÓÓ 	
var
ÔÔ 
	userClaim
ÔÔ 
=
ÔÔ 
await
ÔÔ !

_dbContext
ÔÔ" ,
.
ÔÔ, -

UserClaims
ÔÔ- 7
.
ÔÔ7 8
Where
ÔÔ8 =
(
ÔÔ= >
x
ÔÔ> ?
=>
ÔÔ@ B
x
ÔÔC D
.
ÔÔD E
Id
ÔÔE G
==
ÔÔH J
claimId
ÔÔK R
)
ÔÔR S
.
ÔÔS T"
SingleOrDefaultAsync
ÔÔT h
(
ÔÔh i
)
ÔÔi j
;
ÔÔj k

_dbContext
ÖÖ 
.
ÖÖ 

UserClaims
ÖÖ !
.
ÖÖ! "
Remove
ÖÖ" (
(
ÖÖ( )
	userClaim
ÖÖ) 2
)
ÖÖ2 3
;
ÖÖ3 4
return
ØØ 
await
ØØ "
AutoSaveChangesAsync
ØØ -
(
ØØ- .
)
ØØ. /
;
ØØ/ 0
}
ÙÙ 	
public
ÛÛ 
async
ÛÛ 
Task
ÛÛ 
<
ÛÛ 
int
ÛÛ 
>
ÛÛ #
DeleteRoleClaimsAsync
ÛÛ 4
(
ÛÛ4 5
int
ÛÛ5 8
roleId
ÛÛ9 ?
,
ÛÛ? @
int
ÛÛA D
claimId
ÛÛE L
)
ÛÛL M
{
ÜÜ 	
var
ÝÝ 
	roleClaim
ÝÝ 
=
ÝÝ 
await
ÝÝ !

_dbContext
ÝÝ" ,
.
ÝÝ, -

RoleClaims
ÝÝ- 7
.
ÝÝ7 8
Where
ÝÝ8 =
(
ÝÝ= >
x
ÝÝ> ?
=>
ÝÝ@ B
x
ÝÝC D
.
ÝÝD E
Id
ÝÝE G
==
ÝÝH J
claimId
ÝÝK R
)
ÝÝR S
.
ÝÝS T"
SingleOrDefaultAsync
ÝÝT h
(
ÝÝh i
)
ÝÝi j
;
ÝÝj k

_dbContext
ßß 
.
ßß 

RoleClaims
ßß !
.
ßß! "
Remove
ßß" (
(
ßß( )
	roleClaim
ßß) 2
)
ßß2 3
;
ßß3 4
return
áá 
await
áá "
AutoSaveChangesAsync
áá -
(
áá- .
)
áá. /
;
áá/ 0
}
ââ 	
public
ää 
async
ää 
Task
ää 
<
ää 
List
ää 
<
ää 
UserLoginInfo
ää ,
>
ää, -
>
ää- .#
GetUserProvidersAsync
ää/ D
(
ääD E
int
ääE H
userId
ääI O
)
ääO P
{
åå 	
var
ææ 
user
ææ 
=
ææ 
await
ææ 
_userManager
ææ )
.
ææ) *
FindByIdAsync
ææ* 7
(
ææ7 8
userId
ææ8 >
.
ææ> ?
ToString
ææ? G
(
ææG H
)
ææH I
)
ææI J
;
ææJ K
var
çç 
userLoginInfos
çç 
=
çç  
await
çç! &
_userManager
çç' 3
.
çç3 4
GetLoginsAsync
çç4 B
(
ççB C
user
ççC G
)
ççG H
;
ççH I
return
éé 
userLoginInfos
éé !
.
éé! "
ToList
éé" (
(
éé( )
)
éé) *
;
éé* +
}
êê 	
public
ìì 
Task
ìì 
<
ìì #
UserIdentityUserLogin
ìì )
>
ìì) *"
GetUserProviderAsync
ìì+ ?
(
ìì? @
int
ìì@ C
userId
ììD J
,
ììJ K
string
ììL R
providerKey
ììS ^
)
ìì^ _
{
íí 	
return
îî 

_dbContext
îî 
.
îî 

UserLogins
îî (
.
îî( )
Where
îî) .
(
îî. /
x
îî/ 0
=>
îî1 3
x
îî4 5
.
îî5 6
UserId
îî6 <
==
îî= ?
userId
îî@ F
&&
îîG I
x
îîJ K
.
îîK L
ProviderKey
îîL W
==
îîX Z
providerKey
îî[ f
)
îîf g
.
ïï "
SingleOrDefaultAsync
ïï %
(
ïï% &
)
ïï& '
;
ïï' (
}
ðð 	
public
òò 
async
òò 
Task
òò 
<
òò 
IdentityResult
òò (
>
òò( )&
DeleteUserProvidersAsync
òò* B
(
òòB C
int
òòC F
userId
òòG M
,
òòM N
string
òòO U
providerKey
òòV a
,
òòa b
string
òòc i
loginProvider
òòj w
)
òòw x
{
óó 	
var
ôô 
user
ôô 
=
ôô 
await
ôô 
_userManager
ôô )
.
ôô) *
FindByIdAsync
ôô* 7
(
ôô7 8
userId
ôô8 >
.
ôô> ?
ToString
ôô? G
(
ôôG H
)
ôôH I
)
ôôI J
;
ôôJ K
var
õõ 
login
õõ 
=
õõ 
await
õõ 

_dbContext
õõ (
.
õõ( )

UserLogins
õõ) 3
.
õõ3 4
Where
õõ4 9
(
õõ9 :
x
õõ: ;
=>
õõ< >
x
õõ? @
.
õõ@ A
UserId
õõA G
==
õõH J
userId
õõK Q
&&
õõR T
x
õõU V
.
õõV W
ProviderKey
õõW b
==
õõc e
providerKey
õõf q
&&
õõr t
x
õõu v
.
õõv w
LoginProviderõõw „
==õõ… ‡
loginProviderõõˆ •
)õõ• –
.õõ– —$
SingleOrDefaultAsyncõõ— «
(õõ« ¬
)õõ¬ ­
;õõ­ ®
return
öö 
await
öö 
_userManager
öö %
.
öö% &
RemoveLoginAsync
öö& 6
(
öö6 7
user
öö7 ;
,
öö; <
login
öö= B
.
ööB C
LoginProvider
ööC P
,
ööP Q
login
ööR W
.
ööW X
ProviderKey
ööX c
)
ööc d
;
ööd e
}
÷÷ 	
public
ùù 
async
ùù 
Task
ùù 
<
ùù 
IdentityResult
ùù (
>
ùù( )%
UserChangePasswordAsync
ùù* A
(
ùùA B
int
ùùB E
userId
ùùF L
,
ùùL M
string
ùùN T
password
ùùU ]
)
ùù] ^
{
úú 	
var
ûû 
user
ûû 
=
ûû 
await
ûû 
_userManager
ûû )
.
ûû) *
FindByIdAsync
ûû* 7
(
ûû7 8
userId
ûû8 >
.
ûû> ?
ToString
ûû? G
(
ûûG H
)
ûûH I
)
ûûI J
;
ûûJ K
var
üü 
token
üü 
=
üü 
await
üü 
_userManager
üü *
.
üü* +-
GeneratePasswordResetTokenAsync
üü+ J
(
üüJ K
user
üüK O
)
üüO P
;
üüP Q
return
þþ 
await
þþ 
_userManager
þþ %
.
þþ% & 
ResetPasswordAsync
þþ& 8
(
þþ8 9
user
þþ9 =
,
þþ= >
token
þþ? D
,
þþD E
password
þþF N
)
þþN O
;
þþO P
}
ÿÿ 	
public
 
async
 
Task
 
<
 
IdentityResult
 (
>
( )
DeleteUserAsync
* 9
(
9 :
UserIdentity
: F
user
G K
)
K L
{
‚‚ 	
var
ƒƒ 
userIdentity
ƒƒ 
=
ƒƒ 
await
ƒƒ $
_userManager
ƒƒ% 1
.
ƒƒ1 2
FindByIdAsync
ƒƒ2 ?
(
ƒƒ? @
user
ƒƒ@ D
.
ƒƒD E
Id
ƒƒE G
.
ƒƒG H
ToString
ƒƒH P
(
ƒƒP Q
)
ƒƒQ R
)
ƒƒR S
;
ƒƒS T
return
…… 
await
…… 
_userManager
…… %
.
……% &
DeleteAsync
……& 1
(
……1 2
userIdentity
……2 >
)
……> ?
;
……? @
}
†† 	
private
ˆˆ 
async
ˆˆ 
Task
ˆˆ 
<
ˆˆ 
int
ˆˆ 
>
ˆˆ "
AutoSaveChangesAsync
ˆˆ  4
(
ˆˆ4 5
)
ˆˆ5 6
{
‰‰ 	
return
ŠŠ 
AutoSaveChanges
ŠŠ "
?
ŠŠ# $
await
ŠŠ% *

_dbContext
ŠŠ+ 5
.
ŠŠ5 6
SaveChangesAsync
ŠŠ6 F
(
ŠŠF G
)
ŠŠG H
:
ŠŠI J
(
ŠŠK L
int
ŠŠL O
)
ŠŠO P
SavedStatus
ŠŠP [
.
ŠŠ[ \#
WillBeSavedExplicitly
ŠŠ\ q
;
ŠŠq r
}
‹‹ 	
}
ŒŒ 
} ²Q
C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Repositories\IdentityResourceRepository.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Repositories4 @
{ 
public 

class &
IdentityResourceRepository +
:, -'
IIdentityResourceRepository. I
{ 
private 
readonly 
AdminDbContext '

_dbContext( 2
;2 3
public 
bool 
AutoSaveChanges #
{$ %
get& )
;) *
set+ .
;. /
}0 1
=2 3
true4 8
;8 9
public &
IdentityResourceRepository )
() *
AdminDbContext* 8
	dbContext9 B
)B C
{ 	

_dbContext 
= 
	dbContext "
;" #
} 	
public 
async 
Task 
< 
	PagedList #
<# $
IdentityResource$ 4
>4 5
>5 6%
GetIdentityResourcesAsync7 P
(P Q
stringQ W
searchX ^
,^ _
int` c
paged h
=i j
$numk l
,l m
intn q
pageSizer z
={ |
$num} 
)	 €
{ 	
var 
	pagedList 
= 
new 
	PagedList  )
<) *
IdentityResource* :
>: ;
(; <
)< =
;= >

Expression 
< 
Func 
< 
IdentityResource ,
,, -
bool. 2
>2 3
>3 4
searchCondition5 D
=E F
xG H
=>I K
xL M
.M N
NameN R
.R S
ContainsS [
([ \
search\ b
)b c
;c d
var 
identityResources !
=" #
await$ )

_dbContext* 4
.4 5
IdentityResources5 F
.F G
WhereIfG N
(N O
!O P
stringP V
.V W
IsNullOrEmptyW d
(d e
searche k
)k l
,l m
searchConditionn }
)} ~
.~ 
PageBy	 …
(
… †
x
† ‡
=>
ˆ Š
x
‹ Œ
.
Œ 
Name
 ‘
,
‘ ’
page
“ —
,
— ˜
pageSize
™ ¡
)
¡ ¢
.
¢ £
ToListAsync
£ ®
(
® ¯
)
¯ °
;
° ±
	pagedList!! 
.!! 
Data!! 
.!! 
AddRange!! #
(!!# $
identityResources!!$ 5
)!!5 6
;!!6 7
	pagedList"" 
."" 

TotalCount""  
=""! "
await""# (

_dbContext"") 3
.""3 4
IdentityResources""4 E
.""E F
WhereIf""F M
(""M N
!""N O
string""O U
.""U V
IsNullOrEmpty""V c
(""c d
search""d j
)""j k
,""k l
searchCondition""m |
)""| }
.""} ~

CountAsync	""~ ˆ
(
""ˆ ‰
)
""‰ Š
;
""Š ‹
	pagedList## 
.## 
PageSize## 
=##  
pageSize##! )
;##) *
return%% 
	pagedList%% 
;%% 
}&& 	
public(( 
Task(( 
<(( 
IdentityResource(( $
>(($ %$
GetIdentityResourceAsync((& >
(((> ?
int((? B
identityResourceId((C U
)((U V
{)) 	
return** 

_dbContext** 
.** 
IdentityResources** /
.++ 
Include++ 
(++ 
x++ 
=>++ 
x++ 
.++  

UserClaims++  *
)++* +
.,, 
Where,, 
(,, 
x,, 
=>,, 
x,, 
.,, 
Id,,  
==,,! #
identityResourceId,,$ 6
),,6 7
.--  
SingleOrDefaultAsync-- %
(--% &
)--& '
;--' (
}.. 	
public00 
async00 
Task00 
<00 
int00 
>00 $
AddIdentityResourceAsync00 7
(007 8
IdentityResource008 H
identityResource00I Y
)00Y Z
{11 	

_dbContext22 
.22 
IdentityResources22 (
.22( )
Add22) ,
(22, -
identityResource22- =
)22= >
;22> ?
return44 
await44  
AutoSaveChangesAsync44 -
(44- .
)44. /
;44/ 0
}55 	
public77 
async77 
Task77 
<77 
bool77 
>77 *
CanInsertIdentityResourceAsync77  >
(77> ?
IdentityResource77? O
identityResource77P `
)77` a
{88 	
if99 
(99 
identityResource99  
.99  !
Id99! #
==99$ &
$num99' (
)99( )
{:: 
var;; 
existsWithSameName;; &
=;;' (
await;;) .

_dbContext;;/ 9
.;;9 :
IdentityResources;;: K
.;;K L
Where;;L Q
(;;Q R
x;;R S
=>;;T V
x;;W X
.;;X Y
Name;;Y ]
==;;^ `
identityResource;;a q
.;;q r
Name;;r v
);;v w
.;;w x!
SingleOrDefaultAsync	;;x Œ
(
;;Œ 
)
;; Ž
;
;;Ž 
return<< 
existsWithSameName<< )
==<<* ,
null<<- 1
;<<1 2
}== 
else>> 
{?? 
var@@ 
existsWithSameName@@ &
=@@' (
await@@) .

_dbContext@@/ 9
.@@9 :
IdentityResources@@: K
.@@K L
Where@@L Q
(@@Q R
x@@R S
=>@@T V
x@@W X
.@@X Y
Name@@Y ]
==@@^ `
identityResource@@a q
.@@q r
Name@@r v
&&@@w y
x@@z {
.@@{ |
Id@@| ~
!=	@@ 
identityResource
@@‚ ’
.
@@’ “
Id
@@“ •
)
@@• –
.
@@– —"
SingleOrDefaultAsync
@@— «
(
@@« ¬
)
@@¬ ­
;
@@­ ®
returnAA 
existsWithSameNameAA )
==AA* ,
nullAA- 1
;AA1 2
}BB 
}CC 	
privateEE 
asyncEE 
TaskEE -
!RemoveIdentityResourceClaimsAsyncEE <
(EE< =
IdentityResourceEE= M
identityResourceEEN ^
)EE^ _
{FF 	
varGG 
identityClaimsGG 
=GG  
awaitGG! &

_dbContextGG' 1
.GG1 2
IdentityClaimsGG2 @
.GG@ A
WhereGGA F
(GGF G
xGGG H
=>GGI K
xGGL M
.GGM N
IdentityResourceGGN ^
.GG^ _
IdGG_ a
==GGb d
identityResourceGGe u
.GGu v
IdGGv x
)GGx y
.GGy z
ToListAsync	GGz …
(
GG… †
)
GG† ‡
;
GG‡ ˆ

_dbContextHH 
.HH 
IdentityClaimsHH %
.HH% &
RemoveRangeHH& 1
(HH1 2
identityClaimsHH2 @
)HH@ A
;HHA B
}II 	
publicKK 
asyncKK 
TaskKK 
<KK 
intKK 
>KK '
DeleteIdentityResourceAsyncKK :
(KK: ;
IdentityResourceKK; K
identityResourceKKL \
)KK\ ]
{LL 	
varMM $
identityResourceToDeleteMM (
=MM) *
awaitMM+ 0

_dbContextMM1 ;
.MM; <
IdentityResourcesMM< M
.MMM N
WhereMMN S
(MMS T
xMMT U
=>MMV X
xMMY Z
.MMZ [
IdMM[ ]
==MM^ `
identityResourceMMa q
.MMq r
IdMMr t
)MMt u
.MMu v!
SingleOrDefaultAsync	MMv Š
(
MMŠ ‹
)
MM‹ Œ
;
MMŒ 

_dbContextOO 
.OO 
IdentityResourcesOO (
.OO( )
RemoveOO) /
(OO/ 0$
identityResourceToDeleteOO0 H
)OOH I
;OOI J
returnPP 
awaitPP  
AutoSaveChangesAsyncPP -
(PP- .
)PP. /
;PP/ 0
}QQ 	
publicSS 
asyncSS 
TaskSS 
<SS 
intSS 
>SS '
UpdateIdentityResourceAsyncSS :
(SS: ;
IdentityResourceSS; K
identityResourceSSL \
)SS\ ]
{TT 	
awaitVV -
!RemoveIdentityResourceClaimsAsyncVV 3
(VV3 4
identityResourceVV4 D
)VVD E
;VVE F

_dbContextYY 
.YY 
IdentityResourcesYY (
.YY( )
UpdateYY) /
(YY/ 0
identityResourceYY0 @
)YY@ A
;YYA B
return[[ 
await[[  
AutoSaveChangesAsync[[ -
([[- .
)[[. /
;[[/ 0
}\\ 	
private^^ 
async^^ 
Task^^ 
<^^ 
int^^ 
>^^  
AutoSaveChangesAsync^^  4
(^^4 5
)^^5 6
{__ 	
return`` 
AutoSaveChanges`` "
?``# $
await``% *

_dbContext``+ 5
.``5 6
SaveChangesAsync``6 F
(``F G
)``G H
:``I J
(``K L
int``L O
)``O P
SavedStatus``P [
.``[ \!
WillBeSavedExplicitly``\ q
;``q r
}aa 	
publiccc 
asynccc 
Taskcc 
<cc 
intcc 
>cc 
SaveAllChangesAsynccc 2
(cc2 3
)cc3 4
{dd 	
returnee 
awaitee 

_dbContextee #
.ee# $
SaveChangesAsyncee$ 4
(ee4 5
)ee5 6
;ee6 7
}ff 	
}gg 
}hh —
ˆC:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Repositories\IIdentityRepository.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Repositories4 @
{ 
public 

	interface 
IIdentityRepository (
:) *#
IBaseIdentityRepository+ B
<B C
intC F
,F G
intH K
,K L
intM P
>P Q
{ 
} 
} Û
C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Repositories\IIdentityResourceRepository.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Repositories4 @
{ 
public 

	interface '
IIdentityResourceRepository 0
{ 
Task		 
<		 
	PagedList		 
<		 
IdentityResource		 '
>		' (
>		( )%
GetIdentityResourcesAsync		* C
(		C D
string		D J
search		K Q
,		Q R
int		S V
page		W [
=		\ ]
$num		^ _
,		_ `
int		a d
pageSize		e m
=		n o
$num		p r
)		r s
;		s t
Task 
< 
IdentityResource 
> $
GetIdentityResourceAsync 7
(7 8
int8 ;
identityResourceId< N
)N O
;O P
Task 
< 
bool 
> *
CanInsertIdentityResourceAsync 1
(1 2
IdentityResource2 B
identityResourceC S
)S T
;T U
Task 
< 
int 
> $
AddIdentityResourceAsync *
(* +
IdentityResource+ ;
identityResource< L
)L M
;M N
Task 
< 
int 
> '
UpdateIdentityResourceAsync -
(- .
IdentityResource. >
identityResource? O
)O P
;P Q
Task 
< 
int 
> '
DeleteIdentityResourceAsync -
(- .
IdentityResource. >
identityResource? O
)O P
;P Q
Task 
< 
int 
> 
SaveAllChangesAsync %
(% &
)& '
;' (
} 
} ù
ƒC:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Repositories\ILogRepository.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Repositories4 @
{ 
public 

	interface 
ILogRepository #
{ 
Task		 
<		 
	PagedList		 
<		 
Log		 
>		 
>		 
GetLogsAsync		 )
(		) *
string		* 0
search		1 7
,		7 8
int		9 <
page		= A
=		B C
$num		D E
,		E F
int		G J
pageSize		K S
=		T U
$num		V X
)		X Y
;		Y Z
}

 
} Ý
ŽC:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Repositories\IPersistedGrantRepository.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Repositories4 @
{ 
public 

	interface %
IPersistedGrantRepository .
{		 
Task

 
<

 
	PagedList

 
<

 "
PersistedGrantDataView

 -
>

- .
>

. /$
GetPersitedGrantsByUsers

0 H
(

H I
string

I O
search

P V
,

V W
int

X [
page

\ `
=

a b
$num

c d
,

d e
int

f i
pageSize

j r
=

s t
$num

u w
)

w x
;

x y
Task 
< 
	PagedList 
< 
PersistedGrant %
>% &
>& '#
GetPersitedGrantsByUser( ?
(? @
string@ F
	subjectIdG P
,P Q
intR U
pageV Z
=[ \
$num] ^
,^ _
int` c
pageSized l
=m n
$numo q
)q r
;r s
Task 
< 
PersistedGrant 
> !
GetPersitedGrantAsync 2
(2 3
string3 9
key: =
)= >
;> ?
Task 
< 
int 
> %
DeletePersistedGrantAsync +
(+ ,
string, 2
key3 6
)6 7
;7 8
Task 
< 
int 
> &
DeletePersistedGrantsAsync ,
(, -
int- 0
userId1 7
)7 8
;8 9
Task 
< 
bool 
> &
ExistsPersistedGrantsAsync -
(- .
string. 4
	subjectId5 >
)> ?
;? @
Task 
< 
int 
> 
SaveAllChangesAsync %
(% &
)& '
;' (
} 
} Ü
‚C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Repositories\LogRepository.cs
	namespace

 	
MAGVA


 
.

 
Middle

 
.

 
Security

 
.

  
Admin

  %
.

% &
BusinessLogic

& 3
.

3 4
Repositories

4 @
{ 
public 

class 
LogRepository 
:  
ILogRepository! /
{ 
private 
readonly 
AdminDbContext '

_dbContext( 2
;2 3
public 
LogRepository 
( 
AdminDbContext +
	dbContext, 5
)5 6
{ 	

_dbContext 
= 
	dbContext "
;" #
} 	
public 
async 
Task 
< 
	PagedList #
<# $
Log$ '
>' (
>( )
GetLogsAsync* 6
(6 7
string7 =
search> D
,D E
intF I
pageJ N
=O P
$numQ R
,R S
intT W
pageSizeX `
=a b
$numc e
)e f
{ 	
var 
	pagedList 
= 
new 
	PagedList  )
<) *
Log* -
>- .
(. /
)/ 0
;0 1

Expression 
< 
Func 
< 
Log 
,  
bool! %
>% &
>& '
searchCondition( 7
=8 9
x: ;
=>< >
x? @
.@ A
LogEventA I
.I J
ContainsJ R
(R S
searchS Y
)Y Z
||[ ]
x^ _
._ `
Message` g
.g h
Containsh p
(p q
searchq w
)w x
||y {
x| }
.} ~
	Exception	~ ‡
.
‡ ˆ
Contains
ˆ 
(
 ‘
search
‘ —
)
— ˜
;
˜ ™
var 
logs 
= 
await 

_dbContext '
.' (
Logs( ,
. 
WhereIf 
( 
! 
string  
.  !
IsNullOrEmpty! .
(. /
search/ 5
)5 6
,6 7
searchCondition8 G
)G H
. 
PageBy 
( 
x 
=> 
x 
. 
Id !
,! "
page# '
,' (
pageSize) 1
)1 2
. 
ToListAsync 
( 
) 
; 
	pagedList 
. 
Data 
. 
AddRange #
(# $
logs$ (
)( )
;) *
	pagedList 
. 
PageSize 
=  
pageSize! )
;) *
	pagedList   
.   

TotalCount    
=  ! "
await  # (

_dbContext  ) 3
.  3 4
Logs  4 8
.  8 9
WhereIf  9 @
(  @ A
!  A B
string  B H
.  H I
IsNullOrEmpty  I V
(  V W
search  W ]
)  ] ^
,  ^ _
searchCondition  ` o
)  o p
.  p q

CountAsync  q {
(  { |
)  | }
;  } ~
return"" 
	pagedList"" 
;"" 
}## 	
}$$ 
}%% ¬_
C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Repositories\PersistedGrantRepository.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Repositories4 @
{ 
public 

class $
PersistedGrantRepository )
:* +%
IPersistedGrantRepository, E
{ 
private 
readonly 
AdminDbContext '

_dbContext( 2
;2 3
public 
bool 
AutoSaveChanges #
{$ %
get& )
;) *
set+ .
;. /
}0 1
=2 3
true4 8
;8 9
public $
PersistedGrantRepository '
(' (
AdminDbContext( 6
	dbContext7 @
)@ A
{ 	

_dbContext 
= 
	dbContext "
;" #
} 	
public 
async 
Task 
< 
	PagedList #
<# $"
PersistedGrantDataView$ :
>: ;
>; <$
GetPersitedGrantsByUsers= U
(U V
stringV \
search] c
,c d
inte h
pagei m
=n o
$nump q
,q r
ints v
pageSizew 
=
€ 
$num
‚ „
)
„ …
{ 	
var 
	pagedList 
= 
new 
	PagedList  )
<) *"
PersistedGrantDataView* @
>@ A
(A B
)B C
;C D
var !
persistedGrantByUsers %
=& '
(( )
from) -
pe. 0
in1 3

_dbContext4 >
.> ?
PersistedGrants? N
join) -
us. 0
in1 3

_dbContext4 >
.> ?
Users? D
onE G
ConvertH O
.O P
ToInt32P W
(W X
peX Z
.Z [
	SubjectId[ d
)d e
equalsf l
usm o
.o p
Idp r
intos w
perx {
from  ) -
us  . 0
in  1 3
per  4 7
.  7 8
DefaultIfEmpty  8 F
(  F G
)  G H
select!!) /
new!!0 3"
PersistedGrantDataView!!4 J
{"") *
	SubjectId##- 6
=##7 8
pe##9 ;
.##; <
	SubjectId##< E
,##E F
SubjectName$$- 8
=$$9 :
us$$; =
==$$> @
null$$A E
?$$F G
string$$H N
.$$N O
Empty$$O T
:$$U V
us$$W Y
.$$Y Z
UserName$$Z b
}%%) *
)%%* +
.&& 
Distinct&& 
(&& 
)&& 
;&& 

Expression(( 
<(( 
Func(( 
<(( "
PersistedGrantDataView(( 2
,((2 3
bool((4 8
>((8 9
>((9 :
searchCondition((; J
=((K L
x((M N
=>((O Q
x((R S
.((S T
	SubjectId((T ]
.((] ^
Contains((^ f
(((f g
search((g m
)((m n
||((o q
x((r s
.((s t
SubjectName((t 
.	(( €
Contains
((€ ˆ
(
((ˆ ‰
search
((‰ 
)
(( 
;
(( ‘
var** 
persistedGrantsData** #
=**$ %
await**& +!
persistedGrantByUsers**, A
.**A B
WhereIf**B I
(**I J
!**J K
string**K Q
.**Q R
IsNullOrEmpty**R _
(**_ `
search**` f
)**f g
,**g h
searchCondition**i x
)**x y
.**y z
PageBy	**z €
(
**€ 
x
** ‚
=>
**ƒ …
x
**† ‡
.
**‡ ˆ
	SubjectId
**ˆ ‘
,
**‘ ’
page
**“ —
,
**— ˜
pageSize
**™ ¡
)
**¡ ¢
.
**¢ £
ToListAsync
**£ ®
(
**® ¯
)
**¯ °
;
**° ±
var++ $
persistedGrantsDataCount++ (
=++) *
await+++ 0!
persistedGrantByUsers++1 F
.++F G
WhereIf++G N
(++N O
!++O P
string++P V
.++V W
IsNullOrEmpty++W d
(++d e
search++e k
)++k l
,++l m
searchCondition++n }
)++} ~
.++~ 

CountAsync	++ ‰
(
++‰ Š
)
++Š ‹
;
++‹ Œ
	pagedList-- 
.-- 
Data-- 
.-- 
AddRange-- #
(--# $
persistedGrantsData--$ 7
)--7 8
;--8 9
	pagedList.. 
... 

TotalCount..  
=..! "$
persistedGrantsDataCount..# ;
;..; <
	pagedList// 
.// 
PageSize// 
=//  
pageSize//! )
;//) *
return11 
	pagedList11 
;11 
}22 	
public44 
async44 
Task44 
<44 
	PagedList44 #
<44# $
PersistedGrant44$ 2
>442 3
>443 4#
GetPersitedGrantsByUser445 L
(44L M
string44M S
	subjectId44T ]
,44] ^
int44_ b
page44c g
=44h i
$num44j k
,44k l
int44m p
pageSize44q y
=44z {
$num44| ~
)44~ 
{55 	
var66 
	pagedList66 
=66 
new66 
	PagedList66  )
<66) *
PersistedGrant66* 8
>668 9
(669 :
)66: ;
;66; <
var88 
persistedGrantsData88 #
=88$ %
await88& +

_dbContext88, 6
.886 7
PersistedGrants887 F
.88F G
Where88G L
(88L M
x88M N
=>88O Q
x88R S
.88S T
	SubjectId88T ]
==88^ `
	subjectId88a j
)88j k
.88k l
Select88l r
(88r s
x88s t
=>88u w
new88x {
PersistedGrant	88| Š
(
88Š ‹
)
88‹ Œ
{99 
	SubjectId:: 
=:: 
x:: 
.:: 
	SubjectId:: '
,::' (
Type;; 
=;; 
x;; 
.;; 
Type;; 
,;; 
Key<< 
=<< 
x<< 
.<< 
Key<< 
,<< 
ClientId== 
=== 
x== 
.== 
ClientId== %
,==% &
Data>> 
=>> 
x>> 
.>> 
Data>> 
,>> 

Expiration?? 
=?? 
x?? 
.?? 

Expiration?? )
,??) *
CreationTime@@ 
=@@ 
x@@  
.@@  !
CreationTime@@! -
}AA 
)AA 
.AA 
PageByAA 
(AA 
xAA 
=>AA 
xAA 
.AA 
	SubjectIdAA &
,AA& '
pageAA( ,
,AA, -
pageSizeAA. 6
)AA6 7
.AA7 8
ToListAsyncAA8 C
(AAC D
)AAD E
;AAE F
varCC  
persistedGrantsCountCC $
=CC% &
awaitCC' ,

_dbContextCC- 7
.CC7 8
PersistedGrantsCC8 G
.CCG H
WhereCCH M
(CCM N
xCCN O
=>CCP R
xCCS T
.CCT U
	SubjectIdCCU ^
==CC_ a
	subjectIdCCb k
)CCk l
.CCl m

CountAsyncCCm w
(CCw x
)CCx y
;CCy z
	pagedListEE 
.EE 
DataEE 
.EE 
AddRangeEE #
(EE# $
persistedGrantsDataEE$ 7
)EE7 8
;EE8 9
	pagedListFF 
.FF 

TotalCountFF  
=FF! " 
persistedGrantsCountFF# 7
;FF7 8
	pagedListGG 
.GG 
PageSizeGG 
=GG  
pageSizeGG! )
;GG) *
returnII 
	pagedListII 
;II 
}JJ 	
publicLL 
TaskLL 
<LL 
PersistedGrantLL "
>LL" #!
GetPersitedGrantAsyncLL$ 9
(LL9 :
stringLL: @
keyLLA D
)LLD E
{MM 	
returnNN 

_dbContextNN 
.NN 
PersistedGrantsNN -
.NN- . 
SingleOrDefaultAsyncNN. B
(NNB C
xNNC D
=>NNE G
xNNH I
.NNI J
KeyNNJ M
==NNN P
keyNNQ T
)NNT U
;NNU V
}OO 	
publicQQ 
asyncQQ 
TaskQQ 
<QQ 
intQQ 
>QQ %
DeletePersistedGrantAsyncQQ 8
(QQ8 9
stringQQ9 ?
keyQQ@ C
)QQC D
{RR 	
varSS 
persistedGrantSS 
=SS  
awaitSS! &

_dbContextSS' 1
.SS1 2
PersistedGrantsSS2 A
.SSA B
WhereSSB G
(SSG H
xSSH I
=>SSJ L
xSSM N
.SSN O
KeySSO R
==SSS U
keySSV Y
)SSY Z
.SSZ [ 
SingleOrDefaultAsyncSS[ o
(SSo p
)SSp q
;SSq r

_dbContextUU 
.UU 
PersistedGrantsUU &
.UU& '
RemoveUU' -
(UU- .
persistedGrantUU. <
)UU< =
;UU= >
returnWW 
awaitWW  
AutoSaveChangesAsyncWW -
(WW- .
)WW. /
;WW/ 0
}XX 	
publicZZ 
TaskZZ 
<ZZ 
boolZZ 
>ZZ &
ExistsPersistedGrantsAsyncZZ 4
(ZZ4 5
stringZZ5 ;
	subjectIdZZ< E
)ZZE F
{[[ 	
return\\ 

_dbContext\\ 
.\\ 
PersistedGrants\\ -
.\\- .
AnyAsync\\. 6
(\\6 7
x\\7 8
=>\\9 ;
x\\< =
.\\= >
	SubjectId\\> G
==\\H J
	subjectId\\K T
)\\T U
;\\U V
}]] 	
public__ 
async__ 
Task__ 
<__ 
int__ 
>__ &
DeletePersistedGrantsAsync__ 9
(__9 :
int__: =
userId__> D
)__D E
{`` 	
varaa 
grantsaa 
=aa 
awaitaa 

_dbContextaa )
.aa) *
PersistedGrantsaa* 9
.aa9 :
Whereaa: ?
(aa? @
xaa@ A
=>aaB D
xaaE F
.aaF G
	SubjectIdaaG P
==aaQ S
userIdaaT Z
.aaZ [
ToStringaa[ c
(aac d
)aad e
)aae f
.aaf g
ToListAsyncaag r
(aar s
)aas t
;aat u

_dbContextcc 
.cc 
RemoveRangecc "
(cc" #
grantscc# )
)cc) *
;cc* +
returnee 
awaitee  
AutoSaveChangesAsyncee -
(ee- .
)ee. /
;ee/ 0
}ff 	
privatehh 
asynchh 
Taskhh 
<hh 
inthh 
>hh  
AutoSaveChangesAsynchh  4
(hh4 5
)hh5 6
{ii 	
returnjj 
AutoSaveChangesjj "
?jj# $
awaitjj% *

_dbContextjj+ 5
.jj5 6
SaveChangesAsyncjj6 F
(jjF G
)jjG H
:jjI J
(jjK L
intjjL O
)jjO P
SavedStatusjjP [
.jj[ \!
WillBeSavedExplicitlyjj\ q
;jjq r
}kk 	
publicmm 
asyncmm 
Taskmm 
<mm 
intmm 
>mm 
SaveAllChangesAsyncmm 2
(mm2 3
)mm3 4
{nn 	
returnoo 
awaitoo 

_dbContextoo #
.oo# $
SaveChangesAsyncoo$ 4
(oo4 5
)oo5 6
;oo6 7
}pp 	
}qq 
}rr ³#
C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Resources\ApiResourceServiceResources.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
	Resources4 =
{ 
public 

class '
ApiResourceServiceResources ,
:- .(
IApiResourceServiceResources/ K
{ 
public 
virtual 
ResourceMessage &#
ApiResourceDoesNotExist' >
(> ?
)? @
{ 	
return		 
new		 
ResourceMessage		 &
(		& '
)		' (
{

 
Code 
= 
nameof 
( #
ApiResourceDoesNotExist 5
)5 6
,6 7
Description 
= &
ApiResourceServiceResource 8
.8 9#
ApiResourceDoesNotExist9 P
} 
; 
} 	
public 
virtual 
ResourceMessage &"
ApiResourceExistsValue' =
(= >
)> ?
{ 	
return 
new 
ResourceMessage &
(& '
)' (
{ 
Code 
= 
nameof 
( "
ApiResourceExistsValue 4
)4 5
,5 6
Description 
= &
ApiResourceServiceResource 8
.8 9"
ApiResourceExistsValue9 O
} 
; 
} 	
public 
virtual 
ResourceMessage & 
ApiResourceExistsKey' ;
(; <
)< =
{ 	
return 
new 
ResourceMessage &
(& '
)' (
{ 
Code 
= 
nameof 
(  
ApiResourceExistsKey 2
)2 3
,3 4
Description 
= &
ApiResourceServiceResource 8
.8 9 
ApiResourceExistsKey9 M
} 
; 
}   	
public"" 
virtual"" 
ResourceMessage"" & 
ApiScopeDoesNotExist""' ;
(""; <
)""< =
{## 	
return$$ 
new$$ 
ResourceMessage$$ &
($$& '
)$$' (
{%% 
Code&& 
=&& 
nameof&& 
(&&  
ApiScopeDoesNotExist&& 2
)&&2 3
,&&3 4
Description'' 
='' &
ApiResourceServiceResource'' 8
.''8 9 
ApiScopeDoesNotExist''9 M
}(( 
;(( 
})) 	
public++ 
virtual++ 
ResourceMessage++ &
ApiScopeExistsValue++' :
(++: ;
)++; <
{,, 	
return-- 
new-- 
ResourceMessage-- &
(--& '
)--' (
{.. 
Code// 
=// 
nameof// 
(// 
ApiScopeExistsValue// 1
)//1 2
,//2 3
Description00 
=00 &
ApiResourceServiceResource00 8
.008 9
ApiScopeExistsValue009 L
}11 
;11 
}22 	
public44 
virtual44 
ResourceMessage44 &
ApiScopeExistsKey44' 8
(448 9
)449 :
{55 	
return66 
new66 
ResourceMessage66 &
(66& '
)66' (
{77 
Code88 
=88 
nameof88 
(88 
ApiScopeExistsKey88 /
)88/ 0
,880 1
Description99 
=99 &
ApiResourceServiceResource99 8
.998 9
ApiScopeExistsKey999 J
}:: 
;:: 
};; 	
public== 
virtual== 
ResourceMessage== &!
ApiSecretDoesNotExist==' <
(==< =
)=== >
{>> 	
return?? 
new?? 
ResourceMessage?? &
(??& '
)??' (
{@@ 
CodeAA 
=AA 
nameofAA 
(AA !
ApiSecretDoesNotExistAA 3
)AA3 4
,AA4 5
DescriptionBB 
=BB &
ApiResourceServiceResourceBB 8
.BB8 9!
ApiSecretDoesNotExistBB9 N
}CC 
;CC 
}DD 	
}EE 
}FF Ó
ˆC:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Resources\ClientServiceResources.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
	Resources4 =
{ 
public 

class "
ClientServiceResources '
:( )#
IClientServiceResources* A
{ 
public 
virtual 
ResourceMessage &#
ClientClaimDoesNotExist' >
(> ?
)? @
{ 	
return		 
new		 
ResourceMessage		 &
(		& '
)		' (
{

 
Code 
= 
nameof 
( #
ClientClaimDoesNotExist 5
)5 6
,6 7
Description 
= !
ClientServiceResource 3
.3 4#
ClientClaimDoesNotExist4 K
} 
; 
} 	
public 
virtual 
ResourceMessage &
ClientDoesNotExist' 9
(9 :
): ;
{ 	
return 
new 
ResourceMessage &
(& '
)' (
{ 
Code 
= 
nameof 
( 
ClientDoesNotExist 0
)0 1
,1 2
Description 
= !
ClientServiceResource 3
.3 4
ClientDoesNotExist4 F
} 
; 
} 	
public 
virtual 
ResourceMessage &
ClientExistsKey' 6
(6 7
)7 8
{ 	
return 
new 
ResourceMessage &
(& '
)' (
{ 
Code 
= 
nameof 
( 
ClientExistsKey -
)- .
,. /
Description 
= !
ClientServiceResource 3
.3 4
ClientExistsKey4 C
} 
; 
}   	
public"" 
virtual"" 
ResourceMessage"" &
ClientExistsValue""' 8
(""8 9
)""9 :
{## 	
return$$ 
new$$ 
ResourceMessage$$ &
($$& '
)$$' (
{%% 
Code&& 
=&& 
nameof&& 
(&& 
ClientExistsValue&& /
)&&/ 0
,&&0 1
Description'' 
='' !
ClientServiceResource'' 3
.''3 4
ClientExistsValue''4 E
}(( 
;(( 
})) 	
public++ 
virtual++ 
ResourceMessage++ &&
ClientPropertyDoesNotExist++' A
(++A B
)++B C
{,, 	
return-- 
new-- 
ResourceMessage-- &
(--& '
)--' (
{.. 
Code// 
=// 
nameof// 
(// &
ClientPropertyDoesNotExist// 8
)//8 9
,//9 :
Description00 
=00 !
ClientServiceResource00 3
.003 4&
ClientPropertyDoesNotExist004 N
}11 
;11 
}22 	
public44 
virtual44 
ResourceMessage44 &$
ClientSecretDoesNotExist44' ?
(44? @
)44@ A
{55 	
return66 
new66 
ResourceMessage66 &
(66& '
)66' (
{77 
Code88 
=88 
nameof88 
(88 $
ClientSecretDoesNotExist88 6
)886 7
,887 8
Description99 
=99 !
ClientServiceResource99 3
.993 4$
ClientSecretDoesNotExist994 L
}:: 
;:: 
};; 	
}<< 
}== ö	
ŽC:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Resources\IApiResourceServiceResources.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
	Resources4 =
{ 
public 

	interface (
IApiResourceServiceResources 1
{ 
ResourceMessage #
ApiResourceDoesNotExist /
(/ 0
)0 1
;1 2
ResourceMessage "
ApiResourceExistsValue .
(. /
)/ 0
;0 1
ResourceMessage		  
ApiResourceExistsKey		 ,
(		, -
)		- .
;		. /
ResourceMessage

  
ApiScopeDoesNotExist

 ,
(

, -
)

- .
;

. /
ResourceMessage 
ApiScopeExistsValue +
(+ ,
), -
;- .
ResourceMessage 
ApiScopeExistsKey )
() *
)* +
;+ ,
ResourceMessage !
ApiSecretDoesNotExist -
(- .
). /
;/ 0
} 
} 	
‰C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Resources\IClientServiceResources.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
	Resources4 =
{ 
public 

	interface #
IClientServiceResources ,
{ 
ResourceMessage #
ClientClaimDoesNotExist /
(/ 0
)0 1
;1 2
ResourceMessage		 
ClientDoesNotExist		 *
(		* +
)		+ ,
;		, -
ResourceMessage 
ClientExistsKey '
(' (
)( )
;) *
ResourceMessage 
ClientExistsValue )
() *
)* +
;+ ,
ResourceMessage &
ClientPropertyDoesNotExist 2
(2 3
)3 4
;4 5
ResourceMessage $
ClientSecretDoesNotExist 0
(0 1
)1 2
;2 3
} 
} ¯
’C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Resources\IdentityResourceServiceResources.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
	Resources4 =
{ 
public 

class ,
 IdentityResourceServiceResources 1
:2 3-
!IIdentityResourceServiceResources4 U
{ 
public 
virtual 
ResourceMessage &(
IdentityResourceDoesNotExist' C
(C D
)D E
{ 	
return		 
new		 
ResourceMessage		 &
(		& '
)		' (
{

 
Code 
= 
nameof 
( (
IdentityResourceDoesNotExist :
): ;
,; <
Description 
= +
IdentityResourceServiceResource =
.= >(
IdentityResourceDoesNotExist> Z
} 
; 
} 	
public 
virtual 
ResourceMessage &%
IdentityResourceExistsKey' @
(@ A
)A B
{ 	
return 
new 
ResourceMessage &
(& '
)' (
{ 
Code 
= 
nameof 
( %
IdentityResourceExistsKey 7
)7 8
,8 9
Description 
= +
IdentityResourceServiceResource =
.= >%
IdentityResourceExistsKey> W
} 
; 
} 	
public 
virtual 
ResourceMessage &'
IdentityResourceExistsValue' B
(B C
)C D
{ 	
return 
new 
ResourceMessage &
(& '
)' (
{ 
Code 
= 
nameof 
( '
IdentityResourceExistsValue 9
)9 :
,: ;
Description 
= +
IdentityResourceServiceResource =
.= >'
IdentityResourceExistsValue> Y
} 
; 
}   	
}!! 
}"" î^
ŠC:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Resources\IdentityServiceResources.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
	Resources4 =
{ 
public 

class $
IdentityServiceResources )
:* +%
IIdentityServiceResources, E
{ 
public 
virtual 
ResourceMessage &
UserUpdateFailed' 7
(7 8
)8 9
{ 	
return		 
new		 
ResourceMessage		 &
(		& '
)		' (
{

 
Code 
= 
nameof 
( 
UserUpdateFailed .
). /
,/ 0
Description 
= #
IdentityServiceResource 5
.5 6
UserUpdateFailed6 F
} 
; 
} 	
public 
virtual 
ResourceMessage & 
UserRoleDeleteFailed' ;
(; <
)< =
{ 	
return 
new 
ResourceMessage &
(& '
)' (
{ 
Code 
= 
nameof 
(  
UserRoleDeleteFailed 2
)2 3
,3 4
Description 
= #
IdentityServiceResource 5
.5 6 
UserRoleDeleteFailed6 J
} 
; 
} 	
public 
virtual 
ResourceMessage & 
UserRoleCreateFailed' ;
(; <
)< =
{ 	
return 
new 
ResourceMessage &
(& '
)' (
{ 
Code 
= 
nameof 
(  
UserRoleCreateFailed 2
)2 3
,3 4
Description 
= #
IdentityServiceResource 5
.5 6 
UserRoleCreateFailed6 J
} 
; 
}   	
public"" 
virtual"" 
ResourceMessage"" &$
UserProviderDoesNotExist""' ?
(""? @
)""@ A
{## 	
return$$ 
new$$ 
ResourceMessage$$ &
($$& '
)$$' (
{%% 
Code&& 
=&& 
nameof&& 
(&& $
UserProviderDoesNotExist&& 6
)&&6 7
,&&7 8
Description'' 
='' #
IdentityServiceResource'' 5
.''5 6$
UserProviderDoesNotExist''6 N
}(( 
;(( 
})) 	
public++ 
virtual++ 
ResourceMessage++ &$
UserProviderDeleteFailed++' ?
(++? @
)++@ A
{,, 	
return-- 
new-- 
ResourceMessage-- &
(--& '
)--' (
{.. 
Code// 
=// 
nameof// 
(// $
UserProviderDeleteFailed// 6
)//6 7
,//7 8
Description00 
=00 #
IdentityServiceResource00 5
.005 6$
UserProviderDeleteFailed006 N
}11 
;11 
}22 	
public44 
virtual44 
ResourceMessage44 &$
UserChangePasswordFailed44' ?
(44? @
)44@ A
{55 	
return66 
new66 
ResourceMessage66 &
(66& '
)66' (
{77 
Code88 
=88 
nameof88 
(88 $
UserChangePasswordFailed88 6
)886 7
,887 8
Description99 
=99 #
IdentityServiceResource99 5
.995 6$
UserChangePasswordFailed996 N
}:: 
;:: 
};; 	
public== 
virtual== 
ResourceMessage== &
UserDoesNotExist==' 7
(==7 8
)==8 9
{>> 	
return?? 
new?? 
ResourceMessage?? &
(??& '
)??' (
{@@ 
CodeAA 
=AA 
nameofAA 
(AA 
UserDoesNotExistAA .
)AA. /
,AA/ 0
DescriptionBB 
=BB #
IdentityServiceResourceBB 5
.BB5 6
UserDoesNotExistBB6 F
}CC 
;CC 
}DD 	
publicFF 
virtualFF 
ResourceMessageFF &
UserDeleteFailedFF' 7
(FF7 8
)FF8 9
{GG 	
returnHH 
newHH 
ResourceMessageHH &
(HH& '
)HH' (
{II 
CodeJJ 
=JJ 
nameofJJ 
(JJ 
UserDeleteFailedJJ .
)JJ. /
,JJ/ 0
DescriptionKK 
=KK #
IdentityServiceResourceKK 5
.KK5 6
UserDeleteFailedKK6 F
}LL 
;LL 
}MM 	
publicOO 
virtualOO 
ResourceMessageOO &
UserCreateFailedOO' 7
(OO7 8
)OO8 9
{PP 	
returnQQ 
newQQ 
ResourceMessageQQ &
(QQ& '
)QQ' (
{RR 
CodeSS 
=SS 
nameofSS 
(SS 
UserCreateFailedSS .
)SS. /
,SS/ 0
DescriptionTT 
=TT #
IdentityServiceResourceTT 5
.TT5 6
UserCreateFailedTT6 F
}UU 
;UU 
}VV 	
publicXX 
virtualXX 
ResourceMessageXX &"
UserClaimsDeleteFailedXX' =
(XX= >
)XX> ?
{YY 	
returnZZ 
newZZ 
ResourceMessageZZ &
(ZZ& '
)ZZ' (
{[[ 
Code\\ 
=\\ 
nameof\\ 
(\\ "
UserClaimsDeleteFailed\\ 4
)\\4 5
,\\5 6
Description]] 
=]] #
IdentityServiceResource]] 5
.]]5 6"
UserClaimsDeleteFailed]]6 L
}^^ 
;^^ 
}__ 	
publicaa 
virtualaa 
ResourceMessageaa &"
UserClaimsCreateFailedaa' =
(aa= >
)aa> ?
{bb 	
returncc 
newcc 
ResourceMessagecc &
(cc& '
)cc' (
{dd 
Codeee 
=ee 
nameofee 
(ee "
UserClaimsCreateFailedee 4
)ee4 5
,ee5 6
Descriptionff 
=ff #
IdentityServiceResourceff 5
.ff5 6"
UserClaimsCreateFailedff6 L
}gg 
;gg 
}hh 	
publicjj 
virtualjj 
ResourceMessagejj &!
UserClaimDoesNotExistjj' <
(jj< =
)jj= >
{kk 	
returnll 
newll 
ResourceMessagell &
(ll& '
)ll' (
{mm 
Codenn 
=nn 
nameofnn 
(nn !
UserClaimDoesNotExistnn 3
)nn3 4
,nn4 5
Descriptionoo 
=oo #
IdentityServiceResourceoo 5
.oo5 6!
UserClaimDoesNotExistoo6 K
}pp 
;pp 
}qq 	
publicss 
virtualss 
ResourceMessagess &
RoleUpdateFailedss' 7
(ss7 8
)ss8 9
{tt 	
returnuu 
newuu 
ResourceMessageuu &
(uu& '
)uu' (
{vv 
Codeww 
=ww 
nameofww 
(ww 
RoleUpdateFailedww .
)ww. /
,ww/ 0
Descriptionxx 
=xx #
IdentityServiceResourcexx 5
.xx5 6
RoleUpdateFailedxx6 F
}yy 
;yy 
}zz 	
public|| 
virtual|| 
ResourceMessage|| &
RoleDoesNotExist||' 7
(||7 8
)||8 9
{}} 	
return~~ 
new~~ 
ResourceMessage~~ &
(~~& '
)~~' (
{ 
Code
€€ 
=
€€ 
nameof
€€ 
(
€€ 
RoleDoesNotExist
€€ .
)
€€. /
,
€€/ 0
Description
 
=
 %
IdentityServiceResource
 5
.
5 6
RoleDoesNotExist
6 F
}
‚‚ 
;
‚‚ 
}
ƒƒ 	
public
…… 
virtual
…… 
ResourceMessage
…… &
RoleDeleteFailed
……' 7
(
……7 8
)
……8 9
{
†† 	
return
‡‡ 
new
‡‡ 
ResourceMessage
‡‡ &
(
‡‡& '
)
‡‡' (
{
ˆˆ 
Code
‰‰ 
=
‰‰ 
nameof
‰‰ 
(
‰‰ 
RoleDeleteFailed
‰‰ .
)
‰‰. /
,
‰‰/ 0
Description
ŠŠ 
=
ŠŠ %
IdentityServiceResource
ŠŠ 5
.
ŠŠ5 6
RoleDeleteFailed
ŠŠ6 F
}
‹‹ 
;
‹‹ 
}
ŒŒ 	
public
ŽŽ 
virtual
ŽŽ 
ResourceMessage
ŽŽ &
RoleCreateFailed
ŽŽ' 7
(
ŽŽ7 8
)
ŽŽ8 9
{
 	
return
 
new
 
ResourceMessage
 &
(
& '
)
' (
{
‘‘ 
Code
’’ 
=
’’ 
nameof
’’ 
(
’’ 
RoleCreateFailed
’’ .
)
’’. /
,
’’/ 0
Description
““ 
=
““ %
IdentityServiceResource
““ 5
.
““5 6
RoleCreateFailed
““6 F
}
”” 
;
”” 
}
•• 	
public
—— 
virtual
—— 
ResourceMessage
—— &$
RoleClaimsDeleteFailed
——' =
(
——= >
)
——> ?
{
˜˜ 	
return
™™ 
new
™™ 
ResourceMessage
™™ &
(
™™& '
)
™™' (
{
šš 
Code
›› 
=
›› 
nameof
›› 
(
›› $
RoleClaimsDeleteFailed
›› 4
)
››4 5
,
››5 6
Description
œœ 
=
œœ %
IdentityServiceResource
œœ 5
.
œœ5 6$
RoleClaimsDeleteFailed
œœ6 L
}
 
;
 
}
žž 	
public
   
virtual
   
ResourceMessage
   &$
RoleClaimsCreateFailed
  ' =
(
  = >
)
  > ?
{
¡¡ 	
return
¢¢ 
new
¢¢ 
ResourceMessage
¢¢ &
(
¢¢& '
)
¢¢' (
{
££ 
Code
¤¤ 
=
¤¤ 
nameof
¤¤ 
(
¤¤ $
RoleClaimsCreateFailed
¤¤ 4
)
¤¤4 5
,
¤¤5 6
Description
¥¥ 
=
¥¥ %
IdentityServiceResource
¥¥ 5
.
¥¥5 6$
RoleClaimsCreateFailed
¥¥6 L
}
¦¦ 
;
¦¦ 
}
§§ 	
public
©© 
virtual
©© 
ResourceMessage
©© &#
RoleClaimDoesNotExist
©©' <
(
©©< =
)
©©= >
{
ªª 	
return
«« 
new
«« 
ResourceMessage
«« &
(
««& '
)
««' (
{
¬¬ 
Code
­­ 
=
­­ 
nameof
­­ 
(
­­ #
RoleClaimDoesNotExist
­­ 3
)
­­3 4
,
­­4 5
Description
®® 
=
®® %
IdentityServiceResource
®® 5
.
®®5 6#
RoleClaimDoesNotExist
®®6 K
}
¯¯ 
;
¯¯ 
}
°° 	
public
²² 
virtual
²² 
ResourceMessage
²² &
IdentityErrorKey
²²' 7
(
²²7 8
)
²²8 9
{
³³ 	
return
´´ 
new
´´ 
ResourceMessage
´´ &
(
´´& '
)
´´' (
{
µµ 
Code
¶¶ 
=
¶¶ 
nameof
¶¶ 
(
¶¶ 
IdentityErrorKey
¶¶ .
)
¶¶. /
,
¶¶/ 0
Description
·· 
=
·· %
IdentityServiceResource
·· 5
.
··5 6
IdentityErrorKey
··6 F
}
¸¸ 
;
¸¸ 
}
¹¹ 	
}
ºº 
}»» â
“C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Resources\IIdentityResourceServiceResources.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
	Resources4 =
{ 
public 

	interface -
!IIdentityResourceServiceResources 6
{ 
ResourceMessage (
IdentityResourceDoesNotExist 4
(4 5
)5 6
;6 7
ResourceMessage		 %
IdentityResourceExistsKey		 1
(		1 2
)		2 3
;		3 4
ResourceMessage '
IdentityResourceExistsValue 3
(3 4
)4 5
;5 6
} 
} Ü
‹C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Resources\IIdentityServiceResources.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
	Resources4 =
{ 
public 

	interface %
IIdentityServiceResources .
{ 
ResourceMessage 
IdentityErrorKey (
(( )
)) *
;* +
ResourceMessage !
RoleClaimDoesNotExist -
(- .
). /
;/ 0
ResourceMessage		 "
RoleClaimsCreateFailed		 .
(		. /
)		/ 0
;		0 1
ResourceMessage

 "
RoleClaimsDeleteFailed

 .
(

. /
)

/ 0
;

0 1
ResourceMessage 
RoleCreateFailed (
(( )
)) *
;* +
ResourceMessage 
RoleDeleteFailed (
(( )
)) *
;* +
ResourceMessage 
RoleDoesNotExist (
(( )
)) *
;* +
ResourceMessage 
RoleUpdateFailed (
(( )
)) *
;* +
ResourceMessage !
UserClaimDoesNotExist -
(- .
). /
;/ 0
ResourceMessage "
UserClaimsCreateFailed .
(. /
)/ 0
;0 1
ResourceMessage "
UserClaimsDeleteFailed .
(. /
)/ 0
;0 1
ResourceMessage 
UserCreateFailed (
(( )
)) *
;* +
ResourceMessage 
UserDeleteFailed (
(( )
)) *
;* +
ResourceMessage 
UserDoesNotExist (
(( )
)) *
;* +
ResourceMessage $
UserChangePasswordFailed 0
(0 1
)1 2
;2 3
ResourceMessage $
UserProviderDeleteFailed 0
(0 1
)1 2
;2 3
ResourceMessage $
UserProviderDoesNotExist 0
(0 1
)1 2
;2 3
ResourceMessage  
UserRoleCreateFailed ,
(, -
)- .
;. /
ResourceMessage  
UserRoleDeleteFailed ,
(, -
)- .
;. /
ResourceMessage 
UserUpdateFailed (
(( )
)) *
;* +
} 
} ÷
‘C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Resources\IPersistedGrantServiceResources.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
	Resources4 =
{ 
public 

	interface +
IPersistedGrantServiceResources 4
{ 
ResourceMessage &
PersistedGrantDoesNotExist 2
(2 3
)3 4
;4 5
ResourceMessage		 3
'PersistedGrantWithSubjectIdDoesNotExist		 ?
(		? @
)		@ A
;		A B
}

 
} ù
C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Resources\PersistedGrantServiceResources.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
	Resources4 =
{ 
public 

class *
PersistedGrantServiceResources /
:0 1+
IPersistedGrantServiceResources2 Q
{ 
public 
virtual 
ResourceMessage &&
PersistedGrantDoesNotExist' A
(A B
)B C
{ 	
return		 
new		 
ResourceMessage		 &
(		& '
)		' (
{

 
Code 
= 
nameof 
( &
PersistedGrantDoesNotExist 8
)8 9
,9 :
Description 
= )
PersistedGrantServiceResource ;
.; <&
PersistedGrantDoesNotExist< V
} 
; 
} 	
public 
virtual 
ResourceMessage &3
'PersistedGrantWithSubjectIdDoesNotExist' N
(N O
)O P
{ 	
return 
new 
ResourceMessage &
(& '
)' (
{ 
Code 
= 
nameof 
( 3
'PersistedGrantWithSubjectIdDoesNotExist E
)E F
,F G
Description 
= )
PersistedGrantServiceResource ;
.; <3
'PersistedGrantWithSubjectIdDoesNotExist< c
} 
; 
} 	
} 
} ˜Þ
ƒC:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Services\ApiResourceService.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Services4 <
{ 
public 

class 
ApiResourceService #
:$ %
IApiResourceService& 9
{ 
private 
readonly "
IApiResourceRepository /"
_apiResourceRepository0 F
;F G
private 
readonly (
IApiResourceServiceResources 5(
_apiResourceServiceResources6 R
;R S
private 
readonly 
IClientService '
_clientService( 6
;6 7
private 
const 
string 
SharedSecret )
=* +
$str, :
;: ;
public 
ApiResourceService !
(! ""
IApiResourceRepository" 8!
apiResourceRepository9 N
,N O(
IApiResourceServiceResources ('
apiResourceServiceResources) D
,D E
IClientService 
clientService (
)( )
{ 	"
_apiResourceRepository "
=# $!
apiResourceRepository% :
;: ;(
_apiResourceServiceResources (
=) *'
apiResourceServiceResources+ F
;F G
_clientService 
= 
clientService *
;* +
} 	
public 
async 
Task 
< 
ApiResourcesDto )
>) * 
GetApiResourcesAsync+ ?
(? @
string@ F
searchG M
,M N
intO R
pageS W
=X Y
$numZ [
,[ \
int] `
pageSizea i
=j k
$numl n
)n o
{ 	
var 
	pagedList 
= 
await !"
_apiResourceRepository" 8
.8 9 
GetApiResourcesAsync9 M
(M N
searchN T
,T U
pageV Z
,Z [
pageSize\ d
)d e
;e f
var   
apiResourcesDto   
=    !
	pagedList  " +
.  + ,
ToModel  , 3
(  3 4
)  4 5
;  5 6
return"" 
apiResourcesDto"" "
;""" #
}## 	
private%% 
void%% 
HashApiSharedSecret%% (
(%%( )
ApiSecretsDto%%) 6
	apiSecret%%7 @
)%%@ A
{&& 	
if'' 
('' 
	apiSecret'' 
.'' 
Type'' 
!='' !
SharedSecret''" .
)''. /
return''0 6
;''6 7
if)) 
()) 
	apiSecret)) 
.)) 
HashType)) "
==))# %
())& '
())' (
int))( +
)))+ ,
HashType)), 4
.))4 5
Sha256))5 ;
))); <
.))< =
ToString))= E
())E F
)))F G
)))G H
{** 
	apiSecret++ 
.++ 
Value++ 
=++  !
	apiSecret++" +
.+++ ,
Value++, 1
.++1 2
Sha256++2 8
(++8 9
)++9 :
;++: ;
},, 
else-- 
if-- 
(-- 
	apiSecret-- 
.-- 
HashType-- '
==--( *
(--+ ,
(--, -
int--- 0
)--0 1
HashType--1 9
.--9 :
Sha512--: @
)--@ A
.--A B
ToString--B J
(--J K
)--K L
)--L M
{.. 
	apiSecret// 
.// 
Value// 
=//  !
	apiSecret//" +
.//+ ,
Value//, 1
.//1 2
Sha512//2 8
(//8 9
)//9 :
;//: ;
}00 
}11 	
public33 
ApiSecretsDto33 $
BuildApiSecretsViewModel33 5
(335 6
ApiSecretsDto336 C

apiSecrets33D N
)33N O
{44 	

apiSecrets55 
.55 
	HashTypes55  
=55! "
_clientService55# 1
.551 2
GetHashTypes552 >
(55> ?
)55? @
;55@ A

apiSecrets66 
.66 
TypeList66 
=66  !
_clientService66" 0
.660 1
GetSecretTypes661 ?
(66? @
)66@ A
;66A B
return88 

apiSecrets88 
;88 
}99 	
public;; 
async;; 
Task;; 
<;; 
ApiResourceDto;; (
>;;( )
GetApiResourceAsync;;* =
(;;= >
int;;> A
apiResourceId;;B O
);;O P
{<< 	
var== 
apiResource== 
=== 
await== #"
_apiResourceRepository==$ :
.==: ;
GetApiResourceAsync==; N
(==N O
apiResourceId==O \
)==\ ]
;==] ^
if>> 
(>> 
apiResource>> 
==>> 
null>> #
)>># $
throw>>% *
new>>+ .*
UserFriendlyErrorPageException>>/ M
(>>M N(
_apiResourceServiceResources>>N j
.>>j k$
ApiResourceDoesNotExist	>>k ‚
(
>>‚ ƒ
)
>>ƒ „
.
>>„ …
Description
>>… 
,
>> ‘*
_apiResourceServiceResources
>>’ ®
.
>>® ¯%
ApiResourceDoesNotExist
>>¯ Æ
(
>>Æ Ç
)
>>Ç È
.
>>È É
Description
>>É Ô
)
>>Ô Õ
;
>>Õ Ö
var?? 
apiResourceDto?? 
=??  
apiResource??! ,
.??, -
ToModel??- 4
(??4 5
)??5 6
;??6 7
returnAA 
apiResourceDtoAA !
;AA! "
}BB 	
publicDD 
asyncDD 
TaskDD 
<DD 
intDD 
>DD 
AddApiResourceAsyncDD 2
(DD2 3
ApiResourceDtoDD3 A
apiResourceDDB M
)DDM N
{EE 	
varFF 
	canInsertFF 
=FF 
awaitFF !%
CanInsertApiResourceAsyncFF" ;
(FF; <
apiResourceFF< G
)FFG H
;FFH I
ifGG 
(GG 
!GG 
	canInsertGG 
)GG 
{HH 
throwII 
newII %
UserFriendlyViewExceptionII 3
(II3 4
stringII4 :
.II: ;
FormatII; A
(IIA B(
_apiResourceServiceResourcesIIB ^
.II^ _"
ApiResourceExistsValueII_ u
(IIu v
)IIv w
.IIw x
Description	IIx ƒ
,
IIƒ „
apiResource
II… 
.
II ‘
Name
II‘ •
)
II• –
,
II– —*
_apiResourceServiceResources
II˜ ´
.
II´ µ"
ApiResourceExistsKey
IIµ É
(
IIÉ Ê
)
IIÊ Ë
.
IIË Ì
Description
IIÌ ×
,
II× Ø
apiResource
IIÙ ä
)
IIä å
;
IIå æ
}JJ 
varLL 
resourceLL 
=LL 
apiResourceLL &
.LL& '
ToEntityLL' /
(LL/ 0
)LL0 1
;LL1 2
returnNN 
awaitNN "
_apiResourceRepositoryNN /
.NN/ 0
AddApiResourceAsyncNN0 C
(NNC D
resourceNND L
)NNL M
;NNM N
}OO 	
publicQQ 
asyncQQ 
TaskQQ 
<QQ 
intQQ 
>QQ "
UpdateApiResourceAsyncQQ 5
(QQ5 6
ApiResourceDtoQQ6 D
apiResourceQQE P
)QQP Q
{RR 	
varSS 
	canInsertSS 
=SS 
awaitSS !%
CanInsertApiResourceAsyncSS" ;
(SS; <
apiResourceSS< G
)SSG H
;SSH I
ifTT 
(TT 
!TT 
	canInsertTT 
)TT 
{UU 
throwVV 
newVV %
UserFriendlyViewExceptionVV 3
(VV3 4
stringVV4 :
.VV: ;
FormatVV; A
(VVA B(
_apiResourceServiceResourcesVVB ^
.VV^ _"
ApiResourceExistsValueVV_ u
(VVu v
)VVv w
.VVw x
Description	VVx ƒ
,
VVƒ „
apiResource
VV… 
.
VV ‘
Name
VV‘ •
)
VV• –
,
VV– —*
_apiResourceServiceResources
VV˜ ´
.
VV´ µ"
ApiResourceExistsKey
VVµ É
(
VVÉ Ê
)
VVÊ Ë
.
VVË Ì
Description
VVÌ ×
,
VV× Ø
apiResource
VVÙ ä
)
VVä å
;
VVå æ
}WW 
varYY 
resourceYY 
=YY 
apiResourceYY &
.YY& '
ToEntityYY' /
(YY/ 0
)YY0 1
;YY1 2
return[[ 
await[[ "
_apiResourceRepository[[ /
.[[/ 0"
UpdateApiResourceAsync[[0 F
([[F G
resource[[G O
)[[O P
;[[P Q
}\\ 	
public^^ 
async^^ 
Task^^ 
<^^ 
int^^ 
>^^ "
DeleteApiResourceAsync^^ 5
(^^5 6
ApiResourceDto^^6 D
apiResource^^E P
)^^P Q
{__ 	
var`` 
resource`` 
=`` 
apiResource`` &
.``& '
ToEntity``' /
(``/ 0
)``0 1
;``1 2
returnbb 
awaitbb "
_apiResourceRepositorybb /
.bb/ 0"
DeleteApiResourceAsyncbb0 F
(bbF G
resourcebbG O
)bbO P
;bbP Q
}cc 	
publicee 
asyncee 
Taskee 
<ee 
boolee 
>ee %
CanInsertApiResourceAsyncee  9
(ee9 :
ApiResourceDtoee: H
apiResourceeeI T
)eeT U
{ff 	
vargg 
resourcegg 
=gg 
apiResourcegg &
.gg& '
ToEntitygg' /
(gg/ 0
)gg0 1
;gg1 2
returnii 
awaitii "
_apiResourceRepositoryii /
.ii/ 0%
CanInsertApiResourceAsyncii0 I
(iiI J
resourceiiJ R
)iiR S
;iiS T
}jj 	
publicll 
asyncll 
Taskll 
<ll 
ApiScopesDtoll &
>ll& '
GetApiScopesAsyncll( 9
(ll9 :
intll: =
apiResourceIdll> K
,llK L
intllM P
pagellQ U
=llV W
$numllX Y
,llY Z
intll[ ^
pageSizell_ g
=llh i
$numllj l
)lll m
{mm 	
varnn 
apiResourcenn 
=nn 
awaitnn #"
_apiResourceRepositorynn$ :
.nn: ;
GetApiResourceAsyncnn; N
(nnN O
apiResourceIdnnO \
)nn\ ]
;nn] ^
ifoo 
(oo 
apiResourceoo 
==oo 
nulloo #
)oo# $
throwoo% *
newoo+ .*
UserFriendlyErrorPageExceptionoo/ M
(ooM N
stringooN T
.ooT U
FormatooU [
(oo[ \(
_apiResourceServiceResourcesoo\ x
.oox y$
ApiResourceDoesNotExist	ooy 
(
oo ‘
)
oo‘ ’
.
oo’ “
Description
oo“ ž
,
oož Ÿ
apiResourceId
oo  ­
)
oo­ ®
,
oo® ¯*
_apiResourceServiceResources
oo° Ì
.
ooÌ Í%
ApiResourceDoesNotExist
ooÍ ä
(
ooä å
)
ooå æ
.
ooæ ç
Description
ooç ò
)
ooò ó
;
ooó ô
varqq 
	pagedListqq 
=qq 
awaitqq !"
_apiResourceRepositoryqq" 8
.qq8 9
GetApiScopesAsyncqq9 J
(qqJ K
apiResourceIdqqK X
,qqX Y
pageqqZ ^
,qq^ _
pageSizeqq` h
)qqh i
;qqi j
varss 
apiScopesDtoss 
=ss 
	pagedListss (
.ss( )
ToModelss) 0
(ss0 1
)ss1 2
;ss2 3
apiScopesDtott 
.tt 
ApiResourceIdtt &
=tt' (
apiResourceIdtt) 6
;tt6 7
apiScopesDtouu 
.uu 
ResourceNameuu %
=uu& '
awaituu( -#
GetApiResourceNameAsyncuu. E
(uuE F
apiResourceIduuF S
)uuS T
;uuT U
returnww 
apiScopesDtoww 
;ww  
}xx 	
publiczz 
asynczz 
Taskzz 
<zz 
ApiScopesDtozz &
>zz& '
GetApiScopeAsynczz( 8
(zz8 9
intzz9 <
apiResourceIdzz= J
,zzJ K
intzzL O

apiScopeIdzzP Z
)zzZ [
{{{ 	
var|| 
apiResource|| 
=|| 
await|| #"
_apiResourceRepository||$ :
.||: ;
GetApiResourceAsync||; N
(||N O
apiResourceId||O \
)||\ ]
;||] ^
if}} 
(}} 
apiResource}} 
==}} 
null}} #
)}}# $
throw}}% *
new}}+ .*
UserFriendlyErrorPageException}}/ M
(}}M N
string}}N T
.}}T U
Format}}U [
(}}[ \(
_apiResourceServiceResources}}\ x
.}}x y$
ApiResourceDoesNotExist	}}y 
(
}} ‘
)
}}‘ ’
.
}}’ “
Description
}}“ ž
,
}}ž Ÿ
apiResourceId
}}  ­
)
}}­ ®
,
}}® ¯*
_apiResourceServiceResources
}}° Ì
.
}}Ì Í%
ApiResourceDoesNotExist
}}Í ä
(
}}ä å
)
}}å æ
.
}}æ ç
Description
}}ç ò
)
}}ò ó
;
}}ó ô
var 
apiScope 
= 
await  "
_apiResourceRepository! 7
.7 8
GetApiScopeAsync8 H
(H I
apiResourceIdI V
,V W

apiScopeIdX b
)b c
;c d
if
€€ 
(
€€ 
apiScope
€€ 
==
€€ 
null
€€  
)
€€  !
throw
€€" '
new
€€( +,
UserFriendlyErrorPageException
€€, J
(
€€J K
string
€€K Q
.
€€Q R
Format
€€R X
(
€€X Y*
_apiResourceServiceResources
€€Y u
.
€€u v#
ApiScopeDoesNotExist€€v Š
(€€Š ‹
)€€‹ Œ
.€€Œ 
Description€€ ˜
,€€˜ ™

apiScopeId€€š ¤
)€€¤ ¥
,€€¥ ¦,
_apiResourceServiceResources€€§ Ã
.€€Ã Ä$
ApiScopeDoesNotExist€€Ä Ø
(€€Ø Ù
)€€Ù Ú
.€€Ú Û
Description€€Û æ
)€€æ ç
;€€ç è
var
‚‚ 
apiScopesDto
‚‚ 
=
‚‚ 
apiScope
‚‚ '
.
‚‚' (
ToModel
‚‚( /
(
‚‚/ 0
)
‚‚0 1
;
‚‚1 2
apiScopesDto
ƒƒ 
.
ƒƒ 
ResourceName
ƒƒ %
=
ƒƒ& '
await
ƒƒ( -%
GetApiResourceNameAsync
ƒƒ. E
(
ƒƒE F
apiResourceId
ƒƒF S
)
ƒƒS T
;
ƒƒT U
return
…… 
apiScopesDto
…… 
;
……  
}
†† 	
public
ˆˆ 
async
ˆˆ 
Task
ˆˆ 
<
ˆˆ 
int
ˆˆ 
>
ˆˆ 
AddApiScopeAsync
ˆˆ /
(
ˆˆ/ 0
ApiScopesDto
ˆˆ0 <
apiScope
ˆˆ= E
)
ˆˆE F
{
‰‰ 	
var
ŠŠ 
	canInsert
ŠŠ 
=
ŠŠ 
await
ŠŠ !$
CanInsertApiScopeAsync
ŠŠ" 8
(
ŠŠ8 9
apiScope
ŠŠ9 A
)
ŠŠA B
;
ŠŠB C
if
‹‹ 
(
‹‹ 
!
‹‹ 
	canInsert
‹‹ 
)
‹‹ 
{
ŒŒ 
await
 %
BuildApiScopesViewModel
 -
(
- .
apiScope
. 6
)
6 7
;
7 8
throw
ŽŽ 
new
ŽŽ '
UserFriendlyViewException
ŽŽ 3
(
ŽŽ3 4
string
ŽŽ4 :
.
ŽŽ: ;
Format
ŽŽ; A
(
ŽŽA B*
_apiResourceServiceResources
ŽŽB ^
.
ŽŽ^ _!
ApiScopeExistsValue
ŽŽ_ r
(
ŽŽr s
)
ŽŽs t
.
ŽŽt u
DescriptionŽŽu €
,ŽŽ€ 
apiScopeŽŽ‚ Š
.ŽŽŠ ‹
NameŽŽ‹ 
)ŽŽ 
,ŽŽ ‘,
_apiResourceServiceResourcesŽŽ’ ®
.ŽŽ® ¯!
ApiScopeExistsKeyŽŽ¯ À
(ŽŽÀ Á
)ŽŽÁ Â
.ŽŽÂ Ã
DescriptionŽŽÃ Î
,ŽŽÎ Ï
apiScopeŽŽÐ Ø
)ŽŽØ Ù
;ŽŽÙ Ú
}
 
var
‘‘ 
scope
‘‘ 
=
‘‘ 
apiScope
‘‘  
.
‘‘  !
ToEntity
‘‘! )
(
‘‘) *
)
‘‘* +
;
‘‘+ ,
return
““ 
await
““ $
_apiResourceRepository
““ /
.
““/ 0
AddApiScopeAsync
““0 @
(
““@ A
apiScope
““A I
.
““I J
ApiResourceId
““J W
,
““W X
scope
““Y ^
)
““^ _
;
““_ `
}
”” 	
public
–– 
ApiScopesDto
–– $
BuildApiScopeViewModel
–– 2
(
––2 3
ApiScopesDto
––3 ?
apiScope
––@ H
)
––H I
{
—— 	
ComboBoxHelpers
˜˜ 
.
˜˜ "
PopulateValuesToList
˜˜ 0
(
˜˜0 1
apiScope
˜˜1 9
.
˜˜9 :
UserClaimsItems
˜˜: I
,
˜˜I J
apiScope
˜˜K S
.
˜˜S T

UserClaims
˜˜T ^
)
˜˜^ _
;
˜˜_ `
return
šš 
apiScope
šš 
;
šš 
}
›› 	
private
 
async
 
Task
 %
BuildApiScopesViewModel
 2
(
2 3
ApiScopesDto
3 ?
apiScope
@ H
)
H I
{
žž 	
if
ŸŸ 
(
ŸŸ 
apiScope
ŸŸ 
.
ŸŸ 

ApiScopeId
ŸŸ #
==
ŸŸ$ &
$num
ŸŸ' (
)
ŸŸ( )
{
   
var
¡¡ 
apiScopesDto
¡¡  
=
¡¡! "
await
¡¡# (
GetApiScopesAsync
¡¡) :
(
¡¡: ;
apiScope
¡¡; C
.
¡¡C D
ApiResourceId
¡¡D Q
)
¡¡Q R
;
¡¡R S
apiScope
¢¢ 
.
¢¢ 
Scopes
¢¢ 
.
¢¢  
AddRange
¢¢  (
(
¢¢( )
apiScopesDto
¢¢) 5
.
¢¢5 6
Scopes
¢¢6 <
)
¢¢< =
;
¢¢= >
apiScope
££ 
.
££ 

TotalCount
££ #
=
££$ %
apiScopesDto
££& 2
.
££2 3

TotalCount
££3 =
;
££= >
}
¤¤ 
}
¥¥ 	
public
§§ 
async
§§ 
Task
§§ 
<
§§ 
int
§§ 
>
§§ !
UpdateApiScopeAsync
§§ 2
(
§§2 3
ApiScopesDto
§§3 ?
apiScope
§§@ H
)
§§H I
{
¨¨ 	
var
©© 
	canInsert
©© 
=
©© 
await
©© !$
CanInsertApiScopeAsync
©©" 8
(
©©8 9
apiScope
©©9 A
)
©©A B
;
©©B C
if
ªª 
(
ªª 
!
ªª 
	canInsert
ªª 
)
ªª 
{
«« 
await
¬¬ %
BuildApiScopesViewModel
¬¬ -
(
¬¬- .
apiScope
¬¬. 6
)
¬¬6 7
;
¬¬7 8
throw
­­ 
new
­­ '
UserFriendlyViewException
­­ 3
(
­­3 4
string
­­4 :
.
­­: ;
Format
­­; A
(
­­A B*
_apiResourceServiceResources
­­B ^
.
­­^ _!
ApiScopeExistsValue
­­_ r
(
­­r s
)
­­s t
.
­­t u
Description­­u €
,­­€ 
apiScope­­‚ Š
.­­Š ‹
Name­­‹ 
)­­ 
,­­ ‘,
_apiResourceServiceResources­­’ ®
.­­® ¯!
ApiScopeExistsKey­­¯ À
(­­À Á
)­­Á Â
.­­Â Ã
Description­­Ã Î
,­­Î Ï
apiScope­­Ð Ø
)­­Ø Ù
;­­Ù Ú
}
®® 
var
°° 
scope
°° 
=
°° 
apiScope
°°  
.
°°  !
ToEntity
°°! )
(
°°) *
)
°°* +
;
°°+ ,
return
²² 
await
²² $
_apiResourceRepository
²² /
.
²²/ 0!
UpdateApiScopeAsync
²²0 C
(
²²C D
apiScope
²²D L
.
²²L M
ApiResourceId
²²M Z
,
²²Z [
scope
²²\ a
)
²²a b
;
²²b c
}
³³ 	
public
µµ 
async
µµ 
Task
µµ 
<
µµ 
int
µµ 
>
µµ !
DeleteApiScopeAsync
µµ 2
(
µµ2 3
ApiScopesDto
µµ3 ?
apiScope
µµ@ H
)
µµH I
{
¶¶ 	
var
·· 
scope
·· 
=
·· 
apiScope
··  
.
··  !
ToEntity
··! )
(
··) *
)
··* +
;
··+ ,
return
¹¹ 
await
¹¹ $
_apiResourceRepository
¹¹ /
.
¹¹/ 0!
DeleteApiScopeAsync
¹¹0 C
(
¹¹C D
scope
¹¹D I
)
¹¹I J
;
¹¹J K
}
ºº 	
public
¼¼ 
async
¼¼ 
Task
¼¼ 
<
¼¼ 
ApiSecretsDto
¼¼ '
>
¼¼' ( 
GetApiSecretsAsync
¼¼) ;
(
¼¼; <
int
¼¼< ?
apiResourceId
¼¼@ M
,
¼¼M N
int
¼¼O R
page
¼¼S W
=
¼¼X Y
$num
¼¼Z [
,
¼¼[ \
int
¼¼] `
pageSize
¼¼a i
=
¼¼j k
$num
¼¼l n
)
¼¼n o
{
½½ 	
var
¾¾ 
apiResource
¾¾ 
=
¾¾ 
await
¾¾ #$
_apiResourceRepository
¾¾$ :
.
¾¾: ;!
GetApiResourceAsync
¾¾; N
(
¾¾N O
apiResourceId
¾¾O \
)
¾¾\ ]
;
¾¾] ^
if
¿¿ 
(
¿¿ 
apiResource
¿¿ 
==
¿¿ 
null
¿¿ #
)
¿¿# $
throw
¿¿% *
new
¿¿+ .,
UserFriendlyErrorPageException
¿¿/ M
(
¿¿M N
string
¿¿N T
.
¿¿T U
Format
¿¿U [
(
¿¿[ \*
_apiResourceServiceResources
¿¿\ x
.
¿¿x y&
ApiResourceDoesNotExist¿¿y 
(¿¿ ‘
)¿¿‘ ’
.¿¿’ “
Description¿¿“ ž
,¿¿ž Ÿ
apiResourceId¿¿  ­
)¿¿­ ®
,¿¿® ¯,
_apiResourceServiceResources¿¿° Ì
.¿¿Ì Í'
ApiResourceDoesNotExist¿¿Í ä
(¿¿ä å
)¿¿å æ
.¿¿æ ç
Description¿¿ç ò
)¿¿ò ó
;¿¿ó ô
var
ÁÁ 
	pagedList
ÁÁ 
=
ÁÁ 
await
ÁÁ !$
_apiResourceRepository
ÁÁ" 8
.
ÁÁ8 9 
GetApiSecretsAsync
ÁÁ9 K
(
ÁÁK L
apiResourceId
ÁÁL Y
,
ÁÁY Z
page
ÁÁ[ _
,
ÁÁ_ `
pageSize
ÁÁa i
)
ÁÁi j
;
ÁÁj k
var
ÃÃ 
apiSecretsDto
ÃÃ 
=
ÃÃ 
	pagedList
ÃÃ  )
.
ÃÃ) *
ToModel
ÃÃ* 1
(
ÃÃ1 2
)
ÃÃ2 3
;
ÃÃ3 4
apiSecretsDto
ÄÄ 
.
ÄÄ 
ApiResourceId
ÄÄ '
=
ÄÄ( )
apiResourceId
ÄÄ* 7
;
ÄÄ7 8
apiSecretsDto
ÅÅ 
.
ÅÅ 
ApiResourceName
ÅÅ )
=
ÅÅ* +
await
ÅÅ, 1$
_apiResourceRepository
ÅÅ2 H
.
ÅÅH I%
GetApiResourceNameAsync
ÅÅI `
(
ÅÅ` a
apiResourceId
ÅÅa n
)
ÅÅn o
;
ÅÅo p
return
ÇÇ 
apiSecretsDto
ÇÇ  
;
ÇÇ  !
}
ÈÈ 	
public
ÊÊ 
async
ÊÊ 
Task
ÊÊ 
<
ÊÊ 
int
ÊÊ 
>
ÊÊ 
AddApiSecretAsync
ÊÊ 0
(
ÊÊ0 1
ApiSecretsDto
ÊÊ1 >
	apiSecret
ÊÊ? H
)
ÊÊH I
{
ËË 	!
HashApiSharedSecret
ÌÌ 
(
ÌÌ  
	apiSecret
ÌÌ  )
)
ÌÌ) *
;
ÌÌ* +
var
ÎÎ 
secret
ÎÎ 
=
ÎÎ 
	apiSecret
ÎÎ "
.
ÎÎ" #
ToEntity
ÎÎ# +
(
ÎÎ+ ,
)
ÎÎ, -
;
ÎÎ- .
return
ÐÐ 
await
ÐÐ $
_apiResourceRepository
ÐÐ /
.
ÐÐ/ 0
AddApiSecretAsync
ÐÐ0 A
(
ÐÐA B
	apiSecret
ÐÐB K
.
ÐÐK L
ApiResourceId
ÐÐL Y
,
ÐÐY Z
secret
ÐÐ[ a
)
ÐÐa b
;
ÐÐb c
}
ÑÑ 	
public
ÓÓ 
async
ÓÓ 
Task
ÓÓ 
<
ÓÓ 
ApiSecretsDto
ÓÓ '
>
ÓÓ' (
GetApiSecretAsync
ÓÓ) :
(
ÓÓ: ;
int
ÓÓ; >
apiSecretId
ÓÓ? J
)
ÓÓJ K
{
ÔÔ 	
var
ÕÕ 
	apiSecret
ÕÕ 
=
ÕÕ 
await
ÕÕ !$
_apiResourceRepository
ÕÕ" 8
.
ÕÕ8 9
GetApiSecretAsync
ÕÕ9 J
(
ÕÕJ K
apiSecretId
ÕÕK V
)
ÕÕV W
;
ÕÕW X
if
ÖÖ 
(
ÖÖ 
	apiSecret
ÖÖ 
==
ÖÖ 
null
ÖÖ !
)
ÖÖ! "
throw
ÖÖ# (
new
ÖÖ) ,,
UserFriendlyErrorPageException
ÖÖ- K
(
ÖÖK L
string
ÖÖL R
.
ÖÖR S
Format
ÖÖS Y
(
ÖÖY Z*
_apiResourceServiceResources
ÖÖZ v
.
ÖÖv w$
ApiSecretDoesNotExistÖÖw Œ
(ÖÖŒ 
)ÖÖ Ž
.ÖÖŽ 
DescriptionÖÖ š
,ÖÖš ›
apiSecretIdÖÖœ §
)ÖÖ§ ¨
,ÖÖ¨ ©,
_apiResourceServiceResourcesÖÖª Æ
.ÖÖÆ Ç%
ApiSecretDoesNotExistÖÖÇ Ü
(ÖÖÜ Ý
)ÖÖÝ Þ
.ÖÖÞ ß
DescriptionÖÖß ê
)ÖÖê ë
;ÖÖë ì
var
×× 
apiSecretsDto
×× 
=
×× 
	apiSecret
××  )
.
××) *
ToModel
××* 1
(
××1 2
)
××2 3
;
××3 4
return
ÙÙ 
apiSecretsDto
ÙÙ  
;
ÙÙ  !
}
ÚÚ 	
public
ÜÜ 
async
ÜÜ 
Task
ÜÜ 
<
ÜÜ 
int
ÜÜ 
>
ÜÜ "
DeleteApiSecretAsync
ÜÜ 3
(
ÜÜ3 4
ApiSecretsDto
ÜÜ4 A
	apiSecret
ÜÜB K
)
ÜÜK L
{
ÝÝ 	
var
ÞÞ 
secret
ÞÞ 
=
ÞÞ 
	apiSecret
ÞÞ "
.
ÞÞ" #
ToEntity
ÞÞ# +
(
ÞÞ+ ,
)
ÞÞ, -
;
ÞÞ- .
return
àà 
await
àà $
_apiResourceRepository
àà /
.
àà/ 0"
DeleteApiSecretAsync
àà0 D
(
ààD E
secret
ààE K
)
ààK L
;
ààL M
}
áá 	
public
ãã 
async
ãã 
Task
ãã 
<
ãã 
bool
ãã 
>
ãã $
CanInsertApiScopeAsync
ãã  6
(
ãã6 7
ApiScopesDto
ãã7 C
	apiScopes
ããD M
)
ããM N
{
ää 	
var
åå 
apiScope
åå 
=
åå 
	apiScopes
åå $
.
åå$ %
ToEntity
åå% -
(
åå- .
)
åå. /
;
åå/ 0
return
çç 
await
çç $
_apiResourceRepository
çç /
.
çç/ 0$
CanInsertApiScopeAsync
çç0 F
(
ççF G
apiScope
ççG O
)
ççO P
;
ççP Q
}
èè 	
public
êê 
async
êê 
Task
êê 
<
êê 
string
êê  
>
êê  !%
GetApiResourceNameAsync
êê" 9
(
êê9 :
int
êê: =
apiResourceId
êê> K
)
êêK L
{
ëë 	
return
ìì 
await
ìì $
_apiResourceRepository
ìì /
.
ìì/ 0%
GetApiResourceNameAsync
ìì0 G
(
ììG H
apiResourceId
ììH U
)
ììU V
;
ììV W
}
íí 	
}
îî 
}ïï áÊ
~C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Services\ClientService.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Services4 <
{ 
public 

class 
ClientService 
:  
IClientService! /
{ 
private 
readonly 
IClientRepository *
_clientRepository+ <
;< =
private 
readonly #
IClientServiceResources 0#
_clientServiceResources1 H
;H I
private 
const 
string 
SharedSecret )
=* +
$str, :
;: ;
public 
ClientService 
( 
IClientRepository .
clientRepository/ ?
,? @#
IClientServiceResourcesA X"
clientServiceResourcesY o
)o p
{ 	
_clientRepository 
= 
clientRepository  0
;0 1#
_clientServiceResources #
=$ %"
clientServiceResources& <
;< =
} 	
private 
void "
HashClientSharedSecret +
(+ ,
ClientSecretsDto, <
clientSecret= I
)I J
{ 	
if 
( 
clientSecret 
. 
Type !
!=" $
SharedSecret% 1
)1 2
return3 9
;9 :
if   
(   
clientSecret   
.   
HashType   %
==  & (
(  ) *
(  * +
int  + .
)  . /
HashType  / 7
.  7 8
Sha256  8 >
)  > ?
.  ? @
ToString  @ H
(  H I
)  I J
)  J K
{!! 
clientSecret"" 
."" 
Value"" "
=""# $
clientSecret""% 1
.""1 2
Value""2 7
.""7 8
Sha256""8 >
(""> ?
)""? @
;""@ A
}## 
else$$ 
if$$ 
($$ 
clientSecret$$ !
.$$! "
HashType$$" *
==$$+ -
($$. /
($$/ 0
int$$0 3
)$$3 4
HashType$$4 <
.$$< =
Sha512$$= C
)$$C D
.$$D E
ToString$$E M
($$M N
)$$N O
)$$O P
{%% 
clientSecret&& 
.&& 
Value&& "
=&&# $
clientSecret&&% 1
.&&1 2
Value&&2 7
.&&7 8
Sha512&&8 >
(&&> ?
)&&? @
;&&@ A
}'' 
}(( 	
private** 
void** )
PrepareClientTypeForNewClient** 2
(**2 3
	ClientDto**3 <
client**= C
)**C D
{++ 	
switch,, 
(,, 
client,, 
.,, 

ClientType,, %
),,% &
{-- 
case.. 

ClientType.. 
...  
Empty..  %
:..% &
break// 
;// 
case00 

ClientType00 
.00  
WebImplicit00  +
:00+ ,
client11 
.11 
AllowedGrantTypes11 ,
.11, -
AddRange11- 5
(115 6

GrantTypes116 @
.11@ A
Implicit11A I
)11I J
;11J K
client22 
.22 '
AllowAccessTokensViaBrowser22 6
=227 8
true229 =
;22= >
break33 
;33 
case44 

ClientType44 
.44  
	WebHybrid44  )
:44) *
client55 
.55 
AllowedGrantTypes55 ,
.55, -
AddRange55- 5
(555 6

GrantTypes556 @
.55@ A
Hybrid55A G
)55G H
;55H I
break66 
;66 
case77 

ClientType77 
.77  
Spa77  #
:77# $
client88 
.88 
AllowedGrantTypes88 ,
.88, -
AddRange88- 5
(885 6

GrantTypes886 @
.88@ A
Implicit88A I
)88I J
;88J K
client99 
.99 '
AllowAccessTokensViaBrowser99 6
=997 8
true999 =
;99= >
break:: 
;:: 
case;; 

ClientType;; 
.;;  
Native;;  &
:;;& '
client<< 
.<< 
AllowedGrantTypes<< ,
.<<, -
AddRange<<- 5
(<<5 6

GrantTypes<<6 @
.<<@ A
Hybrid<<A G
)<<G H
;<<H I
break== 
;== 
case>> 

ClientType>> 
.>>  
Machine>>  '
:>>' (
client?? 
.?? 
AllowedGrantTypes?? ,
.??, -
AddRange??- 5
(??5 6

GrantTypes??6 @
.??@ A5
)ResourceOwnerPasswordAndClientCredentials??A j
)??j k
;??k l
break@@ 
;@@ 
defaultAA 
:AA 
throwBB 
newBB '
ArgumentOutOfRangeExceptionBB 9
(BB9 :
)BB: ;
;BB; <
}CC 
}DD 	
privateFF 
voidFF #
PopulateClientRelationsFF ,
(FF, -
	ClientDtoFF- 6
clientFF7 =
)FF= >
{GG 	
ComboBoxHelpersHH 
.HH  
PopulateValuesToListHH 0
(HH0 1
clientHH1 7
.HH7 8
AllowedScopesItemsHH8 J
,HHJ K
clientHHL R
.HHR S
AllowedScopesHHS `
)HH` a
;HHa b
ComboBoxHelpersII 
.II  
PopulateValuesToListII 0
(II0 1
clientII1 7
.II7 8'
PostLogoutRedirectUrisItemsII8 S
,IIS T
clientIIU [
.II[ \"
PostLogoutRedirectUrisII\ r
)IIr s
;IIs t
ComboBoxHelpersJJ 
.JJ  
PopulateValuesToListJJ 0
(JJ0 1
clientJJ1 7
.JJ7 8-
!IdentityProviderRestrictionsItemsJJ8 Y
,JJY Z
clientJJ[ a
.JJa b(
IdentityProviderRestrictionsJJb ~
)JJ~ 
;	JJ €
ComboBoxHelpersKK 
.KK  
PopulateValuesToListKK 0
(KK0 1
clientKK1 7
.KK7 8
RedirectUrisItemsKK8 I
,KKI J
clientKKK Q
.KKQ R
RedirectUrisKKR ^
)KK^ _
;KK_ `
ComboBoxHelpersLL 
.LL  
PopulateValuesToListLL 0
(LL0 1
clientLL1 7
.LL7 8#
AllowedCorsOriginsItemsLL8 O
,LLO P
clientLLQ W
.LLW X
AllowedCorsOriginsLLX j
)LLj k
;LLk l
ComboBoxHelpersMM 
.MM  
PopulateValuesToListMM 0
(MM0 1
clientMM1 7
.MM7 8"
AllowedGrantTypesItemsMM8 N
,MMN O
clientMMP V
.MMV W
AllowedGrantTypesMMW h
)MMh i
;MMi j
}NN 	
publicPP 
ClientCloneDtoPP %
BuildClientCloneViewModelPP 7
(PP7 8
intPP8 ;
idPP< >
,PP> ?
	ClientDtoPP@ I
	clientDtoPPJ S
)PPS T
{QQ 	
varRR 
clientRR 
=RR 
newRR 
ClientCloneDtoRR +
{SS "
CloneClientCorsOriginsTT &
=TT' (
trueTT) -
,TT- .!
CloneClientGrantTypesUU %
=UU& '
trueUU( ,
,UU, -&
CloneClientIdPRestrictionsVV *
=VV+ ,
trueVV- 1
,VV1 2-
!CloneClientPostLogoutRedirectUrisWW 1
=WW2 3
trueWW4 8
,WW8 9#
CloneClientRedirectUrisXX '
=XX( )
trueXX* .
,XX. /
CloneClientScopesYY !
=YY" #
trueYY$ (
,YY( )
CloneClientClaimsZZ !
=ZZ" #
trueZZ$ (
,ZZ( )!
CloneClientProperties[[ %
=[[& '
true[[( ,
,[[, -
ClientIdOriginal\\  
=\\! "
	clientDto\\# ,
.\\, -
ClientId\\- 5
,\\5 6
ClientNameOriginal]] "
=]]# $
	clientDto]]% .
.]]. /

ClientName]]/ 9
,]]9 :
Id^^ 
=^^ 
id^^ 
}__ 
;__ 
returnaa 
clientaa 
;aa 
}bb 	
publicdd 
ClientSecretsDtodd '
BuildClientSecretsViewModeldd  ;
(dd; <
ClientSecretsDtodd< L
clientSecretsddM Z
)ddZ [
{ee 	
clientSecretsff 
.ff 
	HashTypesff #
=ff$ %
GetHashTypesff& 2
(ff2 3
)ff3 4
;ff4 5
clientSecretsgg 
.gg 
TypeListgg "
=gg# $
GetSecretTypesgg% 3
(gg3 4
)gg4 5
;gg5 6
returnii 
clientSecretsii  
;ii  !
}jj 	
publicll 
	ClientDtoll  
BuildClientViewModelll -
(ll- .
	ClientDtoll. 7
clientll8 >
=ll? @
nullllA E
)llE F
{mm 	
ifnn 
(nn 
clientnn 
==nn 
nullnn 
)nn 
{oo 
varpp 
	clientDtopp 
=pp 
newpp  #
	ClientDtopp$ -
{qq 
AccessTokenTypesrr $
=rr% &
GetAccessTokenTypesrr' :
(rr: ;
)rr; <
,rr< =#
RefreshTokenExpirationsss +
=ss, -
GetTokenExpirationsss. A
(ssA B
)ssB C
,ssC D
RefreshTokenUsagestt &
=tt' (
GetTokenUsagett) 6
(tt6 7
)tt7 8
,tt8 9
ProtocolTypesuu !
=uu" #
GetProtocolTypesuu$ 4
(uu4 5
)uu5 6
,uu6 7
Idvv 
=vv 
$numvv 
}ww 
;ww 
returnyy 
	clientDtoyy  
;yy  !
}zz 
client|| 
.|| 
AccessTokenTypes|| #
=||$ %
GetAccessTokenTypes||& 9
(||9 :
)||: ;
;||; <
client}} 
.}} #
RefreshTokenExpirations}} *
=}}+ ,
GetTokenExpirations}}- @
(}}@ A
)}}A B
;}}B C
client~~ 
.~~ 
RefreshTokenUsages~~ %
=~~& '
GetTokenUsage~~( 5
(~~5 6
)~~6 7
;~~7 8
client 
. 
ProtocolTypes  
=! "
GetProtocolTypes# 3
(3 4
)4 5
;5 6%
PopulateClientRelations
 #
(
# $
client
$ *
)
* +
;
+ ,
return
ƒƒ 
client
ƒƒ 
;
ƒƒ 
}
„„ 	
public
‹‹ 
async
‹‹ 
Task
‹‹ 
<
‹‹ 
int
‹‹ 
>
‹‹ 
AddClientAsync
‹‹ -
(
‹‹- .
	ClientDto
‹‹. 7
client
‹‹8 >
)
‹‹> ?
{
ŒŒ 	
var
 
	canInsert
 
=
 
await
 !"
CanInsertClientAsync
" 6
(
6 7
client
7 =
)
= >
;
> ?
if
ŽŽ 
(
ŽŽ 
!
ŽŽ 
	canInsert
ŽŽ 
)
ŽŽ 
{
 
throw
 
new
 '
UserFriendlyViewException
 3
(
3 4
string
4 :
.
: ;
Format
; A
(
A B%
_clientServiceResources
B Y
.
Y Z
ClientExistsValue
Z k
(
k l
)
l m
.
m n
Description
n y
,
y z
client{ 
. ‚
ClientId‚ Š
)Š ‹
,‹ Œ'
_clientServiceResources ¤
.¤ ¥
ClientExistsKey¥ ´
(´ µ
)µ ¶
.¶ ·
Description· Â
,Â Ã
clientÄ Ê
)Ê Ë
;Ë Ì
}
‘‘ +
PrepareClientTypeForNewClient
““ )
(
““) *
client
““* 0
)
““0 1
;
““1 2
var
”” 
clientEntity
”” 
=
”” 
client
”” %
.
””% &
ToEntity
””& .
(
””. /
)
””/ 0
;
””0 1
return
–– 
await
–– 
_clientRepository
–– *
.
––* +
AddClientAsync
––+ 9
(
––9 :
clientEntity
––: F
)
––F G
;
––G H
}
—— 	
public
™™ 
async
™™ 
Task
™™ 
<
™™ 
int
™™ 
>
™™ 
UpdateClientAsync
™™ 0
(
™™0 1
	ClientDto
™™1 :
client
™™; A
)
™™A B
{
šš 	
var
›› 
	canInsert
›› 
=
›› 
await
›› !"
CanInsertClientAsync
››" 6
(
››6 7
client
››7 =
)
››= >
;
››> ?
if
œœ 
(
œœ 
!
œœ 
	canInsert
œœ 
)
œœ 
{
 
throw
žž 
new
žž '
UserFriendlyViewException
žž 3
(
žž3 4
string
žž4 :
.
žž: ;
Format
žž; A
(
žžA B%
_clientServiceResources
žžB Y
.
žžY Z
ClientExistsValue
žžZ k
(
žžk l
)
žžl m
.
žžm n
Description
žžn y
,
žžy z
clientžž{ 
.žž ‚
ClientIdžž‚ Š
)žžŠ ‹
,žž‹ Œ'
_clientServiceResourcesžž ¤
.žž¤ ¥
ClientExistsKeyžž¥ ´
(žž´ µ
)žžµ ¶
.žž¶ ·
Descriptionžž· Â
,žžÂ Ã
clientžžÄ Ê
)žžÊ Ë
;žžË Ì
}
ŸŸ 
var
¡¡ 
clientEntity
¡¡ 
=
¡¡ 
client
¡¡ %
.
¡¡% &
ToEntity
¡¡& .
(
¡¡. /
)
¡¡/ 0
;
¡¡0 1
return
££ 
await
££ 
_clientRepository
££ *
.
££* +
UpdateClientAsync
££+ <
(
££< =
clientEntity
££= I
)
££I J
;
££J K
}
¤¤ 	
public
¦¦ 
async
¦¦ 
Task
¦¦ 
<
¦¦ 
int
¦¦ 
>
¦¦ 
RemoveClientAsync
¦¦ 0
(
¦¦0 1
	ClientDto
¦¦1 :
client
¦¦; A
)
¦¦A B
{
§§ 	
var
¨¨ 
clientEntity
¨¨ 
=
¨¨ 
client
¨¨ %
.
¨¨% &
ToEntity
¨¨& .
(
¨¨. /
)
¨¨/ 0
;
¨¨0 1
return
ªª 
await
ªª 
_clientRepository
ªª *
.
ªª* +
RemoveClientAsync
ªª+ <
(
ªª< =
clientEntity
ªª= I
)
ªªI J
;
ªªJ K
}
«« 	
public
­­ 
async
­­ 
Task
­­ 
<
­­ 
int
­­ 
>
­­ 
CloneClientAsync
­­ /
(
­­/ 0
ClientCloneDto
­­0 >
client
­­? E
)
­­E F
{
®® 	
var
¯¯ 
	canInsert
¯¯ 
=
¯¯ 
await
¯¯ !"
CanInsertClientAsync
¯¯" 6
(
¯¯6 7
client
¯¯7 =
,
¯¯= >
true
¯¯? C
)
¯¯C D
;
¯¯D E
if
°° 
(
°° 
!
°° 
	canInsert
°° 
)
°° 
{
±± 
var
³³ 

clientInfo
³³ 
=
³³  
await
³³! &
_clientRepository
³³' 8
.
³³8 9
GetClientIdAsync
³³9 I
(
³³I J
client
³³J P
.
³³P Q
Id
³³Q S
)
³³S T
;
³³T U
client
´´ 
.
´´ 
ClientIdOriginal
´´ '
=
´´( )

clientInfo
´´* 4
.
´´4 5
ClientId
´´5 =
;
´´= >
client
µµ 
.
µµ  
ClientNameOriginal
µµ )
=
µµ* +

clientInfo
µµ, 6
.
µµ6 7

ClientName
µµ7 A
;
µµA B
throw
·· 
new
·· '
UserFriendlyViewException
·· 3
(
··3 4
string
··4 :
.
··: ;
Format
··; A
(
··A B%
_clientServiceResources
··B Y
.
··Y Z
ClientExistsValue
··Z k
(
··k l
)
··l m
.
··m n
Description
··n y
,
··y z
client··{ 
.·· ‚
ClientId··‚ Š
)··Š ‹
,··‹ Œ'
_clientServiceResources·· ¤
.··¤ ¥
ClientExistsKey··¥ ´
(··´ µ
)··µ ¶
.··¶ ·
Description··· Â
,··Â Ã
client··Ä Ê
)··Ê Ë
;··Ë Ì
}
¸¸ 
var
ºº 
clientEntity
ºº 
=
ºº 
client
ºº %
.
ºº% &
ToEntity
ºº& .
(
ºº. /
)
ºº/ 0
;
ºº0 1
var
¼¼ 
clonedClientId
¼¼ 
=
¼¼  
await
¼¼! &
_clientRepository
¼¼' 8
.
¼¼8 9
CloneClientAsync
¼¼9 I
(
¼¼I J
clientEntity
¼¼J V
,
¼¼V W
client
¼¼X ^
.
¼¼^ _$
CloneClientCorsOrigins
¼¼_ u
,
¼¼u v
client
½½ 
.
½½ #
CloneClientGrantTypes
½½ ,
,
½½, -
client
½½. 4
.
½½4 5(
CloneClientIdPRestrictions
½½5 O
,
½½O P
client
¾¾ 
.
¾¾ /
!CloneClientPostLogoutRedirectUris
¾¾ 8
,
¾¾8 9
client
¿¿ 
.
¿¿ 
CloneClientScopes
¿¿ (
,
¿¿( )
client
¿¿* 0
.
¿¿0 1%
CloneClientRedirectUris
¿¿1 H
,
¿¿H I
client
¿¿J P
.
¿¿P Q
CloneClientClaims
¿¿Q b
,
¿¿b c
client
¿¿d j
.
¿¿j k$
CloneClientProperties¿¿k €
)¿¿€ 
;¿¿ ‚
return
ÁÁ 
clonedClientId
ÁÁ !
;
ÁÁ! "
}
ÂÂ 	
public
ÄÄ 
Task
ÄÄ 
<
ÄÄ 
bool
ÄÄ 
>
ÄÄ "
CanInsertClientAsync
ÄÄ .
(
ÄÄ. /
	ClientDto
ÄÄ/ 8
client
ÄÄ9 ?
,
ÄÄ? @
bool
ÄÄA E
isCloned
ÄÄF N
=
ÄÄO P
false
ÄÄQ V
)
ÄÄV W
{
ÅÅ 	
var
ÆÆ 
clientEntity
ÆÆ 
=
ÆÆ 
client
ÆÆ %
.
ÆÆ% &
ToEntity
ÆÆ& .
(
ÆÆ. /
)
ÆÆ/ 0
;
ÆÆ0 1
return
ÈÈ 
_clientRepository
ÈÈ $
.
ÈÈ$ %"
CanInsertClientAsync
ÈÈ% 9
(
ÈÈ9 :
clientEntity
ÈÈ: F
,
ÈÈF G
isCloned
ÈÈH P
)
ÈÈP Q
;
ÈÈQ R
}
ÉÉ 	
public
ËË 
async
ËË 
Task
ËË 
<
ËË 
	ClientDto
ËË #
>
ËË# $
GetClientAsync
ËË% 3
(
ËË3 4
int
ËË4 7
clientId
ËË8 @
)
ËË@ A
{
ÌÌ 	
var
ÍÍ 
client
ÍÍ 
=
ÍÍ 
await
ÍÍ 
_clientRepository
ÍÍ 0
.
ÍÍ0 1
GetClientAsync
ÍÍ1 ?
(
ÍÍ? @
clientId
ÍÍ@ H
)
ÍÍH I
;
ÍÍI J
if
ÏÏ 
(
ÏÏ 
client
ÏÏ 
==
ÏÏ 
null
ÏÏ 
)
ÏÏ 
throw
ÏÏ  %
new
ÏÏ& ),
UserFriendlyErrorPageException
ÏÏ* H
(
ÏÏH I
string
ÏÏI O
.
ÏÏO P
Format
ÏÏP V
(
ÏÏV W%
_clientServiceResources
ÏÏW n
.
ÏÏn o!
ClientDoesNotExistÏÏo 
(ÏÏ ‚
)ÏÏ‚ ƒ
.ÏÏƒ „
DescriptionÏÏ„ 
,ÏÏ 
clientIdÏÏ‘ ™
)ÏÏ™ š
)ÏÏš ›
;ÏÏ› œ
var
ÑÑ 
	clientDto
ÑÑ 
=
ÑÑ 
client
ÑÑ "
.
ÑÑ" #
ToModel
ÑÑ# *
(
ÑÑ* +
)
ÑÑ+ ,
;
ÑÑ, -
return
ÓÓ 
	clientDto
ÓÓ 
;
ÓÓ 
}
ÔÔ 	
public
ÖÖ 
async
ÖÖ 
Task
ÖÖ 
<
ÖÖ 

ClientsDto
ÖÖ $
>
ÖÖ$ %
GetClientsAsync
ÖÖ& 5
(
ÖÖ5 6
string
ÖÖ6 <
search
ÖÖ= C
,
ÖÖC D
int
ÖÖE H
page
ÖÖI M
=
ÖÖN O
$num
ÖÖP Q
,
ÖÖQ R
int
ÖÖS V
pageSize
ÖÖW _
=
ÖÖ` a
$num
ÖÖb d
)
ÖÖd e
{
×× 	
var
ØØ 
	pagedList
ØØ 
=
ØØ 
await
ØØ !
_clientRepository
ØØ" 3
.
ØØ3 4
GetClientsAsync
ØØ4 C
(
ØØC D
search
ØØD J
,
ØØJ K
page
ØØL P
,
ØØP Q
pageSize
ØØR Z
)
ØØZ [
;
ØØ[ \
var
ÙÙ 

clientsDto
ÙÙ 
=
ÙÙ 
	pagedList
ÙÙ &
.
ÙÙ& '
ToModel
ÙÙ' .
(
ÙÙ. /
)
ÙÙ/ 0
;
ÙÙ0 1
return
ÛÛ 

clientsDto
ÛÛ 
;
ÛÛ 
}
ÜÜ 	
public
ÞÞ 
async
ÞÞ 
Task
ÞÞ 
<
ÞÞ 
List
ÞÞ 
<
ÞÞ 
string
ÞÞ %
>
ÞÞ% &
>
ÞÞ& '
GetScopesAsync
ÞÞ( 6
(
ÞÞ6 7
string
ÞÞ7 =
scope
ÞÞ> C
,
ÞÞC D
int
ÞÞE H
limit
ÞÞI N
=
ÞÞO P
$num
ÞÞQ R
)
ÞÞR S
{
ßß 	
var
àà 
scopes
àà 
=
àà 
await
àà 
_clientRepository
àà 0
.
àà0 1
GetScopesAsync
àà1 ?
(
àà? @
scope
àà@ E
,
ààE F
limit
ààG L
)
ààL M
;
ààM N
return
ââ 
scopes
ââ 
;
ââ 
}
ãã 	
public
åå 
List
åå 
<
åå 
string
åå 
>
åå 
GetGrantTypes
åå )
(
åå) *
string
åå* 0
grant
åå1 6
,
åå6 7
int
åå8 ;
limit
åå< A
=
ååB C
$num
ååD E
)
ååE F
{
ææ 	
var
çç 

grantTypes
çç 
=
çç 
_clientRepository
çç .
.
çç. /
GetGrantTypes
çç/ <
(
çç< =
grant
çç= B
,
ççB C
limit
ççD I
)
ççI J
;
ççJ K
return
éé 

grantTypes
éé 
;
éé 
}
êê 	
public
ìì 
List
ìì 
<
ìì 

SelectItem
ìì 
>
ìì !
GetAccessTokenTypes
ìì  3
(
ìì3 4
)
ìì4 5
{
íí 	
var
îî 
accessTokenTypes
îî  
=
îî! "
_clientRepository
îî# 4
.
îî4 5!
GetAccessTokenTypes
îî5 H
(
îîH I
)
îîI J
;
îîJ K
return
ðð 
accessTokenTypes
ðð #
;
ðð# $
}
ññ 	
public
óó 
List
óó 
<
óó 

SelectItem
óó 
>
óó !
GetTokenExpirations
óó  3
(
óó3 4
)
óó4 5
{
ôô 	
var
õõ 
tokenExpirations
õõ  
=
õõ! "
_clientRepository
õõ# 4
.
õõ4 5!
GetTokenExpirations
õõ5 H
(
õõH I
)
õõI J
;
õõJ K
return
÷÷ 
tokenExpirations
÷÷ #
;
÷÷# $
}
øø 	
public
úú 
List
úú 
<
úú 

SelectItem
úú 
>
úú 
GetTokenUsage
úú  -
(
úú- .
)
úú. /
{
ûû 	
var
üü 

tokenUsage
üü 
=
üü 
_clientRepository
üü .
.
üü. /
GetTokenUsage
üü/ <
(
üü< =
)
üü= >
;
üü> ?
return
þþ 

tokenUsage
þþ 
;
þþ 
}
ÿÿ 	
public
 
List
 
<
 

SelectItem
 
>
 
GetHashTypes
  ,
(
, -
)
- .
{
‚‚ 	
var
ƒƒ 
	hashTypes
ƒƒ 
=
ƒƒ 
_clientRepository
ƒƒ -
.
ƒƒ- .
GetHashTypes
ƒƒ. :
(
ƒƒ: ;
)
ƒƒ; <
;
ƒƒ< =
return
…… 
	hashTypes
…… 
;
…… 
}
†† 	
public
ˆˆ 
List
ˆˆ 
<
ˆˆ 

SelectItem
ˆˆ 
>
ˆˆ 
GetSecretTypes
ˆˆ  .
(
ˆˆ. /
)
ˆˆ/ 0
{
‰‰ 	
var
ŠŠ 
secretTypes
ŠŠ 
=
ŠŠ 
_clientRepository
ŠŠ /
.
ŠŠ/ 0
GetSecretTypes
ŠŠ0 >
(
ŠŠ> ?
)
ŠŠ? @
;
ŠŠ@ A
return
ŒŒ 
secretTypes
ŒŒ 
;
ŒŒ 
}
 	
public
 
List
 
<
 

SelectItem
 
>
 
GetProtocolTypes
  0
(
0 1
)
1 2
{
 	
var
‘‘ 
protocolTypes
‘‘ 
=
‘‘ 
_clientRepository
‘‘  1
.
‘‘1 2
GetProtocolTypes
‘‘2 B
(
‘‘B C
)
‘‘C D
;
‘‘D E
return
““ 
protocolTypes
““  
;
““  !
}
”” 	
public
–– 
List
–– 
<
–– 
string
–– 
>
–– 
GetStandardClaims
–– -
(
––- .
string
––. 4
claim
––5 :
,
––: ;
int
––< ?
limit
––@ E
=
––F G
$num
––H I
)
––I J
{
—— 	
var
˜˜ 
standardClaims
˜˜ 
=
˜˜  
_clientRepository
˜˜! 2
.
˜˜2 3
GetStandardClaims
˜˜3 D
(
˜˜D E
claim
˜˜E J
,
˜˜J K
limit
˜˜L Q
)
˜˜Q R
;
˜˜R S
return
šš 
standardClaims
šš !
;
šš! "
}
›› 	
public
 
async
 
Task
 
<
 
int
 
>
 "
AddClientSecretAsync
 3
(
3 4
ClientSecretsDto
4 D
clientSecret
E Q
)
Q R
{
žž 	$
HashClientSharedSecret
ŸŸ "
(
ŸŸ" #
clientSecret
ŸŸ# /
)
ŸŸ/ 0
;
ŸŸ0 1
var
¡¡  
clientSecretEntity
¡¡ "
=
¡¡# $
clientSecret
¡¡% 1
.
¡¡1 2
ToEntity
¡¡2 :
(
¡¡: ;
)
¡¡; <
;
¡¡< =
return
¢¢ 
await
¢¢ 
_clientRepository
¢¢ *
.
¢¢* +"
AddClientSecretAsync
¢¢+ ?
(
¢¢? @
clientSecret
¢¢@ L
.
¢¢L M
ClientId
¢¢M U
,
¢¢U V 
clientSecretEntity
¢¢W i
)
¢¢i j
;
¢¢j k
}
££ 	
public
¥¥ 
async
¥¥ 
Task
¥¥ 
<
¥¥ 
int
¥¥ 
>
¥¥ %
DeleteClientSecretAsync
¥¥ 6
(
¥¥6 7
ClientSecretsDto
¥¥7 G
clientSecret
¥¥H T
)
¥¥T U
{
¦¦ 	
var
§§  
clientSecretEntity
§§ "
=
§§# $
clientSecret
§§% 1
.
§§1 2
ToEntity
§§2 :
(
§§: ;
)
§§; <
;
§§< =
return
©© 
await
©© 
_clientRepository
©© *
.
©©* +%
DeleteClientSecretAsync
©©+ B
(
©©B C 
clientSecretEntity
©©C U
)
©©U V
;
©©V W
}
ªª 	
public
¬¬ 
async
¬¬ 
Task
¬¬ 
<
¬¬ 
ClientSecretsDto
¬¬ *
>
¬¬* +#
GetClientSecretsAsync
¬¬, A
(
¬¬A B
int
¬¬B E
clientId
¬¬F N
,
¬¬N O
int
¬¬P S
page
¬¬T X
=
¬¬Y Z
$num
¬¬[ \
,
¬¬\ ]
int
¬¬^ a
pageSize
¬¬b j
=
¬¬k l
$num
¬¬m o
)
¬¬o p
{
­­ 	
var
®® 

clientInfo
®® 
=
®® 
await
®® "
_clientRepository
®®# 4
.
®®4 5
GetClientIdAsync
®®5 E
(
®®E F
clientId
®®F N
)
®®N O
;
®®O P
if
¯¯ 
(
¯¯ 

clientInfo
¯¯ 
.
¯¯ 
ClientId
¯¯ #
==
¯¯$ &
null
¯¯' +
)
¯¯+ ,
throw
¯¯- 2
new
¯¯3 6,
UserFriendlyErrorPageException
¯¯7 U
(
¯¯U V
string
¯¯V \
.
¯¯\ ]
Format
¯¯] c
(
¯¯c d%
_clientServiceResources
¯¯d {
.
¯¯{ |!
ClientDoesNotExist¯¯| Ž
(¯¯Ž 
)¯¯ 
.¯¯ ‘
Description¯¯‘ œ
,¯¯œ 
clientId¯¯ž ¦
)¯¯¦ §
)¯¯§ ¨
;¯¯¨ ©
var
±± 
	pagedList
±± 
=
±± 
await
±± !
_clientRepository
±±" 3
.
±±3 4#
GetClientSecretsAsync
±±4 I
(
±±I J
clientId
±±J R
,
±±R S
page
±±T X
,
±±X Y
pageSize
±±Z b
)
±±b c
;
±±c d
var
²² 
clientSecretsDto
²²  
=
²²! "
	pagedList
²²# ,
.
²², -
ToModel
²²- 4
(
²²4 5
)
²²5 6
;
²²6 7
clientSecretsDto
³³ 
.
³³ 
ClientId
³³ %
=
³³& '
clientId
³³( 0
;
³³0 1
clientSecretsDto
´´ 
.
´´ 

ClientName
´´ '
=
´´( )
ViewHelpers
´´* 5
.
´´5 6
GetClientName
´´6 C
(
´´C D

clientInfo
´´D N
.
´´N O
ClientId
´´O W
,
´´W X

clientInfo
´´Y c
.
´´c d

ClientName
´´d n
)
´´n o
;
´´o p
return
¶¶ 
clientSecretsDto
¶¶ #
;
¶¶# $
}
·· 	
public
¹¹ 
async
¹¹ 
Task
¹¹ 
<
¹¹ 
ClientSecretsDto
¹¹ *
>
¹¹* +"
GetClientSecretAsync
¹¹, @
(
¹¹@ A
int
¹¹A D
clientSecretId
¹¹E S
)
¹¹S T
{
ºº 	
var
»» 
clientSecret
»» 
=
»» 
await
»» $
_clientRepository
»»% 6
.
»»6 7"
GetClientSecretAsync
»»7 K
(
»»K L
clientSecretId
»»L Z
)
»»Z [
;
»»[ \
if
¼¼ 
(
¼¼ 
clientSecret
¼¼ 
==
¼¼ 
null
¼¼  $
)
¼¼$ %
throw
¼¼& +
new
¼¼, /,
UserFriendlyErrorPageException
¼¼0 N
(
¼¼N O
string
¼¼O U
.
¼¼U V
Format
¼¼V \
(
¼¼\ ]%
_clientServiceResources
¼¼] t
.
¼¼t u'
ClientSecretDoesNotExist¼¼u 
(¼¼ Ž
)¼¼Ž 
.¼¼ 
Description¼¼ ›
,¼¼› œ
clientSecretId¼¼ «
)¼¼« ¬
)¼¼¬ ­
;¼¼­ ®
var
¾¾ 
clientSecretsDto
¾¾  
=
¾¾! "
clientSecret
¾¾# /
.
¾¾/ 0
ToModel
¾¾0 7
(
¾¾7 8
)
¾¾8 9
;
¾¾9 :
return
ÀÀ 
clientSecretsDto
ÀÀ #
;
ÀÀ# $
}
ÁÁ 	
public
ÃÃ 
async
ÃÃ 
Task
ÃÃ 
<
ÃÃ 
ClientClaimsDto
ÃÃ )
>
ÃÃ) *"
GetClientClaimsAsync
ÃÃ+ ?
(
ÃÃ? @
int
ÃÃ@ C
clientId
ÃÃD L
,
ÃÃL M
int
ÃÃN Q
page
ÃÃR V
=
ÃÃW X
$num
ÃÃY Z
,
ÃÃZ [
int
ÃÃ\ _
pageSize
ÃÃ` h
=
ÃÃi j
$num
ÃÃk m
)
ÃÃm n
{
ÄÄ 	
var
ÅÅ 

clientInfo
ÅÅ 
=
ÅÅ 
await
ÅÅ "
_clientRepository
ÅÅ# 4
.
ÅÅ4 5
GetClientIdAsync
ÅÅ5 E
(
ÅÅE F
clientId
ÅÅF N
)
ÅÅN O
;
ÅÅO P
if
ÆÆ 
(
ÆÆ 

clientInfo
ÆÆ 
.
ÆÆ 
ClientId
ÆÆ #
==
ÆÆ$ &
null
ÆÆ' +
)
ÆÆ+ ,
throw
ÆÆ- 2
new
ÆÆ3 6,
UserFriendlyErrorPageException
ÆÆ7 U
(
ÆÆU V
string
ÆÆV \
.
ÆÆ\ ]
Format
ÆÆ] c
(
ÆÆc d%
_clientServiceResources
ÆÆd {
.
ÆÆ{ |!
ClientDoesNotExistÆÆ| Ž
(ÆÆŽ 
)ÆÆ 
.ÆÆ ‘
DescriptionÆÆ‘ œ
,ÆÆœ 
clientIdÆÆž ¦
)ÆÆ¦ §
)ÆÆ§ ¨
;ÆÆ¨ ©
var
ÈÈ 
	pagedList
ÈÈ 
=
ÈÈ 
await
ÈÈ !
_clientRepository
ÈÈ" 3
.
ÈÈ3 4"
GetClientClaimsAsync
ÈÈ4 H
(
ÈÈH I
clientId
ÈÈI Q
,
ÈÈQ R
page
ÈÈS W
,
ÈÈW X
pageSize
ÈÈY a
)
ÈÈa b
;
ÈÈb c
var
ÉÉ 
clientClaimsDto
ÉÉ 
=
ÉÉ  !
	pagedList
ÉÉ" +
.
ÉÉ+ ,
ToModel
ÉÉ, 3
(
ÉÉ3 4
)
ÉÉ4 5
;
ÉÉ5 6
clientClaimsDto
ÊÊ 
.
ÊÊ 
ClientId
ÊÊ $
=
ÊÊ% &
clientId
ÊÊ' /
;
ÊÊ/ 0
clientClaimsDto
ËË 
.
ËË 

ClientName
ËË &
=
ËË' (
ViewHelpers
ËË) 4
.
ËË4 5
GetClientName
ËË5 B
(
ËËB C

clientInfo
ËËC M
.
ËËM N
ClientId
ËËN V
,
ËËV W

clientInfo
ËËX b
.
ËËb c

ClientName
ËËc m
)
ËËm n
;
ËËn o
return
ÍÍ 
clientClaimsDto
ÍÍ "
;
ÍÍ" #
}
ÎÎ 	
public
ÐÐ 
async
ÐÐ 
Task
ÐÐ 
<
ÐÐ !
ClientPropertiesDto
ÐÐ -
>
ÐÐ- .&
GetClientPropertiesAsync
ÐÐ/ G
(
ÐÐG H
int
ÐÐH K
clientId
ÐÐL T
,
ÐÐT U
int
ÐÐV Y
page
ÐÐZ ^
=
ÐÐ_ `
$num
ÐÐa b
,
ÐÐb c
int
ÐÐd g
pageSize
ÐÐh p
=
ÐÐq r
$num
ÐÐs u
)
ÐÐu v
{
ÑÑ 	
var
ÒÒ 

clientInfo
ÒÒ 
=
ÒÒ 
await
ÒÒ "
_clientRepository
ÒÒ# 4
.
ÒÒ4 5
GetClientIdAsync
ÒÒ5 E
(
ÒÒE F
clientId
ÒÒF N
)
ÒÒN O
;
ÒÒO P
if
ÓÓ 
(
ÓÓ 

clientInfo
ÓÓ 
.
ÓÓ 
ClientId
ÓÓ #
==
ÓÓ$ &
null
ÓÓ' +
)
ÓÓ+ ,
throw
ÓÓ- 2
new
ÓÓ3 6,
UserFriendlyErrorPageException
ÓÓ7 U
(
ÓÓU V
string
ÓÓV \
.
ÓÓ\ ]
Format
ÓÓ] c
(
ÓÓc d%
_clientServiceResources
ÓÓd {
.
ÓÓ{ |!
ClientDoesNotExistÓÓ| Ž
(ÓÓŽ 
)ÓÓ 
.ÓÓ ‘
DescriptionÓÓ‘ œ
,ÓÓœ 
clientIdÓÓž ¦
)ÓÓ¦ §
)ÓÓ§ ¨
;ÓÓ¨ ©
var
ÕÕ 
	pagedList
ÕÕ 
=
ÕÕ 
await
ÕÕ !
_clientRepository
ÕÕ" 3
.
ÕÕ3 4&
GetClientPropertiesAsync
ÕÕ4 L
(
ÕÕL M
clientId
ÕÕM U
,
ÕÕU V
page
ÕÕW [
,
ÕÕ[ \
pageSize
ÕÕ] e
)
ÕÕe f
;
ÕÕf g
var
ÖÖ !
clientPropertiesDto
ÖÖ #
=
ÖÖ$ %
	pagedList
ÖÖ& /
.
ÖÖ/ 0
ToModel
ÖÖ0 7
(
ÖÖ7 8
)
ÖÖ8 9
;
ÖÖ9 :!
clientPropertiesDto
×× 
.
××  
ClientId
××  (
=
××) *
clientId
××+ 3
;
××3 4!
clientPropertiesDto
ØØ 
.
ØØ  

ClientName
ØØ  *
=
ØØ+ ,
ViewHelpers
ØØ- 8
.
ØØ8 9
GetClientName
ØØ9 F
(
ØØF G

clientInfo
ØØG Q
.
ØØQ R
ClientId
ØØR Z
,
ØØZ [

clientInfo
ØØ\ f
.
ØØf g

ClientName
ØØg q
)
ØØq r
;
ØØr s
return
ÚÚ !
clientPropertiesDto
ÚÚ &
;
ÚÚ& '
}
ÛÛ 	
public
ÝÝ 
async
ÝÝ 
Task
ÝÝ 
<
ÝÝ 
ClientClaimsDto
ÝÝ )
>
ÝÝ) *!
GetClientClaimAsync
ÝÝ+ >
(
ÝÝ> ?
int
ÝÝ? B
clientClaimId
ÝÝC P
)
ÝÝP Q
{
ÞÞ 	
var
ßß 
clientClaim
ßß 
=
ßß 
await
ßß #
_clientRepository
ßß$ 5
.
ßß5 6!
GetClientClaimAsync
ßß6 I
(
ßßI J
clientClaimId
ßßJ W
)
ßßW X
;
ßßX Y
if
àà 
(
àà 
clientClaim
àà 
==
àà 
null
àà #
)
àà# $
throw
àà% *
new
àà+ .,
UserFriendlyErrorPageException
àà/ M
(
ààM N
string
ààN T
.
ààT U
Format
ààU [
(
àà[ \%
_clientServiceResources
àà\ s
.
ààs t&
ClientClaimDoesNotExistààt ‹
(àà‹ Œ
)ààŒ 
.àà Ž
DescriptionààŽ ™
,àà™ š
clientClaimIdàà› ¨
)àà¨ ©
)àà© ª
;ààª «
var
ââ 
clientClaimsDto
ââ 
=
ââ  !
clientClaim
ââ" -
.
ââ- .
ToModel
ââ. 5
(
ââ5 6
)
ââ6 7
;
ââ7 8
return
ää 
clientClaimsDto
ää "
;
ää" #
}
åå 	
public
çç 
async
çç 
Task
çç 
<
çç !
ClientPropertiesDto
çç -
>
çç- .$
GetClientPropertyAsync
çç/ E
(
ççE F
int
ççF I
clientPropertyId
ççJ Z
)
ççZ [
{
èè 	
var
éé 
clientProperty
éé 
=
éé  
await
éé! &
_clientRepository
éé' 8
.
éé8 9$
GetClientPropertyAsync
éé9 O
(
ééO P
clientPropertyId
ééP `
)
éé` a
;
ééa b
if
êê 
(
êê 
clientProperty
êê 
==
êê !
null
êê" &
)
êê& '
throw
êê( -
new
êê. 1,
UserFriendlyErrorPageException
êê2 P
(
êêP Q
string
êêQ W
.
êêW X
Format
êêX ^
(
êê^ _%
_clientServiceResources
êê_ v
.
êêv w)
ClientPropertyDoesNotExistêêw ‘
(êê‘ ’
)êê’ “
.êê“ ”
Descriptionêê” Ÿ
,êêŸ   
clientPropertyIdêê¡ ±
)êê± ²
)êê² ³
;êê³ ´
var
ìì !
clientPropertiesDto
ìì #
=
ìì$ %
clientProperty
ìì& 4
.
ìì4 5
ToModel
ìì5 <
(
ìì< =
)
ìì= >
;
ìì> ?
return
îî !
clientPropertiesDto
îî &
;
îî& '
}
ïï 	
public
ññ 
async
ññ 
Task
ññ 
<
ññ 
int
ññ 
>
ññ !
AddClientClaimAsync
ññ 2
(
ññ2 3
ClientClaimsDto
ññ3 B
clientClaim
ññC N
)
ññN O
{
òò 	
var
óó 
clientClaimEntity
óó !
=
óó" #
clientClaim
óó$ /
.
óó/ 0
ToEntity
óó0 8
(
óó8 9
)
óó9 :
;
óó: ;
return
õõ 
await
õõ 
_clientRepository
õõ *
.
õõ* +!
AddClientClaimAsync
õõ+ >
(
õõ> ?
clientClaim
õõ? J
.
õõJ K
ClientId
õõK S
,
õõS T
clientClaimEntity
õõU f
)
õõf g
;
õõg h
}
öö 	
public
øø 
async
øø 
Task
øø 
<
øø 
int
øø 
>
øø $
AddClientPropertyAsync
øø 5
(
øø5 6!
ClientPropertiesDto
øø6 I
clientProperties
øøJ Z
)
øøZ [
{
ùù 	
var
úú 
clientProperty
úú 
=
úú  
clientProperties
úú! 1
.
úú1 2
ToEntity
úú2 :
(
úú: ;
)
úú; <
;
úú< =
return
üü 
await
üü 
_clientRepository
üü *
.
üü* +$
AddClientPropertyAsync
üü+ A
(
üüA B
clientProperties
üüB R
.
üüR S
ClientId
üüS [
,
üü[ \
clientProperty
üü] k
)
üük l
;
üül m
}
ýý 	
public
ÿÿ 
async
ÿÿ 
Task
ÿÿ 
<
ÿÿ 
int
ÿÿ 
>
ÿÿ $
DeleteClientClaimAsync
ÿÿ 5
(
ÿÿ5 6
ClientClaimsDto
ÿÿ6 E
clientClaim
ÿÿF Q
)
ÿÿQ R
{
€€ 	
var
 
clientClaimEntity
 !
=
" #
clientClaim
$ /
.
/ 0
ToEntity
0 8
(
8 9
)
9 :
;
: ;
return
ƒƒ 
await
ƒƒ 
_clientRepository
ƒƒ *
.
ƒƒ* +$
DeleteClientClaimAsync
ƒƒ+ A
(
ƒƒA B
clientClaimEntity
ƒƒB S
)
ƒƒS T
;
ƒƒT U
}
„„ 	
public
†† 
async
†† 
Task
†† 
<
†† 
int
†† 
>
†† '
DeleteClientPropertyAsync
†† 8
(
††8 9!
ClientPropertiesDto
††9 L
clientProperty
††M [
)
††[ \
{
‡‡ 	
var
ˆˆ "
clientPropertyEntity
ˆˆ $
=
ˆˆ% &
clientProperty
ˆˆ' 5
.
ˆˆ5 6
ToEntity
ˆˆ6 >
(
ˆˆ> ?
)
ˆˆ? @
;
ˆˆ@ A
return
ŠŠ 
await
ŠŠ 
_clientRepository
ŠŠ *
.
ŠŠ* +'
DeleteClientPropertyAsync
ŠŠ+ D
(
ŠŠD E"
clientPropertyEntity
ŠŠE Y
)
ŠŠY Z
;
ŠŠZ [
}
‹‹ 	
}
ŒŒ 
} Î$
„C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Services\IApiResourceService.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Services4 <
{ 
public 

	interface 
IApiResourceService (
{ 
ApiSecretsDto $
BuildApiSecretsViewModel .
(. /
ApiSecretsDto/ <

apiSecrets= G
)G H
;H I
ApiScopesDto

 "
BuildApiScopeViewModel

 +
(

+ ,
ApiScopesDto

, 8
apiScope

9 A
)

A B
;

B C
Task 
< 
ApiResourcesDto 
>  
GetApiResourcesAsync 2
(2 3
string3 9
search: @
,@ A
intB E
pageF J
=K L
$numM N
,N O
intP S
pageSizeT \
=] ^
$num_ a
)a b
;b c
Task 
< 
ApiResourceDto 
> 
GetApiResourceAsync 0
(0 1
int1 4
apiResourceId5 B
)B C
;C D
Task 
< 
int 
> 
AddApiResourceAsync %
(% &
ApiResourceDto& 4
apiResource5 @
)@ A
;A B
Task 
< 
int 
> "
UpdateApiResourceAsync (
(( )
ApiResourceDto) 7
apiResource8 C
)C D
;D E
Task 
< 
int 
> "
DeleteApiResourceAsync (
(( )
ApiResourceDto) 7
apiResource8 C
)C D
;D E
Task 
< 
bool 
> %
CanInsertApiResourceAsync ,
(, -
ApiResourceDto- ;
apiResource< G
)G H
;H I
Task 
< 
ApiScopesDto 
> 
GetApiScopesAsync ,
(, -
int- 0
apiResourceId1 >
,> ?
int@ C
pageD H
=I J
$numK L
,L M
intN Q
pageSizeR Z
=[ \
$num] _
)_ `
;` a
Task 
< 
ApiScopesDto 
> 
GetApiScopeAsync +
(+ ,
int, /
apiResourceId0 =
,= >
int? B

apiScopeIdC M
)M N
;N O
Task 
< 
int 
> 
AddApiScopeAsync "
(" #
ApiScopesDto# /
apiScope0 8
)8 9
;9 :
Task 
< 
int 
> 
UpdateApiScopeAsync %
(% &
ApiScopesDto& 2
apiScope3 ;
); <
;< =
Task   
<   
int   
>   
DeleteApiScopeAsync   %
(  % &
ApiScopesDto  & 2
apiScope  3 ;
)  ; <
;  < =
Task"" 
<"" 
ApiSecretsDto"" 
>"" 
GetApiSecretsAsync"" .
("". /
int""/ 2
apiResourceId""3 @
,""@ A
int""B E
page""F J
=""K L
$num""M N
,""N O
int""P S
pageSize""T \
=""] ^
$num""_ a
)""a b
;""b c
Task$$ 
<$$ 
int$$ 
>$$ 
AddApiSecretAsync$$ #
($$# $
ApiSecretsDto$$$ 1
	apiSecret$$2 ;
)$$; <
;$$< =
Task&& 
<&& 
ApiSecretsDto&& 
>&& 
GetApiSecretAsync&& -
(&&- .
int&&. 1
apiSecretId&&2 =
)&&= >
;&&> ?
Task(( 
<(( 
int(( 
>((  
DeleteApiSecretAsync(( &
(((& '
ApiSecretsDto((' 4
	apiSecret((5 >
)((> ?
;((? @
Task** 
<** 
bool** 
>** "
CanInsertApiScopeAsync** )
(**) *
ApiScopesDto*** 6
	apiScopes**7 @
)**@ A
;**A B
Task,, 
<,, 
string,, 
>,, #
GetApiResourceNameAsync,, ,
(,,, -
int,,- 0
apiResourceId,,1 >
),,> ?
;,,? @
}-- 
}.. ¥9
…C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Services\IBaseIdentityService.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Services4 <
{ 
public 

	interface  
IBaseIdentityService )
<) *
in* ,
TUserId- 4
,4 5
in6 8
TRoleId9 @
,@ A
inB D
TClaimIdE M
>M N
{		 
Task

 
<

 
bool

 
>

 
ExistsUserAsync

 "
(

" #
TUserId

# *
userId

+ 1
)

1 2
;

2 3
Task 
< 
bool 
> 
ExistsRoleAsync "
(" #
TRoleId# *
roleId+ 1
)1 2
;2 3
Task 
< 
UserRolesDto 
> #
BuildUserRolesViewModel 2
(2 3
TUserId3 :
id; =
,= >
int? B
?B C
pageD H
)H I
;I J
Task 
< 
UsersDto 
> 
GetUsersAsync $
($ %
string% +
search, 2
,2 3
int4 7
page8 <
== >
$num? @
,@ A
intB E
pageSizeF N
=O P
$numQ S
)S T
;T U
Task 
< 
RolesDto 
> 
GetRolesAsync $
($ %
string% +
search, 2
,2 3
int4 7
page8 <
== >
$num? @
,@ A
intB E
pageSizeF N
=O P
$numQ S
)S T
;T U
Task 
< 
IdentityResult 
> 
CreateRoleAsync ,
(, -
RoleDto- 4
role5 9
)9 :
;: ;
Task 
< 
RoleDto 
> 
GetRoleAsync "
(" #
RoleDto# *
role+ /
)/ 0
;0 1
Task 
< 
List 
< 
RoleDto 
> 
> 
GetRolesAsync )
() *
)* +
;+ ,
Task 
< 
IdentityResult 
> 
UpdateRoleAsync ,
(, -
RoleDto- 4
role5 9
)9 :
;: ;
Task 
< 
UserDto 
> 
GetUserAsync "
(" #
UserDto# *
user+ /
)/ 0
;0 1
Task 
< 
IdentityResult 
> 
CreateUserAsync ,
(, -
UserDto- 4
user5 9
)9 :
;: ;
Task   
<   
IdentityResult   
>   
UpdateUserAsync   ,
(  , -
UserDto  - 4
user  5 9
)  9 :
;  : ;
Task"" 
<"" 
IdentityResult"" 
>"" 
DeleteUserAsync"" ,
("", -
UserDto""- 4
user""5 9
)""9 :
;"": ;
Task$$ 
<$$ 
IdentityResult$$ 
>$$ 
CreateUserRoleAsync$$ 0
($$0 1
UserRolesDto$$1 =
role$$> B
)$$B C
;$$C D
Task&& 
<&& 
UserRolesDto&& 
>&& 
GetUserRolesAsync&& ,
(&&, -
TUserId&&- 4
userId&&5 ;
,&&; <
int&&= @
page&&A E
=&&F G
$num&&H I
,&&I J
int&&K N
pageSize&&O W
=&&X Y
$num&&Z \
)&&\ ]
;&&] ^
Task(( 
<(( 
IdentityResult(( 
>(( 
DeleteUserRoleAsync(( 0
(((0 1
UserRolesDto((1 =
role((> B
)((B C
;((C D
Task** 
<** 
UserClaimsDto** 
>** 
GetUserClaimsAsync** .
(**. /
TUserId**/ 6
userId**7 =
,**= >
int**? B
page**C G
=**H I
$num**J K
,**K L
int**M P
pageSize**Q Y
=**Z [
$num**\ ^
)**^ _
;**_ `
Task,, 
<,, 
UserClaimsDto,, 
>,, 
GetUserClaimAsync,, -
(,,- .
TUserId,,. 5
userId,,6 <
,,,< =
TClaimId,,> F
claimId,,G N
),,N O
;,,O P
Task.. 
<.. 
IdentityResult.. 
>.. !
CreateUserClaimsAsync.. 2
(..2 3
UserClaimsDto..3 @
	claimsDto..A J
)..J K
;..K L
Task00 
<00 
int00 
>00 !
DeleteUserClaimsAsync00 '
(00' (
UserClaimsDto00( 5
claim006 ;
)00; <
;00< =
Task22 
<22 
UserProvidersDto22 
>22 !
GetUserProvidersAsync22 4
(224 5
TUserId225 <
userId22= C
)22C D
;22D E
Task44 
<44 
IdentityResult44 
>44 $
DeleteUserProvidersAsync44 5
(445 6
UserProviderDto446 E
provider44F N
)44N O
;44O P
Task66 
<66 
UserProviderDto66 
>66  
GetUserProviderAsync66 2
(662 3
TUserId663 :
userId66; A
,66A B
string66C I
providerKey66J U
)66U V
;66V W
Task88 
<88 
IdentityResult88 
>88 #
UserChangePasswordAsync88 4
(884 5!
UserChangePasswordDto885 J
userPassword88K W
)88W X
;88X Y
Task:: 
<:: 
IdentityResult:: 
>:: !
CreateRoleClaimsAsync:: 2
(::2 3
RoleClaimsDto::3 @
	claimsDto::A J
)::J K
;::K L
Task<< 
<<< 
RoleClaimsDto<< 
><< 
GetRoleClaimsAsync<< .
(<<. /
TRoleId<</ 6
roleId<<7 =
,<<= >
int<<? B
page<<C G
=<<H I
$num<<J K
,<<K L
int<<M P
pageSize<<Q Y
=<<Z [
$num<<\ ^
)<<^ _
;<<_ `
Task>> 
<>> 
RoleClaimsDto>> 
>>> 
GetRoleClaimAsync>> -
(>>- .
TRoleId>>. 5
roleId>>6 <
,>>< =
TClaimId>>> F
claimId>>G N
)>>N O
;>>O P
Task@@ 
<@@ 
int@@ 
>@@ !
DeleteRoleClaimsAsync@@ '
(@@' (
RoleClaimsDto@@( 5
claim@@6 ;
)@@; <
;@@< =
TaskBB 
<BB 
IdentityResultBB 
>BB 
DeleteRoleAsyncBB ,
(BB, -
RoleDtoBB- 4
roleBB5 9
)BB9 :
;BB: ;
}CC 
}DD Î8
C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Services\IClientService.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Services4 <
{ 
public 

	interface 
IClientService #
{		 
	ClientDto

  
BuildClientViewModel

 &
(

& '
	ClientDto

' 0
client

1 7
=

8 9
null

: >
)

> ?
;

? @
ClientSecretsDto '
BuildClientSecretsViewModel 4
(4 5
ClientSecretsDto5 E
clientSecretsF S
)S T
;T U
ClientCloneDto %
BuildClientCloneViewModel 0
(0 1
int1 4
id5 7
,7 8
	ClientDto9 B
	clientDtoC L
)L M
;M N
Task 
< 
int 
> 
AddClientAsync  
(  !
	ClientDto! *
client+ 1
)1 2
;2 3
Task 
< 
int 
> 
UpdateClientAsync #
(# $
	ClientDto$ -
client. 4
)4 5
;5 6
Task 
< 
int 
> 
RemoveClientAsync #
(# $
	ClientDto$ -
client. 4
)4 5
;5 6
Task 
< 
int 
> 
CloneClientAsync "
(" #
ClientCloneDto# 1
client2 8
)8 9
;9 :
Task 
< 
bool 
>  
CanInsertClientAsync '
(' (
	ClientDto( 1
client2 8
,8 9
bool: >
isCloned? G
=H I
falseJ O
)O P
;P Q
Task 
< 
	ClientDto 
> 
GetClientAsync &
(& '
int' *
clientId+ 3
)3 4
;4 5
Task 
< 

ClientsDto 
> 
GetClientsAsync (
(( )
string) /
search0 6
,6 7
int8 ;
page< @
=A B
$numC D
,D E
intF I
pageSizeJ R
=S T
$numU W
)W X
;X Y
Task 
< 
List 
< 
string 
> 
> 
GetScopesAsync )
() *
string* 0
scope1 6
,6 7
int8 ;
limit< A
=B C
$numD E
)E F
;F G
List   
<   
string   
>   
GetGrantTypes   "
(  " #
string  # )
grant  * /
,  / 0
int  1 4
limit  5 :
=  ; <
$num  = >
)  > ?
;  ? @
List"" 
<"" 

SelectItem"" 
>"" 
GetAccessTokenTypes"" ,
("", -
)""- .
;"". /
List$$ 
<$$ 

SelectItem$$ 
>$$ 
GetTokenExpirations$$ ,
($$, -
)$$- .
;$$. /
List&& 
<&& 

SelectItem&& 
>&& 
GetTokenUsage&& &
(&&& '
)&&' (
;&&( )
List(( 
<(( 

SelectItem(( 
>(( 
GetHashTypes(( %
(((% &
)((& '
;((' (
List** 
<** 

SelectItem** 
>** 
GetSecretTypes** '
(**' (
)**( )
;**) *
List,, 
<,, 
string,, 
>,, 
GetStandardClaims,, &
(,,& '
string,,' -
claim,,. 3
,,,3 4
int,,5 8
limit,,9 >
=,,? @
$num,,A B
),,B C
;,,C D
Task.. 
<.. 
int.. 
>..  
AddClientSecretAsync.. &
(..& '
ClientSecretsDto..' 7
clientSecret..8 D
)..D E
;..E F
Task00 
<00 
int00 
>00 #
DeleteClientSecretAsync00 )
(00) *
ClientSecretsDto00* :
clientSecret00; G
)00G H
;00H I
Task22 
<22 
ClientSecretsDto22 
>22 !
GetClientSecretsAsync22 4
(224 5
int225 8
clientId229 A
,22A B
int22C F
page22G K
=22L M
$num22N O
,22O P
int22Q T
pageSize22U ]
=22^ _
$num22` b
)22b c
;22c d
Task44 
<44 
ClientSecretsDto44 
>44  
GetClientSecretAsync44 3
(443 4
int444 7
clientSecretId448 F
)44F G
;44G H
Task66 
<66 
ClientClaimsDto66 
>66  
GetClientClaimsAsync66 2
(662 3
int663 6
clientId667 ?
,66? @
int66A D
page66E I
=66J K
$num66L M
,66M N
int66O R
pageSize66S [
=66\ ]
$num66^ `
)66` a
;66a b
Task88 
<88 
ClientPropertiesDto88  
>88  !$
GetClientPropertiesAsync88" :
(88: ;
int88; >
clientId88? G
,88G H
int88I L
page88M Q
=88R S
$num88T U
,88U V
int88W Z
pageSize88[ c
=88d e
$num88f h
)88h i
;88i j
Task:: 
<:: 
ClientClaimsDto:: 
>:: 
GetClientClaimAsync:: 1
(::1 2
int::2 5
clientClaimId::6 C
)::C D
;::D E
Task<< 
<<< 
ClientPropertiesDto<<  
><<  !"
GetClientPropertyAsync<<" 8
(<<8 9
int<<9 <
clientPropertyId<<= M
)<<M N
;<<N O
Task>> 
<>> 
int>> 
>>> 
AddClientClaimAsync>> %
(>>% &
ClientClaimsDto>>& 5
clientClaim>>6 A
)>>A B
;>>B C
Task@@ 
<@@ 
int@@ 
>@@ "
AddClientPropertyAsync@@ (
(@@( )
ClientPropertiesDto@@) <
clientProperties@@= M
)@@M N
;@@N O
TaskBB 
<BB 
intBB 
>BB "
DeleteClientClaimAsyncBB (
(BB( )
ClientClaimsDtoBB) 8
clientClaimBB9 D
)BBD E
;BBE F
TaskDD 
<DD 
intDD 
>DD %
DeleteClientPropertyAsyncDD +
(DD+ ,
ClientPropertiesDtoDD, ?
clientPropertyDD@ N
)DDN O
;DDO P
ListFF 
<FF 

SelectItemFF 
>FF 
GetProtocolTypesFF )
(FF) *
)FF* +
;FF+ ,
}GG 
}HH ¢E
ˆC:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Services\IdentityResourceService.cs
	namespace		 	
MAGVA		
 
.		 
Middle		 
.		 
Security		 
.		  
Admin		  %
.		% &
BusinessLogic		& 3
.		3 4
Services		4 <
{

 
public 

class #
IdentityResourceService (
:) *$
IIdentityResourceService+ C
{ 
private 
readonly '
IIdentityResourceRepository 4'
_identityResourceRepository5 P
;P Q
private 
readonly -
!IIdentityResourceServiceResources :-
!_identityResourceServiceResources; \
;\ ]
public #
IdentityResourceService &
(& ''
IIdentityResourceRepository' B&
identityResourceRepositoryC ]
,] ^-
!IIdentityResourceServiceResources -,
 identityResourceServiceResources. N
)N O
{ 	'
_identityResourceRepository '
=( )&
identityResourceRepository* D
;D E-
!_identityResourceServiceResources -
=. /,
 identityResourceServiceResources0 P
;P Q
} 	
public 
async 
Task 
<  
IdentityResourcesDto .
>. /%
GetIdentityResourcesAsync0 I
(I J
stringJ P
searchQ W
,W X
intY \
page] a
=b c
$numd e
,e f
intg j
pageSizek s
=t u
$numv x
)x y
{ 	
var 
	pagedList 
= 
await !'
_identityResourceRepository" =
.= >%
GetIdentityResourcesAsync> W
(W X
searchX ^
,^ _
page` d
,d e
pageSizef n
)n o
;o p
var  
identityResourcesDto $
=% &
	pagedList' 0
.0 1
ToModel1 8
(8 9
)9 :
;: ;
return  
identityResourcesDto '
;' (
} 	
public 
async 
Task 
< 
IdentityResourceDto -
>- .$
GetIdentityResourceAsync/ G
(G H
intH K
identityResourceIdL ^
)^ _
{   	
var!! 
identityResource!!  
=!!! "
await!!# ('
_identityResourceRepository!!) D
.!!D E$
GetIdentityResourceAsync!!E ]
(!!] ^
identityResourceId!!^ p
)!!p q
;!!q r
if"" 
("" 
identityResource""  
==""! #
null""$ (
)""( )
throw""* /
new""0 3*
UserFriendlyErrorPageException""4 R
(""R S
string""S Y
.""Y Z
Format""Z `
(""` a.
!_identityResourceServiceResources	""a ‚
.
""‚ ƒ*
IdentityResourceDoesNotExist
""ƒ Ÿ
(
""Ÿ  
)
""  ¡
.
""¡ ¢
Description
""¢ ­
,
""­ ® 
identityResourceId
""¯ Á
)
""Á Â
)
""Â Ã
;
""Ã Ä
var$$ 
identityResourceDto$$ #
=$$$ %
identityResource$$& 6
.$$6 7
ToModel$$7 >
($$> ?
)$$? @
;$$@ A
return&& 
identityResourceDto&& &
;&&& '
}'' 	
public)) 
async)) 
Task)) 
<)) 
bool)) 
>)) *
CanInsertIdentityResourceAsync))  >
())> ?
IdentityResourceDto))? R
identityResource))S c
)))c d
{** 	
var++ 
resource++ 
=++ 
identityResource++ +
.+++ ,
ToEntity++, 4
(++4 5
)++5 6
;++6 7
return-- 
await-- '
_identityResourceRepository-- 4
.--4 5*
CanInsertIdentityResourceAsync--5 S
(--S T
resource--T \
)--\ ]
;--] ^
}.. 	
public00 
async00 
Task00 
<00 
int00 
>00 $
AddIdentityResourceAsync00 7
(007 8
IdentityResourceDto008 K
identityResource00L \
)00\ ]
{11 	
var22 
	canInsert22 
=22 
await22 !*
CanInsertIdentityResourceAsync22" @
(22@ A
identityResource22A Q
)22Q R
;22R S
if33 
(33 
!33 
	canInsert33 
)33 
{44 
throw55 
new55 %
UserFriendlyViewException55 3
(553 4
string554 :
.55: ;
Format55; A
(55A B-
!_identityResourceServiceResources55B c
.55c d'
IdentityResourceExistsValue55d 
(	55 €
)
55€ 
.
55 ‚
Description
55‚ 
,
55 Ž
identityResource
55 Ÿ
.
55Ÿ  
Name
55  ¤
)
55¤ ¥
,
55¥ ¦/
!_identityResourceServiceResources
55§ È
.
55È É'
IdentityResourceExistsKey
55É â
(
55â ã
)
55ã ä
.
55ä å
Description
55å ð
,
55ð ñ
identityResource
55ò ‚
)
55‚ ƒ
;
55ƒ „
}66 
var88 
resource88 
=88 
identityResource88 +
.88+ ,
ToEntity88, 4
(884 5
)885 6
;886 7
return:: 
await:: '
_identityResourceRepository:: 4
.::4 5$
AddIdentityResourceAsync::5 M
(::M N
resource::N V
)::V W
;::W X
};; 	
public== 
async== 
Task== 
<== 
int== 
>== '
UpdateIdentityResourceAsync== :
(==: ;
IdentityResourceDto==; N
identityResource==O _
)==_ `
{>> 	
var?? 
	canInsert?? 
=?? 
await?? !*
CanInsertIdentityResourceAsync??" @
(??@ A
identityResource??A Q
)??Q R
;??R S
if@@ 
(@@ 
!@@ 
	canInsert@@ 
)@@ 
{AA 
throwBB 
newBB %
UserFriendlyViewExceptionBB 3
(BB3 4
stringBB4 :
.BB: ;
FormatBB; A
(BBA B-
!_identityResourceServiceResourcesBBB c
.BBc d'
IdentityResourceExistsValueBBd 
(	BB €
)
BB€ 
.
BB ‚
Description
BB‚ 
,
BB Ž
identityResource
BB Ÿ
.
BBŸ  
Name
BB  ¤
)
BB¤ ¥
,
BB¥ ¦/
!_identityResourceServiceResources
BB§ È
.
BBÈ É'
IdentityResourceExistsKey
BBÉ â
(
BBâ ã
)
BBã ä
.
BBä å
Description
BBå ð
,
BBð ñ
identityResource
BBò ‚
)
BB‚ ƒ
;
BBƒ „
}CC 
varEE 
resourceEE 
=EE 
identityResourceEE +
.EE+ ,
ToEntityEE, 4
(EE4 5
)EE5 6
;EE6 7
returnGG 
awaitGG '
_identityResourceRepositoryGG 4
.GG4 5'
UpdateIdentityResourceAsyncGG5 P
(GGP Q
resourceGGQ Y
)GGY Z
;GGZ [
}HH 	
publicJJ 
asyncJJ 
TaskJJ 
<JJ 
intJJ 
>JJ '
DeleteIdentityResourceAsyncJJ :
(JJ: ;
IdentityResourceDtoJJ; N
identityResourceJJO _
)JJ_ `
{KK 	
varLL 
resourceLL 
=LL 
identityResourceLL +
.LL+ ,
ToEntityLL, 4
(LL4 5
)LL5 6
;LL6 7
returnNN 
awaitNN '
_identityResourceRepositoryNN 4
.NN4 5'
DeleteIdentityResourceAsyncNN5 P
(NNP Q
resourceNNQ Y
)NNY Z
;NNZ [
}OO 	
publicQQ 
IdentityResourceDtoQQ "*
BuildIdentityResourceViewModelQQ# A
(QQA B
IdentityResourceDtoQQB U
identityResourceQQV f
)QQf g
{RR 	
ComboBoxHelpersSS 
.SS  
PopulateValuesToListSS 0
(SS0 1
identityResourceSS1 A
.SSA B
UserClaimsItemsSSB Q
,SSQ R
identityResourceSSS c
.SSc d

UserClaimsSSd n
)SSn o
;SSo p
returnUU 
identityResourceUU #
;UU# $
}VV 	
}WW 
}XX åâ
€C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Services\IdentityService.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Services4 <
{ 
public 

class 
IdentityService  
:! "
IIdentityService# 3
{ 
private 
readonly 
IIdentityRepository ,
_identityRepository- @
;@ A
private 
readonly %
IIdentityServiceResources 2%
_identityServiceResources3 L
;L M
public 
IdentityService 
( 
IIdentityRepository 2
identityRepository3 E
,E F%
IIdentityServiceResources %$
identityServiceResources& >
)> ?
{ 	
_identityRepository 
=  !
identityRepository" 4
;4 5%
_identityServiceResources %
=& '$
identityServiceResources( @
;@ A
} 	
public 
async 
Task 
< 
bool 
> 
ExistsUserAsync  /
(/ 0
int0 3
userId4 :
): ;
{ 	
var 
exists 
= 
await 
_identityRepository 2
.2 3
ExistsUserAsync3 B
(B C
userIdC I
)I J
;J K
if 
( 
! 
exists 
) 
throw 
new "*
UserFriendlyErrorPageException# A
(A B
stringB H
.H I
FormatI O
(O P%
_identityServiceResourcesP i
.i j
UserDoesNotExistj z
(z {
){ |
.| }
Description	} ˆ
,
ˆ ‰
userId
Š 
)
 ‘
,
‘ ’'
_identityServiceResources
“ ¬
.
¬ ­
UserDoesNotExist
­ ½
(
½ ¾
)
¾ ¿
.
¿ À
Description
À Ë
)
Ë Ì
;
Ì Í
return   
true   
;   
}!! 	
public## 
async## 
Task## 
<## 
bool## 
>## 
ExistsRoleAsync##  /
(##/ 0
int##0 3
roleId##4 :
)##: ;
{$$ 	
var%% 
exists%% 
=%% 
await%% 
_identityRepository%% 2
.%%2 3
ExistsRoleAsync%%3 B
(%%B C
roleId%%C I
)%%I J
;%%J K
if&& 
(&& 
!&& 
exists&& 
)&& 
throw&& 
new&& "*
UserFriendlyErrorPageException&&# A
(&&A B
string&&B H
.&&H I
Format&&I O
(&&O P%
_identityServiceResources&&P i
.&&i j
RoleDoesNotExist&&j z
(&&z {
)&&{ |
.&&| }
Description	&&} ˆ
,
&&ˆ ‰
roleId
&&Š 
)
&& ‘
,
&&‘ ’'
_identityServiceResources
&&“ ¬
.
&&¬ ­
RoleDoesNotExist
&&­ ½
(
&&½ ¾
)
&&¾ ¿
.
&&¿ À
Description
&&À Ë
)
&&Ë Ì
;
&&Ì Í
return(( 
true(( 
;(( 
})) 	
public++ 
async++ 
Task++ 
<++ 
UsersDto++ "
>++" #
GetUsersAsync++$ 1
(++1 2
string++2 8
search++9 ?
,++? @
int++A D
page++E I
=++J K
$num++L M
,++M N
int++O R
pageSize++S [
=++\ ]
$num++^ `
)++` a
{,, 	
var-- 
	pagedList-- 
=-- 
await-- !
_identityRepository--" 5
.--5 6
GetUsersAsync--6 C
(--C D
search--D J
,--J K
page--L P
,--P Q
pageSize--R Z
)--Z [
;--[ \
var.. 
usersDto.. 
=.. 
	pagedList.. $
...$ %
ToModel..% ,
(.., -
)..- .
;... /
return00 
usersDto00 
;00 
}11 	
public33 
async33 
Task33 
<33 
RolesDto33 "
>33" #
GetRolesAsync33$ 1
(331 2
string332 8
search339 ?
,33? @
int33A D
page33E I
=33J K
$num33L M
,33M N
int33O R
pageSize33S [
=33\ ]
$num33^ `
)33` a
{44 	
var55 
	pagedList55 
=55 
await55 !
_identityRepository55" 5
.555 6
GetRolesAsync556 C
(55C D
search55D J
,55J K
page55L P
,55P Q
pageSize55R Z
)55Z [
;55[ \
var66 
rolesDto66 
=66 
	pagedList66 $
.66$ %
ToModel66% ,
(66, -
)66- .
;66. /
return88 
rolesDto88 
;88 
}99 	
public;; 
async;; 
Task;; 
<;; 
IdentityResult;; (
>;;( )
CreateRoleAsync;;* 9
(;;9 :
RoleDto;;: A
role;;B F
);;F G
{<< 	
var== 

roleEntity== 
=== 
role== !
.==! "
ToEntity==" *
(==* +
)==+ ,
;==, -
var>> 
identityResult>> 
=>>  
await>>! &
_identityRepository>>' :
.>>: ;
CreateRoleAsync>>; J
(>>J K

roleEntity>>K U
)>>U V
;>>V W
return@@ 
HandleIdentityError@@ &
(@@& '
identityResult@@' 5
,@@5 6%
_identityServiceResources@@7 P
.@@P Q
RoleCreateFailed@@Q a
(@@a b
)@@b c
.@@c d
Description@@d o
,@@o p&
_identityServiceResources	@@q Š
.
@@Š ‹
IdentityErrorKey
@@‹ ›
(
@@› œ
)
@@œ 
.
@@ ž
Description
@@ž ©
,
@@© ª
role
@@« ¯
)
@@¯ °
;
@@° ±
}AA 	
privateCC 
IdentityResultCC 
HandleIdentityErrorCC 2
(CC2 3
IdentityResultCC3 A
identityResultCCB P
,CCP Q
stringCCR X
errorMessageCCY e
,CCe f
stringCCg m
errorKeyCCn v
,CCv w
objectCCx ~
model	CC „
)
CC„ …
{DD 	
ifEE 
(EE 
!EE 
identityResultEE 
.EE  
ErrorsEE  &
.EE& '
AnyEE' *
(EE* +
)EE+ ,
)EE, -
returnEE. 4
identityResultEE5 C
;EEC D
varFF 
viewErrorMessagesFF !
=FF" #
identityResultFF$ 2
.FF2 3
ErrorsFF3 9
.FF9 :
ToModelFF: A
(FFA B
)FFB C
;FFC D
throwGG 
newGG %
UserFriendlyViewExceptionGG /
(GG/ 0
errorMessageGG0 <
,GG< =
errorKeyGG> F
,GGF G
viewErrorMessagesGGH Y
,GGY Z
modelGG[ `
)GG` a
;GGa b
}HH 	
publicJJ 
asyncJJ 
TaskJJ 
<JJ 
RoleDtoJJ !
>JJ! "
GetRoleAsyncJJ# /
(JJ/ 0
RoleDtoJJ0 7
roleJJ8 <
)JJ< =
{KK 	
varLL 

roleEntityLL 
=LL 
roleLL !
.LL! "
ToEntityLL" *
(LL* +
)LL+ ,
;LL, -
varMM 
userIdentityRoleMM  
=MM! "
awaitMM# (
_identityRepositoryMM) <
.MM< =
GetRoleAsyncMM= I
(MMI J

roleEntityMMJ T
)MMT U
;MMU V
ifNN 
(NN 
userIdentityRoleNN  
==NN! #
nullNN$ (
)NN( )
throwNN* /
newNN0 3*
UserFriendlyErrorPageExceptionNN4 R
(NNR S
stringNNS Y
.NNY Z
FormatNNZ `
(NN` a%
_identityServiceResourcesNNa z
.NNz {
RoleDoesNotExist	NN{ ‹
(
NN‹ Œ
)
NNŒ 
.
NN Ž
Description
NNŽ ™
,
NN™ š
role
NN› Ÿ
.
NNŸ  
Id
NN  ¢
)
NN¢ £
,
NN£ ¤'
_identityServiceResources
NN¥ ¾
.
NN¾ ¿
RoleDoesNotExist
NN¿ Ï
(
NNÏ Ð
)
NNÐ Ñ
.
NNÑ Ò
Description
NNÒ Ý
)
NNÝ Þ
;
NNÞ ß
varOO 
roleDtoOO 
=OO 
userIdentityRoleOO *
.OO* +
ToModelOO+ 2
(OO2 3
)OO3 4
;OO4 5
returnQQ 
roleDtoQQ 
;QQ 
}RR 	
publicTT 
asyncTT 
TaskTT 
<TT 
ListTT 
<TT 
RoleDtoTT &
>TT& '
>TT' (
GetRolesAsyncTT) 6
(TT6 7
)TT7 8
{UU 	
varVV 
rolesVV 
=VV 
awaitVV 
_identityRepositoryVV 1
.VV1 2
GetRolesAsyncVV2 ?
(VV? @
)VV@ A
;VVA B
varWW 
roleDtosWW 
=WW 
rolesWW  
.WW  !
ToModelWW! (
(WW( )
)WW) *
;WW* +
returnYY 
roleDtosYY 
;YY 
}ZZ 	
public\\ 
async\\ 
Task\\ 
<\\ 
IdentityResult\\ (
>\\( )
UpdateRoleAsync\\* 9
(\\9 :
RoleDto\\: A
role\\B F
)\\F G
{]] 	
var^^ 
userIdentityRole^^  
=^^! "
role^^# '
.^^' (
ToEntity^^( 0
(^^0 1
)^^1 2
;^^2 3
var__ 
identityResult__ 
=__  
await__! &
_identityRepository__' :
.__: ;
UpdateRoleAsync__; J
(__J K
userIdentityRole__K [
)__[ \
;__\ ]
returnaa 
HandleIdentityErroraa &
(aa& '
identityResultaa' 5
,aa5 6%
_identityServiceResourcesaa7 P
.aaP Q
RoleUpdateFailedaaQ a
(aaa b
)aab c
.aac d
Descriptionaad o
,aao p&
_identityServiceResources	aaq Š
.
aaŠ ‹
IdentityErrorKey
aa‹ ›
(
aa› œ
)
aaœ 
.
aa ž
Description
aaž ©
,
aa© ª
role
aa« ¯
)
aa¯ °
;
aa° ±
}bb 	
publicdd 
asyncdd 
Taskdd 
<dd 
UserDtodd !
>dd! "
GetUserAsyncdd# /
(dd/ 0
UserDtodd0 7
userdd8 <
)dd< =
{ee 	
varff 
userIdentityff 
=ff 
userff #
.ff# $
ToEntityff$ ,
(ff, -
)ff- .
;ff. /
vargg 
identitygg 
=gg 
awaitgg  
_identityRepositorygg! 4
.gg4 5
GetUserAsyncgg5 A
(ggA B
userIdentityggB N
)ggN O
;ggO P
ifhh 
(hh 
identityhh 
==hh 
nullhh  
)hh  !
throwhh" '
newhh( +*
UserFriendlyErrorPageExceptionhh, J
(hhJ K
stringhhK Q
.hhQ R
FormathhR X
(hhX Y%
_identityServiceResourceshhY r
.hhr s
UserDoesNotExist	hhs ƒ
(
hhƒ „
)
hh„ …
.
hh… †
Description
hh† ‘
,
hh‘ ’
user
hh“ —
.
hh— ˜
Id
hh˜ š
)
hhš ›
,
hh› œ'
_identityServiceResources
hh ¶
.
hh¶ ·
UserDoesNotExist
hh· Ç
(
hhÇ È
)
hhÈ É
.
hhÉ Ê
Description
hhÊ Õ
)
hhÕ Ö
;
hhÖ ×
varjj 
userDtojj 
=jj 
identityjj "
.jj" #
ToModeljj# *
(jj* +
)jj+ ,
;jj, -
returnll 
userDtoll 
;ll 
}mm 	
publicoo 
asyncoo 
Taskoo 
<oo 
IdentityResultoo (
>oo( )
CreateUserAsyncoo* 9
(oo9 :
UserDtooo: A
userooB F
)ooF G
{pp 	
varqq 
userIdentityqq 
=qq 
userqq #
.qq# $
ToEntityqq$ ,
(qq, -
)qq- .
;qq. /
varrr 
identityResultrr 
=rr  
awaitrr! &
_identityRepositoryrr' :
.rr: ;
CreateUserAsyncrr; J
(rrJ K
userIdentityrrK W
)rrW X
;rrX Y
returntt 
HandleIdentityErrortt &
(tt& '
identityResulttt' 5
,tt5 6%
_identityServiceResourcestt7 P
.ttP Q
UserCreateFailedttQ a
(tta b
)ttb c
.ttc d
Descriptionttd o
,tto p&
_identityServiceResources	ttq Š
.
ttŠ ‹
IdentityErrorKey
tt‹ ›
(
tt› œ
)
ttœ 
.
tt ž
Description
ttž ©
,
tt© ª
user
tt« ¯
)
tt¯ °
;
tt° ±
}uu 	
publicww 
asyncww 
Taskww 
<ww 
IdentityResultww (
>ww( )
UpdateUserAsyncww* 9
(ww9 :
UserDtoww: A
userwwB F
)wwF G
{xx 	
varyy 
userIdentityyy 
=yy 
useryy #
.yy# $
ToEntityyy$ ,
(yy, -
)yy- .
;yy. /
varzz 
identityResultzz 
=zz  
awaitzz! &
_identityRepositoryzz' :
.zz: ;
UpdateUserAsynczz; J
(zzJ K
userIdentityzzK W
)zzW X
;zzX Y
return|| 
HandleIdentityError|| &
(||& '
identityResult||' 5
,||5 6%
_identityServiceResources||7 P
.||P Q
UserUpdateFailed||Q a
(||a b
)||b c
.||c d
Description||d o
,||o p&
_identityServiceResources	||q Š
.
||Š ‹
IdentityErrorKey
||‹ ›
(
||› œ
)
||œ 
.
|| ž
Description
||ž ©
,
||© ª
user
||« ¯
)
||¯ °
;
||° ±
}}} 	
public 
async 
Task 
< 
IdentityResult (
>( )
DeleteUserAsync* 9
(9 :
UserDto: A
userB F
)F G
{
€€ 	
var
 
userIdentity
 
=
 
user
 #
.
# $
ToEntity
$ ,
(
, -
)
- .
;
. /
var
‚‚ 
identityResult
‚‚ 
=
‚‚  
await
‚‚! &!
_identityRepository
‚‚' :
.
‚‚: ;
DeleteUserAsync
‚‚; J
(
‚‚J K
userIdentity
‚‚K W
)
‚‚W X
;
‚‚X Y
return
„„ !
HandleIdentityError
„„ &
(
„„& '
identityResult
„„' 5
,
„„5 6'
_identityServiceResources
„„7 P
.
„„P Q
UserDeleteFailed
„„Q a
(
„„a b
)
„„b c
.
„„c d
Description
„„d o
,
„„o p(
_identityServiceResources„„q Š
.„„Š ‹ 
IdentityErrorKey„„‹ ›
(„„› œ
)„„œ 
.„„ ž
Description„„ž ©
,„„© ª
user„„« ¯
)„„¯ °
;„„° ±
}
…… 	
public
‡‡ 
async
‡‡ 
Task
‡‡ 
<
‡‡ 
IdentityResult
‡‡ (
>
‡‡( )!
CreateUserRoleAsync
‡‡* =
(
‡‡= >
UserRolesDto
‡‡> J
role
‡‡K O
)
‡‡O P
{
ˆˆ 	
var
‰‰ 
identityResult
‰‰ 
=
‰‰  
await
‰‰! &!
_identityRepository
‰‰' :
.
‰‰: ;!
CreateUserRoleAsync
‰‰; N
(
‰‰N O
role
‰‰O S
.
‰‰S T
UserId
‰‰T Z
,
‰‰Z [
role
‰‰\ `
.
‰‰` a
RoleId
‰‰a g
)
‰‰g h
;
‰‰h i
if
‹‹ 
(
‹‹ 
!
‹‹ 
identityResult
‹‹ 
.
‹‹  
Errors
‹‹  &
.
‹‹& '
Any
‹‹' *
(
‹‹* +
)
‹‹+ ,
)
‹‹, -
return
‹‹. 4
identityResult
‹‹5 C
;
‹‹C D
var
 
userRolesDto
 
=
 
await
 $%
BuildUserRolesViewModel
% <
(
< =
role
= A
.
A B
UserId
B H
,
H I
$num
J K
)
K L
;
L M
return
ŽŽ !
HandleIdentityError
ŽŽ &
(
ŽŽ& '
identityResult
ŽŽ' 5
,
ŽŽ5 6'
_identityServiceResources
ŽŽ7 P
.
ŽŽP Q"
UserRoleCreateFailed
ŽŽQ e
(
ŽŽe f
)
ŽŽf g
.
ŽŽg h
Description
ŽŽh s
,
ŽŽs t(
_identityServiceResourcesŽŽu Ž
.ŽŽŽ  
IdentityErrorKeyŽŽ Ÿ
(ŽŽŸ  
)ŽŽ  ¡
.ŽŽ¡ ¢
DescriptionŽŽ¢ ­
,ŽŽ­ ®
userRolesDtoŽŽ¯ »
)ŽŽ» ¼
;ŽŽ¼ ½
}
 	
public
‘‘ 
async
‘‘ 
Task
‘‘ 
<
‘‘ 
UserRolesDto
‘‘ &
>
‘‘& '%
BuildUserRolesViewModel
‘‘( ?
(
‘‘? @
int
‘‘@ C
id
‘‘D F
,
‘‘F G
int
‘‘H K
?
‘‘K L
page
‘‘M Q
)
‘‘Q R
{
’’ 	
var
““ 
roles
““ 
=
““ 
await
““ 
GetRolesAsync
““ +
(
““+ ,
)
““, -
;
““- .
var
”” 
	userRoles
”” 
=
”” 
await
”” !
GetUserRolesAsync
””" 3
(
””3 4
id
””4 6
,
””6 7
page
””8 <
??
””= ?
$num
””@ A
)
””A B
;
””B C
	userRoles
•• 
.
•• 
UserId
•• 
=
•• 
id
•• !
;
••! "
	userRoles
–– 
.
–– 
	RolesList
–– 
=
––  !
roles
––" '
.
––' (
Select
––( .
(
––. /
x
––/ 0
=>
––1 3
new
––4 7

SelectItem
––8 B
(
––B C
x
––C D
.
––D E
Id
––E G
.
––G H
ToString
––H P
(
––P Q
)
––Q R
,
––R S
x
––T U
.
––U V
Name
––V Z
)
––Z [
)
––[ \
.
––\ ]
ToList
––] c
(
––c d
)
––d e
;
––e f
return
˜˜ 
	userRoles
˜˜ 
;
˜˜ 
}
™™ 	
public
›› 
async
›› 
Task
›› 
<
›› 
UserRolesDto
›› &
>
››& '
GetUserRolesAsync
››( 9
(
››9 :
int
››: =
userId
››> D
,
››D E
int
››F I
page
››J N
=
››O P
$num
››Q R
,
››R S
int
››T W
pageSize
››X `
=
››a b
$num
››c e
)
››e f
{
œœ 	
var
 

userExists
 
=
 
await
 "!
_identityRepository
# 6
.
6 7
ExistsUserAsync
7 F
(
F G
userId
G M
)
M N
;
N O
if
žž 
(
žž 
!
žž 

userExists
žž 
)
žž 
throw
žž "
new
žž# &,
UserFriendlyErrorPageException
žž' E
(
žžE F
string
žžF L
.
žžL M
Format
žžM S
(
žžS T'
_identityServiceResources
žžT m
.
žžm n
UserDoesNotExist
žžn ~
(
žž~ 
)žž €
.žž€ 
Descriptionžž Œ
,žžŒ 
userIdžžŽ ”
)žž” •
,žž• –)
_identityServiceResourcesžž— °
.žž° ± 
UserDoesNotExistžž± Á
(žžÁ Â
)žžÂ Ã
.žžÃ Ä
DescriptionžžÄ Ï
)žžÏ Ð
;žžÐ Ñ
var
   
userIdentityRoles
   !
=
  " #
await
  $ )!
_identityRepository
  * =
.
  = >
GetUserRolesAsync
  > O
(
  O P
userId
  P V
,
  V W
page
  X \
,
  \ ]
pageSize
  ^ f
)
  f g
;
  g h
var
¡¡ 
roleDtos
¡¡ 
=
¡¡ 
userIdentityRoles
¡¡ ,
.
¡¡, -

MapToModel
¡¡- 7
(
¡¡7 8
)
¡¡8 9
;
¡¡9 :
return
££ 
roleDtos
££ 
;
££ 
}
¤¤ 	
public
¦¦ 
async
¦¦ 
Task
¦¦ 
<
¦¦ 
IdentityResult
¦¦ (
>
¦¦( )!
DeleteUserRoleAsync
¦¦* =
(
¦¦= >
UserRolesDto
¦¦> J
role
¦¦K O
)
¦¦O P
{
§§ 	
var
¨¨ 
identityResult
¨¨ 
=
¨¨  
await
¨¨! &!
_identityRepository
¨¨' :
.
¨¨: ;!
DeleteUserRoleAsync
¨¨; N
(
¨¨N O
role
¨¨O S
.
¨¨S T
UserId
¨¨T Z
,
¨¨Z [
role
¨¨\ `
.
¨¨` a
RoleId
¨¨a g
)
¨¨g h
;
¨¨h i
return
ªª !
HandleIdentityError
ªª &
(
ªª& '
identityResult
ªª' 5
,
ªª5 6'
_identityServiceResources
ªª7 P
.
ªªP Q"
UserRoleDeleteFailed
ªªQ e
(
ªªe f
)
ªªf g
.
ªªg h
Description
ªªh s
,
ªªs t(
_identityServiceResourcesªªu Ž
.ªªŽ  
IdentityErrorKeyªª Ÿ
(ªªŸ  
)ªª  ¡
.ªª¡ ¢
Descriptionªª¢ ­
,ªª­ ®
roleªª¯ ³
)ªª³ ´
;ªª´ µ
}
«« 	
public
­­ 
async
­­ 
Task
­­ 
<
­­ 
UserClaimsDto
­­ '
>
­­' ( 
GetUserClaimsAsync
­­) ;
(
­­; <
int
­­< ?
userId
­­@ F
,
­­F G
int
­­H K
page
­­L P
=
­­Q R
$num
­­S T
,
­­T U
int
­­V Y
pageSize
­­Z b
=
­­c d
$num
­­e g
)
­­g h
{
®® 	
var
¯¯ 

userExists
¯¯ 
=
¯¯ 
await
¯¯ "!
_identityRepository
¯¯# 6
.
¯¯6 7
ExistsUserAsync
¯¯7 F
(
¯¯F G
userId
¯¯G M
)
¯¯M N
;
¯¯N O
if
°° 
(
°° 
!
°° 

userExists
°° 
)
°° 
throw
°° "
new
°°# &,
UserFriendlyErrorPageException
°°' E
(
°°E F
string
°°F L
.
°°L M
Format
°°M S
(
°°S T'
_identityServiceResources
°°T m
.
°°m n
UserDoesNotExist
°°n ~
(
°°~ 
)°° €
.°°€ 
Description°° Œ
,°°Œ 
userId°°Ž ”
)°°” •
,°°• –)
_identityServiceResources°°— °
.°°° ± 
UserDoesNotExist°°± Á
(°°Á Â
)°°Â Ã
.°°Ã Ä
Description°°Ä Ï
)°°Ï Ð
;°°Ð Ñ
	PagedList
²² 
<
²² #
UserIdentityUserClaim
²² +
>
²²+ , 
identityUserClaims
²²- ?
=
²²@ A
await
²²B G!
_identityRepository
²²H [
.
²²[ \ 
GetUserClaimsAsync
²²\ n
(
²²n o
userId
²²o u
,
²²u v
page
²²w {
,
²²{ |
pageSize²²} …
)²²… †
;²²† ‡
var
³³ 
	claimDtos
³³ 
=
³³  
identityUserClaims
³³ .
.
³³. /
ToModel
³³/ 6
(
³³6 7
)
³³7 8
;
³³8 9
return
µµ 
	claimDtos
µµ 
;
µµ 
}
¶¶ 	
public
¸¸ 
async
¸¸ 
Task
¸¸ 
<
¸¸ 
UserClaimsDto
¸¸ '
>
¸¸' (
GetUserClaimAsync
¸¸) :
(
¸¸: ;
int
¸¸; >
userId
¸¸? E
,
¸¸E F
int
¸¸G J
claimId
¸¸K R
)
¸¸R S
{
¹¹ 	
var
ºº 

userExists
ºº 
=
ºº 
await
ºº "!
_identityRepository
ºº# 6
.
ºº6 7
ExistsUserAsync
ºº7 F
(
ººF G
userId
ººG M
)
ººM N
;
ººN O
if
»» 
(
»» 
!
»» 

userExists
»» 
)
»» 
throw
»» "
new
»»# &,
UserFriendlyErrorPageException
»»' E
(
»»E F
string
»»F L
.
»»L M
Format
»»M S
(
»»S T'
_identityServiceResources
»»T m
.
»»m n
UserDoesNotExist
»»n ~
(
»»~ 
)»» €
.»»€ 
Description»» Œ
,»»Œ 
userId»»Ž ”
)»»” •
,»»• –)
_identityServiceResources»»— °
.»»° ± 
UserDoesNotExist»»± Á
(»»Á Â
)»»Â Ã
.»»Ã Ä
Description»»Ä Ï
)»»Ï Ð
;»»Ð Ñ
var
½½ 
identityUserClaim
½½ !
=
½½" #
await
½½$ )!
_identityRepository
½½* =
.
½½= >
GetUserClaimAsync
½½> O
(
½½O P
userId
½½P V
,
½½V W
claimId
½½X _
)
½½_ `
;
½½` a
if
¾¾ 
(
¾¾ 
identityUserClaim
¾¾ !
==
¾¾" $
null
¾¾% )
)
¾¾) *
throw
¾¾+ 0
new
¾¾1 4,
UserFriendlyErrorPageException
¾¾5 S
(
¾¾S T
string
¾¾T Z
.
¾¾Z [
Format
¾¾[ a
(
¾¾a b'
_identityServiceResources
¾¾b {
.
¾¾{ |$
UserClaimDoesNotExist¾¾| ‘
(¾¾‘ ’
)¾¾’ “
.¾¾“ ”
Description¾¾” Ÿ
,¾¾Ÿ  
userId¾¾¡ §
)¾¾§ ¨
,¾¾¨ ©)
_identityServiceResources¾¾ª Ã
.¾¾Ã Ä%
UserClaimDoesNotExist¾¾Ä Ù
(¾¾Ù Ú
)¾¾Ú Û
.¾¾Û Ü
Description¾¾Ü ç
)¾¾ç è
;¾¾è é
var
ÀÀ 
userClaimsDto
ÀÀ 
=
ÀÀ 
identityUserClaim
ÀÀ  1
.
ÀÀ1 2
ToModel
ÀÀ2 9
(
ÀÀ9 :
)
ÀÀ: ;
;
ÀÀ; <
return
ÂÂ 
userClaimsDto
ÂÂ  
;
ÂÂ  !
}
ÃÃ 	
public
ÅÅ 
async
ÅÅ 
Task
ÅÅ 
<
ÅÅ 
IdentityResult
ÅÅ (
>
ÅÅ( )#
CreateUserClaimsAsync
ÅÅ* ?
(
ÅÅ? @
UserClaimsDto
ÅÅ@ M
	claimsDto
ÅÅN W
)
ÅÅW X
{
ÆÆ 	
var
ÇÇ #
userIdentityUserClaim
ÇÇ %
=
ÇÇ& '
	claimsDto
ÇÇ( 1
.
ÇÇ1 2
ToEntity
ÇÇ2 :
(
ÇÇ: ;
)
ÇÇ; <
;
ÇÇ< =
var
ÈÈ 
identityResult
ÈÈ 
=
ÈÈ  
await
ÈÈ! &!
_identityRepository
ÈÈ' :
.
ÈÈ: ;#
CreateUserClaimsAsync
ÈÈ; P
(
ÈÈP Q#
userIdentityUserClaim
ÈÈQ f
)
ÈÈf g
;
ÈÈg h
return
ÊÊ !
HandleIdentityError
ÊÊ &
(
ÊÊ& '
identityResult
ÊÊ' 5
,
ÊÊ5 6'
_identityServiceResources
ÊÊ7 P
.
ÊÊP Q$
UserClaimsCreateFailed
ÊÊQ g
(
ÊÊg h
)
ÊÊh i
.
ÊÊi j
Description
ÊÊj u
,
ÊÊu v(
_identityServiceResourcesÊÊw 
.ÊÊ ‘ 
IdentityErrorKeyÊÊ‘ ¡
(ÊÊ¡ ¢
)ÊÊ¢ £
.ÊÊ£ ¤
DescriptionÊÊ¤ ¯
,ÊÊ¯ °
	claimsDtoÊÊ± º
)ÊÊº »
;ÊÊ» ¼
}
ËË 	
public
ÍÍ 
async
ÍÍ 
Task
ÍÍ 
<
ÍÍ 
int
ÍÍ 
>
ÍÍ #
DeleteUserClaimsAsync
ÍÍ 4
(
ÍÍ4 5
UserClaimsDto
ÍÍ5 B
claim
ÍÍC H
)
ÍÍH I
{
ÎÎ 	
return
ÏÏ 
await
ÏÏ !
_identityRepository
ÏÏ ,
.
ÏÏ, -#
DeleteUserClaimsAsync
ÏÏ- B
(
ÏÏB C
claim
ÏÏC H
.
ÏÏH I
UserId
ÏÏI O
,
ÏÏO P
claim
ÏÏQ V
.
ÏÏV W
ClaimId
ÏÏW ^
)
ÏÏ^ _
;
ÏÏ_ `
}
ÐÐ 	
public
ÒÒ 
async
ÒÒ 
Task
ÒÒ 
<
ÒÒ 
UserProvidersDto
ÒÒ *
>
ÒÒ* +#
GetUserProvidersAsync
ÒÒ, A
(
ÒÒA B
int
ÒÒB E
userId
ÒÒF L
)
ÒÒL M
{
ÓÓ 	
var
ÔÔ 

userExists
ÔÔ 
=
ÔÔ 
await
ÔÔ "!
_identityRepository
ÔÔ# 6
.
ÔÔ6 7
ExistsUserAsync
ÔÔ7 F
(
ÔÔF G
userId
ÔÔG M
)
ÔÔM N
;
ÔÔN O
if
ÕÕ 
(
ÕÕ 
!
ÕÕ 

userExists
ÕÕ 
)
ÕÕ 
throw
ÕÕ "
new
ÕÕ# &,
UserFriendlyErrorPageException
ÕÕ' E
(
ÕÕE F
string
ÕÕF L
.
ÕÕL M
Format
ÕÕM S
(
ÕÕS T'
_identityServiceResources
ÕÕT m
.
ÕÕm n
UserDoesNotExist
ÕÕn ~
(
ÕÕ~ 
)ÕÕ €
.ÕÕ€ 
DescriptionÕÕ Œ
,ÕÕŒ 
userIdÕÕŽ ”
)ÕÕ” •
,ÕÕ• –)
_identityServiceResourcesÕÕ— °
.ÕÕ° ± 
UserDoesNotExistÕÕ± Á
(ÕÕÁ Â
)ÕÕÂ Ã
.ÕÕÃ Ä
DescriptionÕÕÄ Ï
)ÕÕÏ Ð
;ÕÕÐ Ñ
var
×× 
userLoginInfos
×× 
=
××  
await
××! &!
_identityRepository
××' :
.
××: ;#
GetUserProvidersAsync
××; P
(
××P Q
userId
××Q W
)
××W X
;
××X Y
var
ØØ 
providersDto
ØØ 
=
ØØ 
userLoginInfos
ØØ -
.
ØØ- .
ToModel
ØØ. 5
(
ØØ5 6
)
ØØ6 7
;
ØØ7 8
providersDto
ÙÙ 
.
ÙÙ 
UserId
ÙÙ 
=
ÙÙ  !
userId
ÙÙ" (
;
ÙÙ( )
return
ÛÛ 
providersDto
ÛÛ 
;
ÛÛ  
}
ÜÜ 	
public
ÞÞ 
async
ÞÞ 
Task
ÞÞ 
<
ÞÞ 
IdentityResult
ÞÞ (
>
ÞÞ( )&
DeleteUserProvidersAsync
ÞÞ* B
(
ÞÞB C
UserProviderDto
ÞÞC R
provider
ÞÞS [
)
ÞÞ[ \
{
ßß 	
var
àà 
identityResult
àà 
=
àà  
await
àà! &!
_identityRepository
àà' :
.
àà: ;&
DeleteUserProvidersAsync
àà; S
(
ààS T
provider
ààT \
.
àà\ ]
UserId
àà] c
,
ààc d
provider
ààe m
.
ààm n
ProviderKey
ààn y
,
àày z
provideràà{ ƒ
.ààƒ „
LoginProvideràà„ ‘
)àà‘ ’
;àà’ “
return
ââ !
HandleIdentityError
ââ &
(
ââ& '
identityResult
ââ' 5
,
ââ5 6'
_identityServiceResources
ââ7 P
.
ââP Q&
UserProviderDeleteFailed
ââQ i
(
ââi j
)
ââj k
.
ââk l
Description
ââl w
,
ââw x(
_identityServiceResourcesâây ’
.ââ’ “ 
IdentityErrorKeyââ“ £
(ââ£ ¤
)ââ¤ ¥
.ââ¥ ¦
Descriptionââ¦ ±
,ââ± ²
providerââ³ »
)ââ» ¼
;ââ¼ ½
}
ãã 	
public
åå 
async
åå 
Task
åå 
<
åå 
UserProviderDto
åå )
>
åå) *"
GetUserProviderAsync
åå+ ?
(
åå? @
int
åå@ C
userId
ååD J
,
ååJ K
string
ååL R
providerKey
ååS ^
)
åå^ _
{
ææ 	
var
çç 

userExists
çç 
=
çç 
await
çç "!
_identityRepository
çç# 6
.
çç6 7
ExistsUserAsync
çç7 F
(
ççF G
userId
ççG M
)
ççM N
;
ççN O
if
èè 
(
èè 
!
èè 

userExists
èè 
)
èè 
throw
èè "
new
èè# &,
UserFriendlyErrorPageException
èè' E
(
èèE F
string
èèF L
.
èèL M
Format
èèM S
(
èèS T'
_identityServiceResources
èèT m
.
èèm n
UserDoesNotExist
èèn ~
(
èè~ 
)èè €
.èè€ 
Descriptionèè Œ
,èèŒ 
userIdèèŽ ”
)èè” •
,èè• –)
_identityServiceResourcesèè— °
.èè° ± 
UserDoesNotExistèè± Á
(èèÁ Â
)èèÂ Ã
.èèÃ Ä
DescriptionèèÄ Ï
)èèÏ Ð
;èèÐ Ñ
var
êê 
identityUserLogin
êê !
=
êê" #
await
êê$ )!
_identityRepository
êê* =
.
êê= >"
GetUserProviderAsync
êê> R
(
êêR S
userId
êêS Y
,
êêY Z
providerKey
êê[ f
)
êêf g
;
êêg h
if
ëë 
(
ëë 
identityUserLogin
ëë !
==
ëë" $
null
ëë% )
)
ëë) *
throw
ëë+ 0
new
ëë1 4,
UserFriendlyErrorPageException
ëë5 S
(
ëëS T
string
ëëT Z
.
ëëZ [
Format
ëë[ a
(
ëëa b'
_identityServiceResources
ëëb {
.
ëë{ |'
UserProviderDoesNotExistëë| ”
(ëë” •
)ëë• –
.ëë– —
Descriptionëë— ¢
,ëë¢ £
providerKeyëë¤ ¯
)ëë¯ °
,ëë° ±)
_identityServiceResourcesëë² Ë
.ëëË Ì(
UserProviderDoesNotExistëëÌ ä
(ëëä å
)ëëå æ
.ëëæ ç
Descriptionëëç ò
)ëëò ó
;ëëó ô
var
íí 
userProviderDto
íí 
=
íí  !
identityUserLogin
íí" 3
.
íí3 4
ToModel
íí4 ;
(
íí; <
)
íí< =
;
íí= >
return
ïï 
userProviderDto
ïï "
;
ïï" #
}
ðð 	
public
òò 
async
òò 
Task
òò 
<
òò 
IdentityResult
òò (
>
òò( )%
UserChangePasswordAsync
òò* A
(
òòA B#
UserChangePasswordDto
òòB W
userPassword
òòX d
)
òòd e
{
óó 	
var
ôô 

userExists
ôô 
=
ôô 
await
ôô "!
_identityRepository
ôô# 6
.
ôô6 7
ExistsUserAsync
ôô7 F
(
ôôF G
userPassword
ôôG S
.
ôôS T
UserId
ôôT Z
)
ôôZ [
;
ôô[ \
if
õõ 
(
õõ 
!
õõ 

userExists
õõ 
)
õõ 
throw
õõ "
new
õõ# &,
UserFriendlyErrorPageException
õõ' E
(
õõE F
string
õõF L
.
õõL M
Format
õõM S
(
õõS T'
_identityServiceResources
õõT m
.
õõm n
UserDoesNotExist
õõn ~
(
õõ~ 
)õõ €
.õõ€ 
Descriptionõõ Œ
,õõŒ 
userPasswordõõŽ š
.õõš ›
UserIdõõ› ¡
)õõ¡ ¢
,õõ¢ £)
_identityServiceResourcesõõ¤ ½
.õõ½ ¾ 
UserDoesNotExistõõ¾ Î
(õõÎ Ï
)õõÏ Ð
.õõÐ Ñ
DescriptionõõÑ Ü
)õõÜ Ý
;õõÝ Þ
var
÷÷ 
identityResult
÷÷ 
=
÷÷  
await
÷÷! &!
_identityRepository
÷÷' :
.
÷÷: ;%
UserChangePasswordAsync
÷÷; R
(
÷÷R S
userPassword
÷÷S _
.
÷÷_ `
UserId
÷÷` f
,
÷÷f g
userPassword
÷÷h t
.
÷÷t u
Password
÷÷u }
)
÷÷} ~
;
÷÷~ 
return
ùù !
HandleIdentityError
ùù &
(
ùù& '
identityResult
ùù' 5
,
ùù5 6'
_identityServiceResources
ùù7 P
.
ùùP Q&
UserChangePasswordFailed
ùùQ i
(
ùùi j
)
ùùj k
.
ùùk l
Description
ùùl w
,
ùùw x(
_identityServiceResourcesùùy ’
.ùù’ “ 
IdentityErrorKeyùù“ £
(ùù£ ¤
)ùù¤ ¥
.ùù¥ ¦
Descriptionùù¦ ±
,ùù± ²
userPasswordùù³ ¿
)ùù¿ À
;ùùÀ Á
}
úú 	
public
üü 
async
üü 
Task
üü 
<
üü 
IdentityResult
üü (
>
üü( )#
CreateRoleClaimsAsync
üü* ?
(
üü? @
RoleClaimsDto
üü@ M
	claimsDto
üüN W
)
üüW X
{
ýý 	
var
þþ 
identityRoleClaim
þþ !
=
þþ" #
	claimsDto
þþ$ -
.
þþ- .
ToEntity
þþ. 6
(
þþ6 7
)
þþ7 8
;
þþ8 9
var
ÿÿ 
identityResult
ÿÿ 
=
ÿÿ  
await
ÿÿ! &!
_identityRepository
ÿÿ' :
.
ÿÿ: ;#
CreateRoleClaimsAsync
ÿÿ; P
(
ÿÿP Q
identityRoleClaim
ÿÿQ b
)
ÿÿb c
;
ÿÿc d
return
 !
HandleIdentityError
 &
(
& '
identityResult
' 5
,
5 6'
_identityServiceResources
7 P
.
P Q$
RoleClaimsCreateFailed
Q g
(
g h
)
h i
.
i j
Description
j u
,
u v(
_identityServiceResourcesw 
. ‘ 
IdentityErrorKey‘ ¡
(¡ ¢
)¢ £
.£ ¤
Description¤ ¯
,¯ °
	claimsDto± º
)º »
;» ¼
}
‚‚ 	
public
„„ 
async
„„ 
Task
„„ 
<
„„ 
RoleClaimsDto
„„ '
>
„„' ( 
GetRoleClaimsAsync
„„) ;
(
„„; <
int
„„< ?
roleId
„„@ F
,
„„F G
int
„„H K
page
„„L P
=
„„Q R
$num
„„S T
,
„„T U
int
„„V Y
pageSize
„„Z b
=
„„c d
$num
„„e g
)
„„g h
{
…… 	
var
†† 

roleExists
†† 
=
†† 
await
†† "!
_identityRepository
††# 6
.
††6 7
ExistsRoleAsync
††7 F
(
††F G
roleId
††G M
)
††M N
;
††N O
if
‡‡ 
(
‡‡ 
!
‡‡ 

roleExists
‡‡ 
)
‡‡ 
throw
‡‡ "
new
‡‡# &,
UserFriendlyErrorPageException
‡‡' E
(
‡‡E F
string
‡‡F L
.
‡‡L M
Format
‡‡M S
(
‡‡S T'
_identityServiceResources
‡‡T m
.
‡‡m n
RoleDoesNotExist
‡‡n ~
(
‡‡~ 
)‡‡ €
.‡‡€ 
Description‡‡ Œ
,‡‡Œ 
roleId‡‡Ž ”
)‡‡” •
,‡‡• –)
_identityServiceResources‡‡— °
.‡‡° ± 
RoleDoesNotExist‡‡± Á
(‡‡Á Â
)‡‡Â Ã
.‡‡Ã Ä
Description‡‡Ä Ï
)‡‡Ï Ð
;‡‡Ð Ñ
var
‰‰  
identityRoleClaims
‰‰ "
=
‰‰# $
await
‰‰% *!
_identityRepository
‰‰+ >
.
‰‰> ? 
GetRoleClaimsAsync
‰‰? Q
(
‰‰Q R
roleId
‰‰R X
,
‰‰X Y
page
‰‰Z ^
,
‰‰^ _
pageSize
‰‰` h
)
‰‰h i
;
‰‰i j
var
ŠŠ 
roleClaimDtos
ŠŠ 
=
ŠŠ  
identityRoleClaims
ŠŠ  2
.
ŠŠ2 3
ToModel
ŠŠ3 :
(
ŠŠ: ;
)
ŠŠ; <
;
ŠŠ< =
return
ŒŒ 
roleClaimDtos
ŒŒ  
;
ŒŒ  !
}
 	
public
 
async
 
Task
 
<
 
RoleClaimsDto
 '
>
' (
GetRoleClaimAsync
) :
(
: ;
int
; >
roleId
? E
,
E F
int
G J
claimId
K R
)
R S
{
 	
var
‘‘ 

roleExists
‘‘ 
=
‘‘ 
await
‘‘ "!
_identityRepository
‘‘# 6
.
‘‘6 7
ExistsRoleAsync
‘‘7 F
(
‘‘F G
roleId
‘‘G M
)
‘‘M N
;
‘‘N O
if
’’ 
(
’’ 
!
’’ 

roleExists
’’ 
)
’’ 
throw
’’ "
new
’’# &,
UserFriendlyErrorPageException
’’' E
(
’’E F
string
’’F L
.
’’L M
Format
’’M S
(
’’S T'
_identityServiceResources
’’T m
.
’’m n
RoleDoesNotExist
’’n ~
(
’’~ 
)’’ €
.’’€ 
Description’’ Œ
,’’Œ 
roleId’’Ž ”
)’’” •
,’’• –)
_identityServiceResources’’— °
.’’° ± 
RoleDoesNotExist’’± Á
(’’Á Â
)’’Â Ã
.’’Ã Ä
Description’’Ä Ï
)’’Ï Ð
;’’Ð Ñ
var
”” 
identityRoleClaim
”” !
=
””" #
await
””$ )!
_identityRepository
””* =
.
””= >
GetRoleClaimAsync
””> O
(
””O P
roleId
””P V
,
””V W
claimId
””X _
)
””_ `
;
””` a
if
•• 
(
•• 
identityRoleClaim
•• !
==
••" $
null
••% )
)
••) *
throw
••+ 0
new
••1 4,
UserFriendlyErrorPageException
••5 S
(
••S T
string
••T Z
.
••Z [
Format
••[ a
(
••a b'
_identityServiceResources
••b {
.
••{ |$
RoleClaimDoesNotExist••| ‘
(••‘ ’
)••’ “
.••“ ”
Description••” Ÿ
,••Ÿ  
claimId••¡ ¨
)••¨ ©
,••© ª)
_identityServiceResources••« Ä
.••Ä Å%
RoleClaimDoesNotExist••Å Ú
(••Ú Û
)••Û Ü
.••Ü Ý
Description••Ý è
)••è é
;••é ê
var
—— 
roleClaimsDto
—— 
=
—— 
identityRoleClaim
——  1
.
——1 2
ToModel
——2 9
(
——9 :
)
——: ;
;
——; <
return
™™ 
roleClaimsDto
™™  
;
™™  !
}
šš 	
public
œœ 
async
œœ 
Task
œœ 
<
œœ 
int
œœ 
>
œœ #
DeleteRoleClaimsAsync
œœ 4
(
œœ4 5
RoleClaimsDto
œœ5 B
role
œœC G
)
œœG H
{
 	
return
žž 
await
žž !
_identityRepository
žž ,
.
žž, -#
DeleteRoleClaimsAsync
žž- B
(
žžB C
role
žžC G
.
žžG H
RoleId
žžH N
,
žžN O
role
žžP T
.
žžT U
ClaimId
žžU \
)
žž\ ]
;
žž] ^
}
ŸŸ 	
public
¡¡ 
async
¡¡ 
Task
¡¡ 
<
¡¡ 
IdentityResult
¡¡ (
>
¡¡( )
DeleteRoleAsync
¡¡* 9
(
¡¡9 :
RoleDto
¡¡: A
role
¡¡B F
)
¡¡F G
{
¢¢ 	
var
££ 
userIdentityRole
££  
=
££! "
role
££# '
.
££' (
ToEntity
££( 0
(
££0 1
)
££1 2
;
££2 3
var
¤¤ 
identityResult
¤¤ 
=
¤¤  
await
¤¤! &!
_identityRepository
¤¤' :
.
¤¤: ;
DeleteRoleAsync
¤¤; J
(
¤¤J K
userIdentityRole
¤¤K [
)
¤¤[ \
;
¤¤\ ]
return
¦¦ !
HandleIdentityError
¦¦ &
(
¦¦& '
identityResult
¦¦' 5
,
¦¦5 6'
_identityServiceResources
¦¦7 P
.
¦¦P Q
RoleDeleteFailed
¦¦Q a
(
¦¦a b
)
¦¦b c
.
¦¦c d
Description
¦¦d o
,
¦¦o p(
_identityServiceResources¦¦q Š
.¦¦Š ‹ 
IdentityErrorKey¦¦‹ ›
(¦¦› œ
)¦¦œ 
.¦¦ ž
Description¦¦ž ©
,¦¦© ª
role¦¦« ¯
)¦¦¯ °
;¦¦° ±
}
§§ 	
}
¨¨ 
}©© Õ
‰C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Services\IIdentityResourceService.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Services4 <
{ 
public 

	interface $
IIdentityResourceService -
{ 
Task 
<  
IdentityResourcesDto !
>! "%
GetIdentityResourcesAsync# <
(< =
string= C
searchD J
,J K
intL O
pageP T
=U V
$numW X
,X Y
intZ ]
pageSize^ f
=g h
$numi k
)k l
;l m
Task

 
<

 
IdentityResourceDto

  
>

  !$
GetIdentityResourceAsync

" :
(

: ;
int

; >
identityResourceId

? Q
)

Q R
;

R S
Task 
< 
bool 
> *
CanInsertIdentityResourceAsync 1
(1 2
IdentityResourceDto2 E
identityResourceF V
)V W
;W X
Task 
< 
int 
> $
AddIdentityResourceAsync *
(* +
IdentityResourceDto+ >
identityResource? O
)O P
;P Q
Task 
< 
int 
> '
UpdateIdentityResourceAsync -
(- .
IdentityResourceDto. A
identityResourceB R
)R S
;S T
Task 
< 
int 
> '
DeleteIdentityResourceAsync -
(- .
IdentityResourceDto. A
identityResourceB R
)R S
;S T
IdentityResourceDto *
BuildIdentityResourceViewModel :
(: ;
IdentityResourceDto; N
identityResourceO _
)_ `
;` a
} 
} †
C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Services\IIdentityService.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Services4 <
{ 
public 

	interface 
IIdentityService %
:& ' 
IBaseIdentityService( <
<< =
int= @
,@ A
intB E
,E F
intG J
>J K
{ 
} 
} ¹
|C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Services\ILogService.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Services4 <
{ 
public 

	interface 
ILogService  
{ 
Task 
< 
LogsDto 
> 
GetLogsAsync "
(" #
string# )
search* 0
,0 1
int2 5
page6 :
=; <
$num= >
,> ?
int@ C
pageSizeD L
=M N
$numO Q
)Q R
;R S
}		 
}

 —
‡C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Services\IPersistedGrantService.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Services4 <
{ 
public 

	interface "
IPersistedGrantService +
{ 
Task 
< 
PersistedGrantsDto 
>  $
GetPersitedGrantsByUsers! 9
(9 :
string: @
searchA G
,G H
intI L
pageM Q
=R S
$numT U
,U V
intW Z
pageSize[ c
=d e
$numf h
)h i
;i j
Task		 
<		 
PersistedGrantsDto		 
>		  #
GetPersitedGrantsByUser		! 8
(		8 9
string		9 ?
	subjectId		@ I
,		I J
int		K N
page		O S
=		T U
$num		V W
,		W X
int		Y \
pageSize		] e
=		f g
$num		h j
)		j k
;		k l
Task

 
<

 
PersistedGrantDto

 
>

 !
GetPersitedGrantAsync

  5
(

5 6
string

6 <
key

= @
)

@ A
;

A B
Task 
< 
int 
> %
DeletePersistedGrantAsync +
(+ ,
string, 2
key3 6
)6 7
;7 8
Task 
< 
int 
> &
DeletePersistedGrantsAsync ,
(, -
int- 0
userId1 7
)7 8
;8 9
} 
} Í
{C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Services\LogService.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Services4 <
{ 
public 

class 

LogService 
: 
ILogService )
{		 
private

 
readonly

 
ILogRepository

 '
_repository

( 3
;

3 4
public 

LogService 
( 
ILogRepository (

repository) 3
)3 4
{ 	
_repository 
= 

repository $
;$ %
} 	
public 
async 
Task 
< 
LogsDto !
>! "
GetLogsAsync# /
(/ 0
string0 6
search7 =
,= >
int? B
pageC G
=H I
$numJ K
,K L
intM P
pageSizeQ Y
=Z [
$num\ ^
)^ _
{ 	
var 
	pagedList 
= 
await !
_repository" -
.- .
GetLogsAsync. :
(: ;
search; A
,A B
pageC G
,G H
pageSizeI Q
)Q R
;R S
var 
logs 
= 
	pagedList  
.  !
ToModel! (
(( )
)) *
;* +
return 
logs 
; 
} 	
} 
} ¼3
†C:\DEV\MAGVA\TransacoesFinanceiras\src\Middle\Security\src\MAGVA.Middle.Security.Admin.BusinessLogic\Services\PersistedGrantService.cs
	namespace 	
MAGVA
 
. 
Middle 
. 
Security 
.  
Admin  %
.% &
BusinessLogic& 3
.3 4
Services4 <
{		 
public

 

class

 !
PersistedGrantService

 &
:

' ("
IPersistedGrantService

) ?
{ 
private 
readonly %
IPersistedGrantRepository 2%
_persistedGrantRepository3 L
;L M
private 
readonly +
IPersistedGrantServiceResources 8+
_persistedGrantServiceResources9 X
;X Y
public !
PersistedGrantService $
($ %%
IPersistedGrantRepository% >$
persistedGrantRepository? W
,W X+
IPersistedGrantServiceResources +*
persistedGrantServiceResources, J
)J K
{ 	%
_persistedGrantRepository %
=& '$
persistedGrantRepository( @
;@ A+
_persistedGrantServiceResources +
=, -*
persistedGrantServiceResources. L
;L M
} 	
public 
async 
Task 
< 
PersistedGrantsDto ,
>, -$
GetPersitedGrantsByUsers. F
(F G
stringG M
searchN T
,T U
intV Y
pageZ ^
=_ `
$numa b
,b c
intd g
pageSizeh p
=q r
$nums u
)u v
{ 	
var 
	pagedList 
= 
await !%
_persistedGrantRepository" ;
.; <$
GetPersitedGrantsByUsers< T
(T U
searchU [
,[ \
page] a
,a b
pageSizec k
)k l
;l m
var 
persistedGrantsDto "
=# $
	pagedList% .
.. /
ToModel/ 6
(6 7
)7 8
;8 9
return 
persistedGrantsDto %
;% &
} 	
public 
async 
Task 
< 
PersistedGrantsDto ,
>, -#
GetPersitedGrantsByUser. E
(E F
stringF L
	subjectIdM V
,V W
intX [
page\ `
=a b
$numc d
,d e
intf i
pageSizej r
=s t
$numu w
)w x
{ 	
var   
exists   
=   
await   %
_persistedGrantRepository   8
.  8 9&
ExistsPersistedGrantsAsync  9 S
(  S T
	subjectId  T ]
)  ] ^
;  ^ _
if!! 
(!! 
!!! 
exists!! 
)!! 
throw!! 
new!! "*
UserFriendlyErrorPageException!!# A
(!!A B
string!!B H
.!!H I
Format!!I O
(!!O P+
_persistedGrantServiceResources!!P o
.!!o p4
'PersistedGrantWithSubjectIdDoesNotExist	!!p —
(
!!— ˜
)
!!˜ ™
.
!!™ š
Description
!!š ¥
,
!!¥ ¦
	subjectId
!!§ °
)
!!° ±
,
!!± ²-
_persistedGrantServiceResources
!!³ Ò
.
!!Ò Ó5
'PersistedGrantWithSubjectIdDoesNotExist
!!Ó ú
(
!!ú û
)
!!û ü
.
!!ü ý
Description
!!ý ˆ
)
!!ˆ ‰
;
!!‰ Š
var## 
	pagedList## 
=## 
await## !%
_persistedGrantRepository##" ;
.##; <#
GetPersitedGrantsByUser##< S
(##S T
	subjectId##T ]
,##] ^
page##_ c
,##c d
pageSize##e m
)##m n
;##n o
var$$ 
persistedGrantsDto$$ "
=$$# $
	pagedList$$% .
.$$. /
ToModel$$/ 6
($$6 7
)$$7 8
;$$8 9
return&& 
persistedGrantsDto&& %
;&&% &
}'' 	
public)) 
async)) 
Task)) 
<)) 
PersistedGrantDto)) +
>))+ ,!
GetPersitedGrantAsync))- B
())B C
string))C I
key))J M
)))M N
{** 	
var++ 
persistedGrant++ 
=++  
await++! &%
_persistedGrantRepository++' @
.++@ A!
GetPersitedGrantAsync++A V
(++V W
key++W Z
)++Z [
;++[ \
if,, 
(,, 
persistedGrant,, 
==,, !
null,," &
),,& '
throw,,( -
new,,. 1*
UserFriendlyErrorPageException,,2 P
(,,P Q
string,,Q W
.,,W X
Format,,X ^
(,,^ _+
_persistedGrantServiceResources,,_ ~
.,,~ '
PersistedGrantDoesNotExist	,, ™
(
,,™ š
)
,,š ›
.
,,› œ
Description
,,œ §
,
,,§ ¨
key
,,© ¬
)
,,¬ ­
,
,,­ ®-
_persistedGrantServiceResources
,,¯ Î
.
,,Î Ï(
PersistedGrantDoesNotExist
,,Ï é
(
,,é ê
)
,,ê ë
.
,,ë ì
Description
,,ì ÷
)
,,÷ ø
;
,,ø ù
var-- 
persistedGrantDto-- !
=--" #
persistedGrant--$ 2
.--2 3
ToModel--3 :
(--: ;
)--; <
;--< =
return// 
persistedGrantDto// $
;//$ %
}00 	
public22 
async22 
Task22 
<22 
int22 
>22 %
DeletePersistedGrantAsync22 8
(228 9
string229 ?
key22@ C
)22C D
{33 	
return44 
await44 %
_persistedGrantRepository44 2
.442 3%
DeletePersistedGrantAsync443 L
(44L M
key44M P
)44P Q
;44Q R
}55 	
public77 
async77 
Task77 
<77 
int77 
>77 &
DeletePersistedGrantsAsync77 9
(779 :
int77: =
userId77> D
)77D E
{88 	
return99 
await99 %
_persistedGrantRepository99 2
.992 3&
DeletePersistedGrantsAsync993 M
(99M N
userId99N T
)99T U
;99U V
}:: 	
};; 
}<< 